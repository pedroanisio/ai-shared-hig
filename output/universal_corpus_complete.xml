<?xml version="1.0" ?>
<universal-corpus xmlns:ns0="http://universal-corpus.org/schema/v1" xmlns="http://universal-corpus.org/schema/v1" version="1.1" generated="2025-11-22">
  <metadata>
    <description>Universal Corpus - Complete and consistent specification</description>
    <total-patterns>70</total-patterns>
  </metadata>
  <patterns>
    <ns0:pattern id="C1" version="1.1">
      <ns0:metadata>
        <ns0:name>Graph Structure</ns0:name>
        <ns0:category>concept</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$G = (N, E, \lambda_n, \lambda_e)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>\lambda_n</ns0:name>
            <ns0:type>N ‚Üí Label_n</ns0:type>
            <ns0:notation>\lambda_n</ns0:notation>
            <ns0:description>**node labeling function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\lambda_e</ns0:name>
            <ns0:type>E ‚Üí Label_e</ns0:type>
            <ns0:notation>\lambda_e</ns0:notation>
            <ns0:description>**edge labeling function**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.C1.1">
          <ns0:name>Connectivity</ns0:name>
          <ns0:formal-spec format="latex">connected(G) ‚áî ‚àÄn‚ÇÅ, n‚ÇÇ ‚àà N: ‚àÉ path from n‚ÇÅ to n‚ÇÇ</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C1.2">
          <ns0:name>Cycle Detection</ns0:name>
          <ns0:formal-spec format="latex">acyclic(G) ‚áî ¬¨‚àÉ path: n ‚Üí ... ‚Üí n</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Traverse</ns0:name>
          <ns0:signature>traverse(n: N, depth: ‚Ñï) ‚Üí Set‚ü®N‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   traverse(n: N, depth: ‚Ñï) ‚Üí Set‚ü®N‚ü©
   = {n' ‚àà N : distance(n, n') ‚â§ depth}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Neighbors</ns0:name>
          <ns0:signature>neighbors(n: N) ‚Üí Set‚ü®N‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   neighbors(n: N) ‚Üí Set‚ü®N‚ü©
   = {n' ‚àà N : (n, n') ‚àà E ‚à® (n', n) ‚àà E}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Path</ns0:name>
          <ns0:signature>path(n‚ÇÅ: N, n‚ÇÇ: N) ‚Üí Sequence‚ü®N‚ü© | null</ns0:signature>
          <ns0:formal-definition format="latex">```
   path(n‚ÇÅ: N, n‚ÇÇ: N) ‚Üí Sequence‚ü®N‚ü© | null
   = shortest path from n‚ÇÅ to n‚ÇÇ, or null if none exists</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Knowledge graphs</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>File trees</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Feature history</ns0:name>
          <ns0:description>CAD</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Axiom dependencies</ns0:name>
          <ns0:description>proof assistants</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Part hierarchies</ns0:name>
          <ns0:description>engineering</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Social networks</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Dependency graphs</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="C2" version="1.1">
      <ns0:metadata>
        <ns0:name>Document/Artifact</ns0:name>
        <ns0:category>concept</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$D = (id, content, metadata, version)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>id</ns0:name>
            <ns0:type>ID</ns0:type>
            <ns0:notation>id</ns0:notation>
            <ns0:description>unique identifier</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>content</ns0:name>
            <ns0:type>Content</ns0:type>
            <ns0:notation>content</ns0:notation>
            <ns0:description>document body</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>metadata</ns0:name>
            <ns0:type>Metadata</ns0:type>
            <ns0:notation>metadata</ns0:notation>
            <ns0:description>key-value properties</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>version</ns0:name>
            <ns0:type>Version</ns0:type>
            <ns0:notation>version</ns0:notation>
            <ns0:description>version information</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.C2.1">
          <ns0:name>Editability</ns0:name>
          <ns0:formal-spec format="latex">edit(D, Œî) ‚Üí D'
where Œî : Delta and D'.version.number = D.version.number + 1</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C2.2">
          <ns0:name>Versionability</ns0:name>
          <ns0:formal-spec format="latex">‚àÄt: ‚àÉD': checkout(D, t) = D'
where D'.version.timestamp = t</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C2.3">
          <ns0:name>Serializability</ns0:name>
          <ns0:formal-spec format="latex">deserialize(serialize(D)) = D</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Edit</ns0:name>
          <ns0:signature>edit(D: Document, Œî: Delta) ‚Üí Document</ns0:signature>
          <ns0:formal-definition format="latex">```
   edit(D: Document, Œî: Delta) ‚Üí Document
   = D' where D'.content = apply(D.content, Œî)
            ‚àß D'.version = next_version(D.version, Œî)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Checkout Version</ns0:name>
          <ns0:signature>checkout(D: Document, v: Version) ‚Üí Document</ns0:signature>
          <ns0:formal-definition format="latex">```
   checkout(D: Document, v: Version) ‚Üí Document
   = D' where D'.content = reconstruct(D.history, v)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Merge</ns0:name>
          <ns0:signature>merge(D‚ÇÅ: Document, D‚ÇÇ: Document) ‚Üí Document | Conflict</ns0:signature>
          <ns0:formal-definition format="latex">```
   merge(D‚ÇÅ: Document, D‚ÇÇ: Document) ‚Üí Document | Conflict
   = three-way merge with common ancestor</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Text documents</ns0:name>
          <ns0:description>Markdown, Word</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Source code files</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Proofs</ns0:name>
          <ns0:description>Lean, Coq</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>CAD models</ns0:name>
          <ns0:description>parametric designs</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Content blocks</ns0:name>
          <ns0:description>CMS</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="C3" version="1.1">
      <ns0:metadata>
        <ns0:name>Symbolic Expression</ns0:name>
        <ns0:category>concept</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$T = (root, children)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>root</ns0:name>
            <ns0:type>Symbol</ns0:type>
            <ns0:notation>root</ns0:notation>
            <ns0:description>root node (operator or value)</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>children</ns0:name>
            <ns0:type>Sequence‚ü®Tree‚ü©</ns0:type>
            <ns0:notation>children</ns0:notation>
            <ns0:description>child expressions</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.C3.1">
          <ns0:name>Parseability</ns0:name>
          <ns0:formal-spec format="latex">parse(serialize(T)) = T</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C3.2">
          <ns0:name>Evaluability</ns0:name>
          <ns0:formal-spec format="latex">‚àÄT, context: eval(T, context) ‚Üí Value | Error</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C3.3">
          <ns0:name>Transformability</ns0:name>
          <ns0:formal-spec format="latex">‚àÉtransform: simplify(T) = T' where semantics(T) = semantics(T')
‚àß complexity(T') ‚â§ complexity(T)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Parse</ns0:name>
          <ns0:signature>parse(s: String) ‚Üí Tree | ParseError</ns0:signature>
          <ns0:formal-definition format="latex">```
   parse(s: String) ‚Üí Tree | ParseError
   = construct AST from string representation</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Evaluate</ns0:name>
          <ns0:signature>eval(T: Tree, context: Map‚ü®String,Value‚ü©) ‚Üí Value</ns0:signature>
          <ns0:formal-definition format="latex">```
   eval(T: Tree, context: Map‚ü®String,Value‚ü©) ‚Üí Value
   = case T.root of
       Literal(v) ‚Üí v
       Variable(x) ‚Üí context[x]
       Operator(op) ‚Üí op(map(eval, T.children))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Simplify</ns0:name>
          <ns0:signature>simplify(T: Tree) ‚Üí Tree</ns0:signature>
          <ns0:formal-definition format="latex">```
   simplify(T: Tree) ‚Üí Tree
   = apply rewrite rules until fixpoint</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Mathematical formulas</ns0:name>
          <ns0:description>LaTeX, MathML</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Code AST</ns0:name>
          <ns0:description>Python, JavaScript</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Constraints</ns0:name>
          <ns0:description>SMT-LIB</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Queries</ns0:name>
          <ns0:description>SQL, GraphQL</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Tags/taxonomies</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="C4" version="1.1">
      <ns0:metadata>
        <ns0:name>Metadata Schema</ns0:name>
        <ns0:category>concept</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$M = (schema, data, validators)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>schema</ns0:name>
            <ns0:type>Map‚ü®String, Type‚ü©</ns0:type>
            <ns0:notation>schema</ns0:notation>
            <ns0:description>defines field types</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>data</ns0:name>
            <ns0:type>Map‚ü®String, Value‚ü©</ns0:type>
            <ns0:notation>data</ns0:notation>
            <ns0:description>actual metadata</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>validators</ns0:name>
            <ns0:type>Map‚ü®String, Predicate‚ü©</ns0:type>
            <ns0:notation>validators</ns0:notation>
            <ns0:description>validation rules</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.C4.1">
          <ns0:name>Type Safety</ns0:name>
          <ns0:formal-spec format="latex">‚àÄk ‚àà keys(data): type(data[k]) = schema[k]</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C4.2">
          <ns0:name>Validation</ns0:name>
          <ns0:formal-spec format="latex">valid(M) ‚áî ‚àÄk ‚àà keys(data): validators[k](data[k])</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C4.3">
          <ns0:name>Extensibility</ns0:name>
          <ns0:formal-spec format="latex">extend(M, k, v) ‚Üí M' where keys(M'.data) = keys(M.data) ‚à™ {k}</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Add Field</ns0:name>
          <ns0:signature>add(M: Metadata, k: String, v: Value) ‚Üí Metadata</ns0:signature>
          <ns0:formal-definition format="latex">```
   add(M: Metadata, k: String, v: Value) ‚Üí Metadata
   = M' where M'.data[k] = v
            ‚àß validate(M'.schema[k], v)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Query</ns0:name>
          <ns0:signature>query(M: Metadata, pred: Predicate) ‚Üí ùîπ</ns0:signature>
          <ns0:formal-definition format="latex">```
   query(M: Metadata, pred: Predicate) ‚Üí ùîπ
   = pred(M.data)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Index</ns0:name>
          <ns0:signature>index(docs: Set‚ü®Document‚ü©, field: String) ‚Üí Map‚ü®Value, Set‚ü®Document‚ü©‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   index(docs: Set‚ü®Document‚ü©, field: String) ‚Üí Map‚ü®Value, Set‚ü®Document‚ü©‚ü©
   = group documents by field value</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Tags</ns0:name>
          <ns0:description>blog posts, notes</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Properties</ns0:name>
          <ns0:description>CAD features</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Attributes</ns0:name>
          <ns0:description>HTML elements</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Annotations</ns0:name>
          <ns0:description>PDF, code comments</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Labels</ns0:name>
          <ns0:description>issue tracking</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="C5" version="1.1">
      <ns0:metadata>
        <ns0:name>Version History</ns0:name>
        <ns0:category>concept</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$H = (states, deltas, branches)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>states</ns0:name>
            <ns0:type>Sequence‚ü®State‚ü©</ns0:type>
            <ns0:notation>states</ns0:notation>
            <ns0:description>sequence of states</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>deltas</ns0:name>
            <ns0:type>Sequence‚ü®Delta‚ü©</ns0:type>
            <ns0:notation>deltas</ns0:notation>
            <ns0:description>sequence of changes</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>branches</ns0:name>
            <ns0:type>Tree‚ü®State‚ü©</ns0:type>
            <ns0:notation>branches</ns0:notation>
            <ns0:description>represents branch structure</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.C5.1">
          <ns0:name>Immutability</ns0:name>
          <ns0:formal-spec format="latex">‚àÄs ‚àà states: s is immutable once committed</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C5.2">
          <ns0:name>Reconstructability</ns0:name>
          <ns0:formal-spec format="latex">‚àÄi: states[i] = apply_all(states[0], deltas[1..i])</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.C5.3">
          <ns0:name>Branching</ns0:name>
          <ns0:formal-spec format="latex">branch(s, name) creates new branch from state s</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Checkout</ns0:name>
          <ns0:signature>checkout(H: History, t: Time) ‚Üí State</ns0:signature>
          <ns0:formal-definition format="latex">```
   checkout(H: History, t: Time) ‚Üí State
   = states[max{i : states[i].timestamp ‚â§ t}]</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Diff</ns0:name>
          <ns0:signature>diff(H: History, t‚ÇÅ: Time, t‚ÇÇ: Time) ‚Üí Delta</ns0:signature>
          <ns0:formal-definition format="latex">```
   diff(H: History, t‚ÇÅ: Time, t‚ÇÇ: Time) ‚Üí Delta
   = compute difference between states at t‚ÇÅ and t‚ÇÇ</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Revert</ns0:name>
          <ns0:signature>revert(H: History, t: Time) ‚Üí History</ns0:signature>
          <ns0:formal-definition format="latex">```
   revert(H: History, t: Time) ‚Üí History
   = H' where H'.states = H.states + [checkout(H, t)]</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Edit history</ns0:name>
          <ns0:description>Google Docs</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Git commits</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Feature sequence</ns0:name>
          <ns0:description>CAD timeline</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Proof versions</ns0:name>
          <ns0:description>Lean</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Database transaction log</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="F5" version="1.1">
      <ns0:metadata>
        <ns0:name>Collaborative Editing Flow</ns0:name>
        <ns0:category>flow</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$E = (U, D, O, T, M, \delta_{F5})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>T</ns0:name>
            <ns0:type>O \times O ‚Üí O</ns0:type>
            <ns0:notation>T</ns0:notation>
            <ns0:description>**transformation function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>M</ns0:name>
            <ns0:type>U ‚Üí Cursor</ns0:type>
            <ns0:notation>M</ns0:notation>
            <ns0:description>tracks **user presence**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties/>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Local Edit</ns0:name>
          <ns0:signature>edit(user: User, op: Operation) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   edit(user: User, op: Operation) ‚Üí Effect
   = D_user := apply(op, D_user)
     broadcast(op, user)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Receive Remote Edit</ns0:name>
          <ns0:signature>receive(op: Operation, u_remote: User) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   receive(op: Operation, u_remote: User) ‚Üí Effect
   = op' := transform(op, local_ops)
     D := apply(op', D)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Transform</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   T(op‚ÇÅ, op‚ÇÇ) = adjust op‚ÇÅ for effects of op‚ÇÇ
```
Concurrent inserts at same position:
  Use user ID as tiebreaker
Delete vs Modify:
  Delete wins</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Google Docs</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Figma multiplayer</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>VS Code Live Share</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Notion collaboration</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="F6" version="1.1">
      <ns0:metadata>
        <ns0:name>Error Recovery Flow</ns0:name>
        <ns0:category>flow</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$E = (detect, classify, strategy, recover)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>detect</ns0:name>
            <ns0:type>Operation ‚Üí Error | Success</ns0:type>
            <ns0:notation>detect</ns0:notation>
            <ns0:description>catches errors</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>classify</ns0:name>
            <ns0:type>Error ‚Üí ErrorType</ns0:type>
            <ns0:notation>classify</ns0:notation>
            <ns0:description>determines error category</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>strategy</ns0:name>
            <ns0:type>ErrorType ‚Üí RecoveryStrategy</ns0:type>
            <ns0:notation>strategy</ns0:notation>
            <ns0:description>selects recovery approach</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>recover</ns0:name>
            <ns0:type>(Error, RecoveryStrategy) ‚Üí Effect</ns0:type>
            <ns0:notation>recover</ns0:notation>
            <ns0:description>executes recovery</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>ErrorType</ns0:name>
          <ns0:definition format="latex">Transient | Permanent | Recoverable</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>RecoveryStrategy</ns0:name>
          <ns0:definition format="latex">Retry(max: ‚Ñï, backoff: Time ‚Üí Time) |</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Operation</ns0:name>
          <ns0:definition format="latex">() ‚Üí Result | Error</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.F6.1">
          <ns0:name>Error Classification</ns0:name>
          <ns0:formal-spec format="latex">‚àÄe ‚àà Error: classify(e) determines appropriate recovery strategy
Transient ‚Üí Retry
Permanent ‚Üí Report
Recoverable ‚Üí Fallback | GracefulDegradation</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.F6.2">
          <ns0:name>Recovery Exhaustion</ns0:name>
          <ns0:formal-spec format="latex">‚àÄrecovery_attempt: attempts ‚â§ max_attempts ‚à® escalate(error)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.F6.3">
          <ns0:name>State Safety</ns0:name>
          <ns0:formal-spec format="latex">‚àÄe ‚àà Error: recover(e) preserves system invariants
No partial state corruption</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Retry with Backoff</ns0:name>
          <ns0:signature>retry(operation: Operation, max_attempts: ‚Ñï) ‚Üí Result | Error</ns0:signature>
          <ns0:formal-definition format="latex">```
   retry(operation: Operation, max_attempts: ‚Ñï) ‚Üí Result | Error
   = attempts := 0
     while attempts &lt; max_attempts:
       try:
         return operation()
       catch error:
         if transient(error):
           wait(2^attempts ¬∑ base_delay)
           attempts := attempts + 1
         else:
           throw error
     throw MaxAttemptsExceeded</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Circuit Breaker</ns0:name>
          <ns0:signature>circuit_breaker(operation: Operation, threshold: ‚Ñï) ‚Üí Result | Error</ns0:signature>
          <ns0:formal-definition format="latex">```
   circuit_breaker(operation: Operation, threshold: ‚Ñï) ‚Üí Result | Error
   = state := Closed
     failures := 0
     execute():
       case state of
         Closed ‚Üí 
           try:
             result := operation()
             failures := 0
             return result
           catch error:
             failures := failures + 1
             if failures ‚â• threshold:
               state := Open
               schedule_half_open(timeout)
             throw error
         Open ‚Üí throw CircuitOpenError
         HalfOpen ‚Üí
           try:
             result := operation()
             state := Closed
             return result
           catch error:
             state := Open
             throw error</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Graceful Degradation</ns0:name>
          <ns0:signature>degrade(levels: Sequence‚ü®Mode‚ü©, operation: Mode ‚Üí Result) ‚Üí Result</ns0:signature>
          <ns0:formal-definition format="latex">```
   degrade(levels: Sequence‚ü®Mode‚ü©, operation: Mode ‚Üí Result) ‚Üí Result
   = for mode in levels:
       try:
         return operation(mode)
       catch error:
         continue
     throw AllModesFailedError</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Network request retry</ns0:name>
          <ns0:description>HTTP clients with backoff</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>File load fallback</ns0:name>
          <ns0:description>multiple locations/mirrors</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Service degradation</ns0:name>
          <ns0:description>cache ‚Üí static ‚Üí error</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Database connection pooling</ns0:name>
          <ns0:description>retry on transient failures</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>User retry prompts</ns0:name>
          <ns0:description>try again button</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P10" version="1.1">
      <ns0:metadata>
        <ns0:name>Parser/Compiler Pipeline</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$C = (stages, ir, errors, optimize)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>stages</ns0:name>
            <ns0:type>Sequence‚ü®Stage‚ü©</ns0:type>
            <ns0:notation>stages</ns0:notation>
            <ns0:description>transformation stages</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>ir</ns0:name>
            <ns0:type>Sequence‚ü®IR‚ü©</ns0:type>
            <ns0:notation>ir</ns0:notation>
            <ns0:description>intermediate representations</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>errors</ns0:name>
            <ns0:type>Sequence‚ü®Error‚ü©</ns0:type>
            <ns0:notation>errors</ns0:notation>
            <ns0:description>accumulate errors</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>optimize</ns0:name>
            <ns0:type>IR ‚Üí IR</ns0:type>
            <ns0:notation>optimize</ns0:notation>
            <ns0:description>optimization pass</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Stage</ns0:name>
          <ns0:definition format="latex">(name: String, transform: Input ‚Üí Output | Error)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>IR</ns0:name>
          <ns0:definition format="latex">intermediate representation (AST, bytecode, etc.)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P10.1">
          <ns0:name>Pipeline Flow</ns0:name>
          <ns0:formal-spec format="latex">source ‚Üí lex ‚Üí tokens ‚Üí parse ‚Üí AST ‚Üí analyze ‚Üí typed_AST ‚Üí
codegen ‚Üí target</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P10.2">
          <ns0:name>Error Propagation</ns0:name>
          <ns0:formal-spec format="latex">error in stage_i ‚áí abort or continue with partial result</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P10.3">
          <ns0:name>Symbol Table Maintenance</ns0:name>
          <ns0:formal-spec format="latex">‚àÄstage: symbol_table updated and passed forward</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Execute Pipeline</ns0:name>
          <ns0:signature>compile(source: String) ‚Üí Target | Error</ns0:signature>
          <ns0:formal-definition format="latex">```
   compile(source: String) ‚Üí Target | Error
   = result := source
     for stage in stages:
       result := stage.transform(result)
       if is_error(result):
         return result
     return result</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Add Stage</ns0:name>
          <ns0:signature>add_stage(stage: Stage, position: ‚Ñï) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   add_stage(stage: Stage, position: ‚Ñï) ‚Üí Effect
   = stages := insert(stages, stage, position)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Code compilers</ns0:name>
          <ns0:description>C++, Rust</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>LaTeX renderers</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Formula parsers</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Constraint compilers</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P11" version="1.1">
      <ns0:metadata>
        <ns0:name>Validator/Checker</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$V = (rules, input, report, severity)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>rules</ns0:name>
            <ns0:type>Set‚ü®Rule‚ü©</ns0:type>
            <ns0:notation>rules</ns0:notation>
            <ns0:description>validation rules</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>input</ns0:name>
            <ns0:type>Data</ns0:type>
            <ns0:notation>input</ns0:notation>
            <ns0:description>data to validate</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>report</ns0:name>
            <ns0:type>Sequence‚ü®Violation‚ü©</ns0:type>
            <ns0:notation>report</ns0:notation>
            <ns0:description>found violations</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>severity</ns0:name>
            <ns0:type>Rule ‚Üí Level</ns0:type>
            <ns0:notation>severity</ns0:notation>
            <ns0:description>assigns severity levels</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Rule</ns0:name>
          <ns0:definition format="latex">(name: String, check: Data ‚Üí Sequence‚ü®Violation‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Violation</ns0:name>
          <ns0:definition format="latex">(rule: Rule, location: Location, message: String)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Level</ns0:name>
          <ns0:definition format="latex">Error | Warning | Info</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P11.1">
          <ns0:name>Completeness</ns0:name>
          <ns0:formal-spec format="latex">All rules are checked for all applicable data</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P11.2">
          <ns0:name>Correctness</ns0:name>
          <ns0:formal-spec format="latex">report contains only actual violations (no false positives)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P11.3">
          <ns0:name>Actionability</ns0:name>
          <ns0:formal-spec format="latex">Each violation includes location and fix suggestion</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Validate</ns0:name>
          <ns0:signature>validate(data: Data) ‚Üí Report</ns0:signature>
          <ns0:formal-definition format="latex">```
   validate(data: Data) ‚Üí Report
   = violations := []
     for rule in rules:
       violations := violations ++ rule.check(data)
     return Report(violations, sort_by_severity)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Add Rule</ns0:name>
          <ns0:signature>add_rule(rule: Rule, level: Level) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   add_rule(rule: Rule, level: Level) ‚Üí Effect
   = rules := rules ‚à™ {rule}
     severity[rule] := level</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Proof checkers</ns0:name>
          <ns0:description>Lean, Coq</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Type checkers</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Constraint validators</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Linters</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P12" version="1.1">
      <ns0:metadata>
        <ns0:name>Solver/Optimizer</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (constraints, variables, objective, algorithm)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>constraints</ns0:name>
            <ns0:type>Set‚ü®Constraint‚ü©</ns0:type>
            <ns0:notation>constraints</ns0:notation>
            <ns0:description>problem constraints</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>variables</ns0:name>
            <ns0:type>Set‚ü®Variable‚ü©</ns0:type>
            <ns0:notation>variables</ns0:notation>
            <ns0:description>decision variables</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>objective</ns0:name>
            <ns0:type>Variables ‚Üí ‚Ñù</ns0:type>
            <ns0:notation>objective</ns0:notation>
            <ns0:description>optimization objective (optional)</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>algorithm</ns0:name>
            <ns0:type>Problem ‚Üí Solution | Infeasible</ns0:type>
            <ns0:notation>algorithm</ns0:notation>
            <ns0:description>solving algorithm</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Constraint</ns0:name>
          <ns0:definition format="latex">(type: ConstraintType, expr: Expression)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>ConstraintType</ns0:name>
          <ns0:definition format="latex">Equality | Inequality | Boundary</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Variable</ns0:name>
          <ns0:definition format="latex">(name: String, domain: Domain, value: Value | Unknown)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Domain</ns0:name>
          <ns0:definition format="latex">Continuous(min, max) | Discrete(values: Set‚ü®Value‚ü©)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P12.1">
          <ns0:name>Soundness</ns0:name>
          <ns0:formal-spec format="latex">solution satisfies all constraints ‚à® return infeasible</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P12.2">
          <ns0:name>Optimality</ns0:name>
          <ns0:formal-spec format="latex">If optimization: solution maximizes/minimizes objective (or is local optimum)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P12.3">
          <ns0:name>Completeness</ns0:name>
          <ns0:formal-spec format="latex">If solution exists, algorithm finds it (eventually)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Solve</ns0:name>
          <ns0:signature>solve(problem: Problem) ‚Üí Solution | Infeasible</ns0:signature>
          <ns0:formal-definition format="latex">```
   solve(problem: Problem) ‚Üí Solution | Infeasible
   = assignment := algorithm(constraints, variables, objective)
     if verify(assignment, constraints):
       return Solution(assignment)
     else:
       return Infeasible</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Add Constraint</ns0:name>
          <ns0:signature>add_constraint(c: Constraint) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   add_constraint(c: Constraint) ‚Üí Effect
   = constraints := constraints ‚à™ {c}
     invalidate_cache()
- SAT solvers (Boolean constraints)
- SMT solvers (theories)
- Linear programming (LP)
- Constraint propagation
- Backtracking search</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Constraint solvers</ns0:name>
          <ns0:description>CAD</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Parametric solvers</ns0:name>
          <ns0:description>engineering</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Theorem provers</ns0:name>
          <ns0:description>mathematics</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Layout engines</ns0:name>
          <ns0:description>CSS Grid</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P13" version="1.1">
      <ns0:metadata>
        <ns0:name>Indexer/Query Engine</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$I = (data, index, query\_processor, update)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>data</ns0:name>
            <ns0:type>Set‚ü®Item‚ü©</ns0:type>
            <ns0:notation>data</ns0:notation>
            <ns0:description>data being indexed</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>index</ns0:name>
            <ns0:type>Index</ns0:type>
            <ns0:notation>index</ns0:notation>
            <ns0:description>index structure (inverted index, B-tree, etc.)</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>query\_processor</ns0:name>
            <ns0:type>Query ‚Üí Sequence‚ü®Item‚ü©</ns0:type>
            <ns0:notation>query\_processor</ns0:notation>
            <ns0:description>executes queries</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>update</ns0:name>
            <ns0:type>Item ‚Üí Effect</ns0:type>
            <ns0:notation>update</ns0:notation>
            <ns0:description>maintains index consistency</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Index</ns0:name>
          <ns0:definition format="latex">InvertedIndex | BTree | HashMap | RTree | KDTree</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Query</ns0:name>
          <ns0:definition format="latex">(predicates: Sequence‚ü®Predicate‚ü©, order: Order, limit: ‚Ñï)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Predicate</ns0:name>
          <ns0:definition format="latex">(field: String, op: Operator, value: Value)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Operator</ns0:name>
          <ns0:definition format="latex">Eq | Lt | Gt | Contains | ...</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P13.1">
          <ns0:name>Index Consistency</ns0:name>
          <ns0:formal-spec format="latex">‚àÄitem ‚àà data: item in index
data changes ‚Üí index updated</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P13.2">
          <ns0:name>Query Performance</ns0:name>
          <ns0:formal-spec format="latex">query(index) ‚â™ query(data)  // Much faster than linear scan</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P13.3">
          <ns0:name>Space Trade-off</ns0:name>
          <ns0:formal-spec format="latex">space(index) = O(|data|)  // Linear space overhead</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Build Index</ns0:name>
          <ns0:signature>build_index(data: Set‚ü®Item‚ü©) ‚Üí Index</ns0:signature>
          <ns0:formal-definition format="latex">```
   build_index(data: Set‚ü®Item‚ü©) ‚Üí Index
   = index := empty_index()
     for item in data:
       for field in indexed_fields:
         value := extract(item, field)
         index[field][value] := index[field][value] ‚à™ {item}
     return index</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Query</ns0:name>
          <ns0:signature>query(q: Query) ‚Üí Sequence‚ü®Item‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   query(q: Query) ‚Üí Sequence‚ü®Item‚ü©
   = candidates := index_lookup(q.predicates[0])  // Use index for first predicate
     results := filter(candidates, q.predicates[1:])  // Filter rest
     results := sort(results, q.order)
     return take(results, q.limit)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Update Index</ns0:name>
          <ns0:signature>update_item(old: Item, new: Item) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   update_item(old: Item, new: Item) ‚Üí Effect
   = for field in indexed_fields:
       old_val := extract(old, field)
       new_val := extract(new, field)
       if old_val ‚â† new_val:
         index[field][old_val] := index[field][old_val] ‚àñ {old}
         index[field][new_val] := index[field][new_val] ‚à™ {new}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Inverted Index (Text)</ns0:name>
          <ns0:signature>token ‚Üí {documents containing token}</ns0:signature>
          <ns0:formal-definition format="latex">```
   token ‚Üí {documents containing token}
   Example: "hello" ‚Üí {doc1, doc5, doc8}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>B-Tree (Range Queries)</ns0:name>
          <ns0:signature>Sorted key ‚Üí value</ns0:signature>
          <ns0:formal-definition format="latex">```
   Sorted key ‚Üí value
   Efficient for range queries: find(x, y)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Spatial Index (Geometric)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   R-Tree or KD-Tree
   Efficient for spatial queries: near(point, radius)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Graph Index</ns0:name>
          <ns0:signature>node ‚Üí {adjacent nodes}</ns0:signature>
          <ns0:formal-definition format="latex">```
   node ‚Üí {adjacent nodes}
   Efficient for graph traversal</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Full-text search</ns0:name>
          <ns0:description>documents</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Graph indexes</ns0:name>
          <ns0:description>knowledge graphs</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Symbol tables</ns0:name>
          <ns0:description>code</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Spatial indexes</ns0:name>
          <ns0:description>GIS</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P14" version="1.1">
      <ns0:metadata>
        <ns0:name>Agent Swarm</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$A = (agents, tasks, coord, results)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>agents</ns0:name>
            <ns0:type>Set‚ü®Agent‚ü©</ns0:type>
            <ns0:notation>agents</ns0:notation>
            <ns0:description>autonomous workers</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>tasks</ns0:name>
            <ns0:type>Queue‚ü®Task‚ü©</ns0:type>
            <ns0:notation>tasks</ns0:notation>
            <ns0:description>pending tasks</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>coord</ns0:name>
            <ns0:type>Coordinator</ns0:type>
            <ns0:notation>coord</ns0:notation>
            <ns0:description>manages task distribution</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>results</ns0:name>
            <ns0:type>Map‚ü®Task, Result‚ü©</ns0:type>
            <ns0:notation>results</ns0:notation>
            <ns0:description>stores completed results</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Agent</ns0:name>
          <ns0:definition format="latex">(id: ID, status: Status, execute: Task ‚Üí Result)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Status</ns0:name>
          <ns0:definition format="latex">Idle | Busy(task: Task) | Failed(error: Error)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Task</ns0:name>
          <ns0:definition format="latex">(id: ID, work: Work, priority: ‚Ñï)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Coordinator</ns0:name>
          <ns0:definition format="latex">(assign: Agent √ó Task ‚Üí Effect, aggregate: () ‚Üí Result)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P14.1">
          <ns0:name>Agent Independence</ns0:name>
          <ns0:formal-spec format="latex">Agents execute tasks independently without coordination</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P14.2">
          <ns0:name>Eventual Completion</ns0:name>
          <ns0:formal-spec format="latex">‚àÄtask ‚àà tasks: ‚àÉagent, time: agent executes task at time</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P14.3">
          <ns0:name>Load Balancing</ns0:name>
          <ns0:formal-spec format="latex">tasks distributed evenly across idle agents</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Dispatch Task</ns0:name>
          <ns0:signature>dispatch(task: Task) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   dispatch(task: Task) ‚Üí Effect
   = tasks := enqueue(tasks, task, task.priority)
     if ‚àÉagent: agent.status = Idle:
       assign(agent, task)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Assign to Agent</ns0:name>
          <ns0:signature>assign(agent: Agent, task: Task) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   assign(agent: Agent, task: Task) ‚Üí Effect
   = agent.status := Busy(task)
     result := agent.execute(task)
     results[task] := result
     agent.status := Idle
     try_assign_next(agent)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Aggregate Results</ns0:name>
          <ns0:signature>aggregate() ‚Üí Result</ns0:signature>
          <ns0:formal-definition format="latex">```
   aggregate() ‚Üí Result
   = if ‚àÄtask ‚àà tasks: task ‚àà keys(results):
       coord.aggregate(results)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Work Stealing</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Idle agents take tasks from busy agents' queues
   Good load balancing</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Task Queue</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Central queue, agents pull tasks when idle
   Simple, fair</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Priority Queue</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   High-priority tasks executed first
   Supports urgency</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Multi-agent reasoning</ns0:name>
          <ns0:description>AI</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Parallel analysis</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Distributed builds</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Map-reduce</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P15" version="1.1">
      <ns0:metadata>
        <ns0:name>Reasoning Chain</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$R = (steps, state, deps, result)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>steps</ns0:name>
            <ns0:type>Sequence‚ü®Step‚ü©</ns0:type>
            <ns0:notation>steps</ns0:notation>
            <ns0:description>reasoning steps</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>state</ns0:name>
            <ns0:type>Map‚ü®‚Ñï, State‚ü©</ns0:type>
            <ns0:notation>state</ns0:notation>
            <ns0:description>tracks state at each step</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>deps</ns0:name>
            <ns0:type>Map‚ü®‚Ñï, Set‚ü®‚Ñï‚ü©‚ü©</ns0:type>
            <ns0:notation>deps</ns0:notation>
            <ns0:description>defines step dependencies</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>result</ns0:name>
            <ns0:type>Result</ns0:type>
            <ns0:notation>result</ns0:notation>
            <ns0:description>final conclusion</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Step</ns0:name>
          <ns0:definition format="latex">(id: ‚Ñï, operation: Operation, inputs: Set‚ü®‚Ñï‚ü©, output: Value)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Operation</ns0:name>
          <ns0:definition format="latex">Infer | Deduce | Calculate | Verify | ...</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>State</ns0:name>
          <ns0:definition format="latex">Map‚ü®String, Value‚ü©  // Variable bindings</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P15.1">
          <ns0:name>Sequential Dependency</ns0:name>
          <ns0:formal-spec format="latex">step_i depends on step_j ‚áí j &lt; i (executed before)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P15.2">
          <ns0:name>State Evolution</ns0:name>
          <ns0:formal-spec format="latex">state[i+1] = apply(step[i], state[i])</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P15.3">
          <ns0:name>Conclusion Derivation</ns0:name>
          <ns0:formal-spec format="latex">result derived from state[|steps|]</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Add Step</ns0:name>
          <ns0:signature>add_step(operation: Operation, inputs: Set‚ü®‚Ñï‚ü©) ‚Üí ‚Ñï</ns0:signature>
          <ns0:formal-definition format="latex">```
   add_step(operation: Operation, inputs: Set‚ü®‚Ñï‚ü©) ‚Üí ‚Ñï
   = step_id := |steps|
     step := Step(step_id, operation, inputs, unknown)
     steps := steps ++ [step]
     return step_id</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Execute Chain</ns0:name>
          <ns0:signature>execute() ‚Üí Result</ns0:signature>
          <ns0:formal-definition format="latex">```
   execute() ‚Üí Result
   = state[0] := initial_state
     for i in 0..|steps|:
       input_values := {state[j][steps[j].output] : j ‚àà steps[i].inputs}
       output := steps[i].operation(input_values)
       state[i+1] := state[i] ‚à™ {steps[i].output: output}
     return state[|steps|]</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>AI reasoning</ns0:name>
          <ns0:description>chain-of-thought</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Proof derivation</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Build pipelines</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Computation traces</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P16" version="1.1">
      <ns0:metadata>
        <ns0:name>Suggestion/Recommendation System</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (context, model, candidates, ranker)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>context</ns0:name>
            <ns0:type>Context</ns0:type>
            <ns0:notation>context</ns0:notation>
            <ns0:description>current state/situation</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>model</ns0:name>
            <ns0:type>Model</ns0:type>
            <ns0:notation>model</ns0:notation>
            <ns0:description>learned from history</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>candidates</ns0:name>
            <ns0:type>Context ‚Üí Set‚ü®Suggestion‚ü©</ns0:type>
            <ns0:notation>candidates</ns0:notation>
            <ns0:description>generates options</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>ranker</ns0:name>
            <ns0:type>Suggestion √ó Context ‚Üí ‚Ñù</ns0:type>
            <ns0:notation>ranker</ns0:notation>
            <ns0:description>scores relevance</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Suggestion</ns0:name>
          <ns0:definition format="latex">(content: Content, confidence: ‚Ñù, source: Source)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Context</ns0:name>
          <ns0:definition format="latex">(user: User, location: Location, history: History, ...)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Model</ns0:name>
          <ns0:definition format="latex">learned patterns and preferences</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P16.1">
          <ns0:name>Non-Blocking</ns0:name>
          <ns0:formal-spec format="latex">Suggestions appear asynchronously, don't block user input</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P16.2">
          <ns0:name>Accept/Reject</ns0:name>
          <ns0:formal-spec format="latex">User can accept, reject, or ignore suggestions</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P16.3">
          <ns0:name>Learning</ns0:name>
          <ns0:formal-spec format="latex">User actions ‚Üí update model ‚Üí improve future suggestions</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Generate Suggestions</ns0:name>
          <ns0:signature>suggest(context: Context) ‚Üí Sequence‚ü®Suggestion‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   suggest(context: Context) ‚Üí Sequence‚ü®Suggestion‚ü©
   = candidates := generate_candidates(context, model)
     scored := map(candidates, Œªs: (s, ranker(s, context)))
     sorted := sort(scored, by: score, desc)
     return take(sorted, 5)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Accept Suggestion</ns0:name>
          <ns0:signature>accept(suggestion: Suggestion) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   accept(suggestion: Suggestion) ‚Üí Effect
   = apply(suggestion.content)
     feedback(positive, suggestion)
     model := update(model, context, suggestion, accepted)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Reject Suggestion</ns0:name>
          <ns0:signature>reject(suggestion: Suggestion) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   reject(suggestion: Suggestion) ‚Üí Effect
   = dismiss(suggestion)
     feedback(negative, suggestion)
     model := update(model, context, suggestion, rejected)
```
score(suggestion, context) = 
  w‚ÇÅ¬∑relevance(suggestion, context)
  + w‚ÇÇ¬∑confidence(suggestion)
  + w‚ÇÉ¬∑frequency(suggestion, history)
  + w‚ÇÑ¬∑recency(suggestion)
  - w‚ÇÖ¬∑redundancy(suggestion, already_shown)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>AI code suggestions</ns0:name>
          <ns0:description>Copilot</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Autocomplete</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Code actions</ns0:name>
          <ns0:description>quick fixes</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Tactic hints</ns0:name>
          <ns0:description>Lean</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Search suggestions</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P17" version="1.1">
      <ns0:metadata>
        <ns0:name>Key-Value Store</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$K = (store, get, set, delete)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>store</ns0:name>
            <ns0:type>Map‚ü®Key, Value‚ü©</ns0:type>
            <ns0:notation>store</ns0:notation>
            <ns0:description>storage</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>get</ns0:name>
            <ns0:type>Key ‚Üí Value | null</ns0:type>
            <ns0:notation>get</ns0:notation>
            <ns0:description>retrieves values</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>set</ns0:name>
            <ns0:type>Key √ó Value ‚Üí Effect</ns0:type>
            <ns0:notation>set</ns0:notation>
            <ns0:description>stores values</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>delete</ns0:name>
            <ns0:type>Key ‚Üí Effect</ns0:type>
            <ns0:notation>delete</ns0:notation>
            <ns0:description>removes entries</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P17.1">
          <ns0:name>Fast Lookup</ns0:name>
          <ns0:formal-spec format="latex">get(key) completes in O(1) average time</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P17.2">
          <ns0:name>Atomic Operations</ns0:name>
          <ns0:formal-spec format="latex">set and delete are atomic</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Get</ns0:name>
          <ns0:signature>get(key: Key) ‚Üí Value | null</ns0:signature>
          <ns0:formal-definition format="latex">```
   get(key: Key) ‚Üí Value | null
   = store[key] if key ‚àà keys(store) else null</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Set</ns0:name>
          <ns0:signature>set(key: Key, value: Value) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   set(key: Key, value: Value) ‚Üí Effect
   = store[key] := value</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Delete</ns0:name>
          <ns0:signature>delete(key: Key) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   delete(key: Key) ‚Üí Effect
   = store := store ‚àñ {key}</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Cache</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Settings storage</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Session state</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Metadata store</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P18" version="1.1">
      <ns0:metadata>
        <ns0:name>Relational Database</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$R = (tables, schemas, constraints, indices)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>tables</ns0:name>
            <ns0:type>Map‚ü®String, Table‚ü©</ns0:type>
            <ns0:notation>tables</ns0:notation>
            <ns0:description>data tables</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>schemas</ns0:name>
            <ns0:type>Map‚ü®String, Schema‚ü©</ns0:type>
            <ns0:notation>schemas</ns0:notation>
            <ns0:description>define table structures</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>constraints</ns0:name>
            <ns0:type>Set‚ü®Constraint‚ü©</ns0:type>
            <ns0:notation>constraints</ns0:notation>
            <ns0:description>enforce integrity</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>indices</ns0:name>
            <ns0:type>Map‚ü®(Table, Column), Index‚ü©</ns0:type>
            <ns0:notation>indices</ns0:notation>
            <ns0:description>speed queries</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Table</ns0:name>
          <ns0:definition format="latex">Set‚ü®Row‚ü©</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Row</ns0:name>
          <ns0:definition format="latex">Map‚ü®String, Value‚ü©  // column ‚Üí value</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Schema</ns0:name>
          <ns0:definition format="latex">Sequence‚ü®(name: String, type: Type, constraints: Set‚ü®Constraint‚ü©)‚ü©</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Constraint</ns0:name>
          <ns0:definition format="latex">PrimaryKey | ForeignKey | Unique | NotNull | Check(predicate)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P18.1">
          <ns0:name>ACID</ns0:name>
          <ns0:formal-spec format="latex">Atomicity: Transactions complete fully or not at all
Consistency: Constraints always satisfied
Isolation: Concurrent transactions don't interfere
Durability: Committed changes persist</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P18.2">
          <ns0:name>Relational Algebra</ns0:name>
          <ns0:formal-spec format="latex">Queries expressed as: SELECT, PROJECT, JOIN, UNION, DIFFERENCE</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Insert</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   INSERT INTO table VALUES (...)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Select</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   SELECT columns FROM table WHERE predicate ORDER BY columns</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Join</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   SELECT * FROM table1 JOIN table2 ON table1.key = table2.foreign_key</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Content database</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>File metadata</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>User data</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Application state</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P19" version="1.1">
      <ns0:metadata>
        <ns0:name>Graph Database</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$G = (nodes, edges, props, traversal)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>nodes</ns0:name>
            <ns0:type>Set‚ü®Node‚ü©</ns0:type>
            <ns0:notation>nodes</ns0:notation>
            <ns0:description>entities</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>edges</ns0:name>
            <ns0:type>Set‚ü®Edge‚ü©</ns0:type>
            <ns0:notation>edges</ns0:notation>
            <ns0:description>relationships</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>props</ns0:name>
            <ns0:type>(Node | Edge) ‚Üí Map‚ü®String, Value‚ü©</ns0:type>
            <ns0:notation>props</ns0:notation>
            <ns0:description>properties</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>traversal</ns0:name>
            <ns0:type>Query ‚Üí Sequence‚ü®Path‚ü©</ns0:type>
            <ns0:notation>traversal</ns0:notation>
            <ns0:description>executes graph queries</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Node</ns0:name>
          <ns0:definition format="latex">(id: ID, labels: Set‚ü®String‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Edge</ns0:name>
          <ns0:definition format="latex">(id: ID, from: Node, to: Node, type: String)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Path</ns0:name>
          <ns0:definition format="latex">Sequence‚ü®(Node | Edge)‚ü©</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Query</ns0:name>
          <ns0:definition format="latex">pattern matching query (Cypher, SPARQL, etc.)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P19.1">
          <ns0:name>Efficient Traversal</ns0:name>
          <ns0:formal-spec format="latex">traverse(node, depth) in O(k¬∑d) where k = avg degree, d = depth</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P19.2">
          <ns0:name>Property Graph Model</ns0:name>
          <ns0:formal-spec format="latex">Both nodes and edges can have properties</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Match Pattern</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   MATCH (a:Person)-[:KNOWS]-&gt;(b:Person) WHERE a.name = "Alice"
   RETURN b</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Shortest Path</ns0:name>
          <ns0:signature>shortest_path(node1, node2) ‚Üí Path | null</ns0:signature>
          <ns0:formal-definition format="latex">```
   shortest_path(node1, node2) ‚Üí Path | null</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Knowledge graphs</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Dependency graphs</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Citation networks</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Social networks</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P1" version="1.1">
      <ns0:metadata>
        <ns0:name>Direct Manipulation Canvas</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$C = (viewport, objects, cursor, tools, state)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>viewport</ns0:name>
            <ns0:type>Rectangle</ns0:type>
            <ns0:notation>viewport</ns0:notation>
            <ns0:description>visible area</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>objects</ns0:name>
            <ns0:type>Set‚ü®Element‚ü©</ns0:type>
            <ns0:notation>objects</ns0:notation>
            <ns0:description>manipulable objects</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>cursor</ns0:name>
            <ns0:type>Point</ns0:type>
            <ns0:notation>cursor</ns0:notation>
            <ns0:description>current cursor position</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>tools</ns0:name>
            <ns0:type>Set‚ü®Tool‚ü©</ns0:type>
            <ns0:notation>tools</ns0:notation>
            <ns0:description>available interaction tools</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>state</ns0:name>
            <ns0:type>œÉ_1 ‚àà \{\text{idle}, \text{dragging},</ns0:type>
            <ns0:notation>state</ns0:notation>
            <ns0:description>\text{selecting}\}$</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P1.1">
          <ns0:name>WYSIWYG</ns0:name>
          <ns0:formal-spec format="latex">‚àÄo ‚àà objects: visual(o) = semantic(o)
Changes to visual representation directly modify semantic content.</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P1.2">
          <ns0:name>Direct Feedback</ns0:name>
          <ns0:formal-spec format="latex">gesture(t) ‚Üí update_visual(t + Œµ) where Œµ &lt; 16ms (60fps)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P1.3">
          <ns0:name>Object Selection</ns0:name>
          <ns0:formal-spec format="latex">click(p) ‚Üí select({o ‚àà objects : p ‚àà bounds(o)})</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Interpret Gesture</ns0:name>
          <ns0:signature>interpret(gesture: Gesture) ‚Üí Action</ns0:signature>
          <ns0:formal-definition format="latex">```
   interpret(gesture: Gesture) ‚Üí Action
   = case gesture of
       Click(p) ‚Üí Select(objectAt(p))
       Drag(p‚ÇÅ, p‚ÇÇ) ‚Üí Move(selected, p‚ÇÇ - p‚ÇÅ)
       Scroll(Œî) ‚Üí Pan(viewport, Œî)
2. **Update Visual:
```
   update(objects: Set‚ü®Element‚ü©) ‚Üí Effect
   = render(objects) ; invalidate(viewport)
3. Persist Changes:**
```
   persist(objects: Set‚ü®Element‚ü©) ‚Üí Effect
   = save_to_storage(objects) ; notify_observers(objects)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Graph editor</ns0:name>
          <ns0:description>knowledge graphs</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>3D viewport</ns0:name>
          <ns0:description>CAD</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Drawing canvas</ns0:name>
          <ns0:description>vector graphics</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Visual editor</ns0:name>
          <ns0:description>page builders</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Diagram editors</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P20" version="1.1">
      <ns0:metadata>
        <ns0:name>Document Store</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$D = (collections, documents, queries, indices)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>collections</ns0:name>
            <ns0:type>Map‚ü®String, Set‚ü®Document‚ü©‚ü©</ns0:type>
            <ns0:notation>collections</ns0:notation>
            <ns0:description>group documents</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>documents</ns0:name>
            <ns0:type>Set‚ü®Document‚ü©</ns0:type>
            <ns0:notation>documents</ns0:notation>
            <ns0:description>schema-free documents</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>queries</ns0:name>
            <ns0:type>Query ‚Üí Set‚ü®Document‚ü©</ns0:type>
            <ns0:notation>queries</ns0:notation>
            <ns0:description>find documents</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>indices</ns0:name>
            <ns0:type>Map‚ü®Path, Index‚ü©</ns0:type>
            <ns0:notation>indices</ns0:notation>
            <ns0:description>speed queries</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Document</ns0:name>
          <ns0:definition format="latex">Map‚ü®String, Value‚ü©  // JSON-like structure</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Value</ns0:name>
          <ns0:definition format="latex">String | ‚Ñï | ‚Ñù | ùîπ | null | Sequence‚ü®Value‚ü© | Map‚ü®String,Value‚ü©</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Query</ns0:name>
          <ns0:definition format="latex">(filters: Map‚ü®Path, Predicate‚ü©, projection: Set‚ü®Path‚ü©)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P20.1">
          <ns0:name>Schema-Free</ns0:name>
          <ns0:formal-spec format="latex">Documents in same collection can have different structures</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P20.2">
          <ns0:name>Nested Data</ns0:name>
          <ns0:formal-spec format="latex">Documents can contain nested objects and arrays</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Find</ns0:name>
          <ns0:signature>find({age: {$gt: 25}, city: "NYC"}) ‚Üí Set‚ü®Document‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   find({age: {$gt: 25}, city: "NYC"}) ‚Üí Set‚ü®Document‚ü©</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Insert</ns0:name>
          <ns0:signature>insert(collection, document) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   insert(collection, document) ‚Üí Effect</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Update</ns0:name>
          <ns0:signature>update(query, changes) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   update(query, changes) ‚Üí Effect</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Note storage</ns0:name>
          <ns0:description>Notion, Roam</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Configuration</ns0:name>
          <ns0:description>JSON files</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Log aggregation</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>CMS content</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P21" version="1.1">
      <ns0:metadata>
        <ns0:name>Time-Series Store</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$T = (series, timestamps, values, aggregations)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>series</ns0:name>
            <ns0:type>Map‚ü®String, TimeSeries‚ü©</ns0:type>
            <ns0:notation>series</ns0:notation>
            <ns0:description>named series</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>timestamps</ns0:name>
            <ns0:type>Sequence‚ü®Time‚ü©</ns0:type>
            <ns0:notation>timestamps</ns0:notation>
            <ns0:description>ordered timestamps</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>values</ns0:name>
            <ns0:type>Map‚ü®Time, Value‚ü©</ns0:type>
            <ns0:notation>values</ns0:notation>
            <ns0:description>data points</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>aggregations</ns0:name>
            <ns0:type>(Time, Time, Func) ‚Üí Value</ns0:type>
            <ns0:notation>aggregations</ns0:notation>
            <ns0:description>compute aggregates</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>TimeSeries</ns0:name>
          <ns0:definition format="latex">Sequence‚ü®(timestamp: Time, value: Value)‚ü©</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Aggregation</ns0:name>
          <ns0:definition format="latex">Sum | Avg | Min | Max | Count | ...</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P21.1">
          <ns0:name>Temporal Ordering</ns0:name>
          <ns0:formal-spec format="latex">timestamps are sorted: t·µ¢ &lt; t·µ¢‚Çä‚ÇÅ</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P21.2">
          <ns0:name>Efficient Range Queries</ns0:name>
          <ns0:formal-spec format="latex">range(t1, t2) uses binary search: O(log n + k) where k = result size</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Range Query</ns0:name>
          <ns0:signature>range(t1: Time, t2: Time) ‚Üí TimeSeries</ns0:signature>
          <ns0:formal-definition format="latex">```
   range(t1: Time, t2: Time) ‚Üí TimeSeries
   = {(t, v) ‚àà series : t1 ‚â§ t ‚â§ t2}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Aggregate</ns0:name>
          <ns0:signature>aggregate(t1: Time, t2: Time, window: Duration, func: Aggregation) ‚Üí TimeSeries</ns0:signature>
          <ns0:formal-definition format="latex">```
   aggregate(t1: Time, t2: Time, window: Duration, func: Aggregation) ‚Üí TimeSeries
   = group points in windows, apply func to each window</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Edit history</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Telemetry</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Sensor data</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>User activity log</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Stock prices</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P22" version="1.1">
      <ns0:metadata>
        <ns0:name>Event Bus</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$B = (publishers, subscribers, topics, broker)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>publishers</ns0:name>
            <ns0:type>Set‚ü®Publisher‚ü©</ns0:type>
            <ns0:notation>publishers</ns0:notation>
            <ns0:description>emit events</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>subscribers</ns0:name>
            <ns0:type>Map‚ü®Topic, Set‚ü®Subscriber‚ü©‚ü©</ns0:type>
            <ns0:notation>subscribers</ns0:notation>
            <ns0:description>listen for events</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>topics</ns0:name>
            <ns0:type>Set‚ü®Topic‚ü©</ns0:type>
            <ns0:notation>topics</ns0:notation>
            <ns0:description>event channels</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>broker</ns0:name>
            <ns0:type>(Topic, Event) ‚Üí Effect</ns0:type>
            <ns0:notation>broker</ns0:notation>
            <ns0:description>routes events</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Publisher</ns0:name>
          <ns0:definition format="latex">(id: ID, publish: (Topic, Event) ‚Üí Effect)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Subscriber</ns0:name>
          <ns0:definition format="latex">(id: ID, handle: Event ‚Üí Effect)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Topic</ns0:name>
          <ns0:definition format="latex">String</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Event</ns0:name>
          <ns0:definition format="latex">(type: String, payload: Map‚ü®String, Value‚ü©, timestamp: Time)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P22.1">
          <ns0:name>Decoupling</ns0:name>
          <ns0:formal-spec format="latex">Publishers don't know subscribers
Subscribers don't know publishers</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P22.2">
          <ns0:name>Many-to-Many</ns0:name>
          <ns0:formal-spec format="latex">One event ‚Üí multiple subscribers
One subscriber ‚Üí multiple topics</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P22.3">
          <ns0:name>Async Delivery</ns0:name>
          <ns0:formal-spec format="latex">publish(event) returns immediately
Delivery happens asynchronously</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Subscribe</ns0:name>
          <ns0:signature>subscribe(topic: Topic, subscriber: Subscriber) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   subscribe(topic: Topic, subscriber: Subscriber) ‚Üí Effect
   = subscribers[topic] := subscribers[topic] ‚à™ {subscriber}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Publish</ns0:name>
          <ns0:signature>publish(topic: Topic, event: Event) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   publish(topic: Topic, event: Event) ‚Üí Effect
   = for subscriber in subscribers[topic]:
       async_invoke(subscriber.handle, event)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Unsubscribe</ns0:name>
          <ns0:signature>unsubscribe(topic: Topic, subscriber: Subscriber) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   unsubscribe(topic: Topic, subscriber: Subscriber) ‚Üí Effect
   = subscribers[topic] := subscribers[topic] ‚àñ {subscriber}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>At-Most-Once</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Fire and forget
   Fast but may lose events</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>At-Least-Once</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Retry until acknowledged
   May duplicate events</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Exactly-Once</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Deduplication + acknowledgment
   Expensive but reliable</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>UI event system</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Component communication</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Plugin events</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Message queues</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P23" version="1.1">
      <ns0:metadata>
        <ns0:name>Real-Time Sync</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (local, remote, diff, merge, conflicts)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>local</ns0:name>
            <ns0:type>State</ns0:type>
            <ns0:notation>local</ns0:notation>
            <ns0:description>local state</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>remote</ns0:name>
            <ns0:type>State</ns0:type>
            <ns0:notation>remote</ns0:notation>
            <ns0:description>remote state</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>diff</ns0:name>
            <ns0:type>State √ó State ‚Üí Delta</ns0:type>
            <ns0:notation>diff</ns0:notation>
            <ns0:description>computes differences</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>merge</ns0:name>
            <ns0:type>State √ó Delta ‚Üí State</ns0:type>
            <ns0:notation>merge</ns0:notation>
            <ns0:description>applies changes</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>conflicts</ns0:name>
            <ns0:type>Sequence‚ü®Conflict‚ü©</ns0:type>
            <ns0:notation>conflicts</ns0:notation>
            <ns0:description>tracks unresolved conflicts</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>State</ns0:name>
          <ns0:definition format="latex">Map‚ü®Path, Value‚ü©  // Complete state snapshot</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Delta</ns0:name>
          <ns0:definition format="latex">Sequence‚ü®Change‚ü©  // Incremental changes</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Conflict</ns0:name>
          <ns0:definition format="latex">(path: Path, local_value: Value, remote_value: Value)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P23.1">
          <ns0:name>Eventual Consistency</ns0:name>
          <ns0:formal-spec format="latex">After quiescence: local = remote</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P23.2">
          <ns0:name>Conflict Resolution</ns0:name>
          <ns0:formal-spec format="latex">Concurrent changes ‚Üí detect conflicts ‚Üí resolve</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P23.3">
          <ns0:name>Efficient Sync</ns0:name>
          <ns0:formal-spec format="latex">Only send deltas, not full state</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Compute Delta</ns0:name>
          <ns0:signature>diff(old: State, new: State) ‚Üí Delta</ns0:signature>
          <ns0:formal-definition format="latex">```
   diff(old: State, new: State) ‚Üí Delta
   = changes := []
     for path in keys(old) ‚à™ keys(new):
       if old[path] ‚â† new[path]:
         changes := changes ++ [Change(path, old[path], new[path])]
     return changes</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Apply Delta</ns0:name>
          <ns0:signature>merge(state: State, delta: Delta) ‚Üí State</ns0:signature>
          <ns0:formal-definition format="latex">```
   merge(state: State, delta: Delta) ‚Üí State
   = for change in delta:
       if ¬¨conflict(change, state):
         state[change.path] := change.new_value
       else:
         conflicts := conflicts ++ [Conflict(change.path, state[change.path], change.new_value)]
     return state</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Resolve Conflict</ns0:name>
          <ns0:signature>resolve(conflict: Conflict, strategy: Strategy) ‚Üí Value</ns0:signature>
          <ns0:formal-definition format="latex">```
   resolve(conflict: Conflict, strategy: Strategy) ‚Üí Value
   = case strategy of
       LastWriteWins ‚Üí newer(conflict.local_value, conflict.remote_value)
       ManualResolve ‚Üí prompt_user(conflict)
       MergeValues ‚Üí merge_function(conflict.local_value, conflict.remote_value)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Polling</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Every œÑ seconds: fetch remote, diff, merge
   Simple but wasteful</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>WebSocket</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Persistent connection, push updates
   Real-time, efficient</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Operational Transformation</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Transform operations to account for concurrent edits
   Complex but powerful</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Collaborative editing</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Live preview</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Cloud sync</ns0:name>
          <ns0:description>Dropbox</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Multi-device sync</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P24" version="1.1">
      <ns0:metadata>
        <ns0:name>Request-Response API</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$A = (endpoints, handlers, middleware, responses)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>endpoints</ns0:name>
            <ns0:type>Set‚ü®Endpoint‚ü©</ns0:type>
            <ns0:notation>endpoints</ns0:notation>
            <ns0:description>API routes</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>handlers</ns0:name>
            <ns0:type>Map‚ü®Endpoint, Handler‚ü©</ns0:type>
            <ns0:notation>handlers</ns0:notation>
            <ns0:description>process requests</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>middleware</ns0:name>
            <ns0:type>Sequence‚ü®Middleware‚ü©</ns0:type>
            <ns0:notation>middleware</ns0:notation>
            <ns0:description>request interceptors</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>responses</ns0:name>
            <ns0:type>Request ‚Üí Response</ns0:type>
            <ns0:notation>responses</ns0:notation>
            <ns0:description>generates responses</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Endpoint</ns0:name>
          <ns0:definition format="latex">(method: Method, path: Path)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Method</ns0:name>
          <ns0:definition format="latex">GET | POST | PUT | DELETE | PATCH</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Handler</ns0:name>
          <ns0:definition format="latex">Request ‚Üí Response</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Middleware</ns0:name>
          <ns0:definition format="latex">(Request, Next) ‚Üí Response</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Request</ns0:name>
          <ns0:definition format="latex">(method: Method, path: Path, headers: Map, body: Value)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Response</ns0:name>
          <ns0:definition format="latex">(status: ‚Ñï, headers: Map, body: Value)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P24.1">
          <ns0:name>Stateless</ns0:name>
          <ns0:formal-spec format="latex">Each request independent
No server-side session required (often)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P24.2">
          <ns0:name>Idempotency</ns0:name>
          <ns0:formal-spec format="latex">GET, PUT, DELETE are idempotent
Multiple identical requests = same result as single request</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P24.3">
          <ns0:name>Status Codes</ns0:name>
          <ns0:formal-spec format="latex">2xx: Success
3xx: Redirection
4xx: Client error
5xx: Server error</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Handle Request</ns0:name>
          <ns0:signature>handle(request: Request) ‚Üí Response</ns0:signature>
          <ns0:formal-definition format="latex">```
   handle(request: Request) ‚Üí Response
   = for mw in middleware:
       request := mw(request, next)
     handler := handlers[request.endpoint]
     return handler(request)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Register Endpoint</ns0:name>
          <ns0:signature>register(endpoint: Endpoint, handler: Handler) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   register(endpoint: Endpoint, handler: Handler) ‚Üí Effect
   = handlers[endpoint] := handler</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Add Middleware</ns0:name>
          <ns0:signature>add_middleware(mw: Middleware) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   add_middleware(mw: Middleware) ‚Üí Effect
   = middleware := middleware ++ [mw]
```
- Authentication: Verify credentials
- Logging: Log request/response
- Rate limiting: Throttle requests
- CORS: Handle cross-origin requests
- Compression: Gzip responses</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>REST API</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>RPC</ns0:name>
          <ns0:description>gRPC</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>GraphQL</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Internal service APIs</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P25" version="1.1">
      <ns0:metadata>
        <ns0:name>Streaming Protocol</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (producer, consumer, buffer, backpressure, state)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>producer</ns0:name>
            <ns0:type>Producer</ns0:type>
            <ns0:notation>producer</ns0:notation>
            <ns0:description>generates data</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>consumer</ns0:name>
            <ns0:type>Consumer</ns0:type>
            <ns0:notation>consumer</ns0:notation>
            <ns0:description>processes data</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>buffer</ns0:name>
            <ns0:type>Queue‚ü®Chunk‚ü©</ns0:type>
            <ns0:notation>buffer</ns0:notation>
            <ns0:description>buffers data</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>backpressure</ns0:name>
            <ns0:type>Signal</ns0:type>
            <ns0:notation>backpressure</ns0:notation>
            <ns0:description>controls flow rate</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>state</ns0:name>
            <ns0:type>\{\text{flowing}, \text{paused}, \text{ended}, \text{error}\}</ns0:type>
            <ns0:notation>state</ns0:notation>
            <ns0:description>stream state</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Producer</ns0:name>
          <ns0:definition format="latex">(generate: () ‚Üí Chunk | EndOfStream, pause: () ‚Üí Effect, resume: () ‚Üí Effect)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Consumer</ns0:name>
          <ns0:definition format="latex">(consume: Chunk ‚Üí Effect)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Chunk</ns0:name>
          <ns0:definition format="latex">Sequence‚ü®Byte‚ü© | Value</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P25.1">
          <ns0:name>Flow Control</ns0:name>
          <ns0:formal-spec format="latex">buffer full ‚Üí pause producer ‚Üí wait ‚Üí resume producer</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P25.2">
          <ns0:name>Chunk Ordering</ns0:name>
          <ns0:formal-spec format="latex">Chunks consumed in order produced</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P25.3">
          <ns0:name>Graceful Termination</ns0:name>
          <ns0:formal-spec format="latex">Producer sends EndOfStream ‚Üí consumer processes remaining chunks ‚Üí close</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Produce</ns0:name>
          <ns0:signature>produce() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   produce() ‚Üí Effect
   = while state = flowing:
       chunk := producer.generate()
       if chunk = EndOfStream:
         state := ended
         consumer.close()
       else:
         buffer := enqueue(buffer, chunk)
         if buffer.size ‚â• highWaterMark:
           state := paused
           producer.pause()</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Consume</ns0:name>
          <ns0:signature>consume() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   consume() ‚Üí Effect
   = while ¬¨empty(buffer):
       chunk := dequeue(buffer)
       consumer.consume(chunk)
       if buffer.size &lt; lowWaterMark ‚àß state = paused:
         state := flowing
         producer.resume()</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Readable Stream</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Data source (file, network)
   Can only read from</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Writable Stream</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Data sink (file, response)
   Can only write to</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Transform Stream</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Readable + Writable
   Transforms data in flight
   Example: compression, encryption</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Duplex Stream</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Independent readable and writable
   Example: WebSocket</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>WebSocket</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Live updates</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Progressive rendering</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>File uploads/downloads</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Video streaming</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P26" version="1.1">
      <ns0:metadata>
        <ns0:name>Status Bar/Indicator</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (indicators, messages, progress, position)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>indicators</ns0:name>
            <ns0:type>Map‚ü®String, Indicator‚ü©</ns0:type>
            <ns0:notation>indicators</ns0:notation>
            <ns0:description>status widgets</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>messages</ns0:name>
            <ns0:type>Queue‚ü®Message‚ü©</ns0:type>
            <ns0:notation>messages</ns0:notation>
            <ns0:description>temporary messages</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>progress</ns0:name>
            <ns0:type>Sequence‚ü®ProgressBar‚ü©</ns0:type>
            <ns0:notation>progress</ns0:notation>
            <ns0:description>show ongoing tasks</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>position</ns0:name>
            <ns0:type>\{\text{top}, \text{bottom}, \text{left}, \text{right}\}</ns0:type>
            <ns0:notation>position</ns0:notation>
            <ns0:description>location</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Indicator</ns0:name>
          <ns0:definition format="latex">(icon: Icon, text: String, status: Status, tooltip: String)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Status</ns0:name>
          <ns0:definition format="latex">Idle | Active | Success | Warning | Error</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Message</ns0:name>
          <ns0:definition format="latex">(text: String, level: Level, timestamp: Time)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Level</ns0:name>
          <ns0:definition format="latex">Info | Warning | Error</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>ProgressBar</ns0:name>
          <ns0:definition format="latex">(label: String, current: ‚Ñï, total: ‚Ñï)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P26.1">
          <ns0:name>Always Visible</ns0:name>
          <ns0:formal-spec format="latex">Status bar persistently visible</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P26.2">
          <ns0:name>Non-Intrusive</ns0:name>
          <ns0:formal-spec format="latex">Doesn't block interaction with main content</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P26.3">
          <ns0:name>Contextual Information</ns0:name>
          <ns0:formal-spec format="latex">Shows relevant info for current state/selection</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Add Indicator</ns0:name>
          <ns0:signature>add_indicator(id: String, indicator: Indicator) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   add_indicator(id: String, indicator: Indicator) ‚Üí Effect
   = indicators[id] := indicator
     render(status_bar)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Show Message</ns0:name>
          <ns0:signature>show_message(text: String, level: Level) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   show_message(text: String, level: Level) ‚Üí Effect
   = messages := enqueue(messages, Message(text, level, now()))
     schedule(clear_message, 3000)  // Clear after 3s</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Update Progress</ns0:name>
          <ns0:signature>update_progress(id: String, current: ‚Ñï, total: ‚Ñï) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   update_progress(id: String, current: ‚Ñï, total: ‚Ñï) ‚Üí Effect
   = progress[id].current := current
     progress[id].total := total
     render(progress_bar)
```
- Connection status: "üü¢ Online" / "üî¥ Offline"
- Sync status: "‚úì Synced" / "‚è± Syncing..."
- Agent status: "ü§ñ AI: Ready" / "ü§ñ AI: Thinking..."
- Selection info: "3 items selected"
- Cursor position: "Ln 42, Col 18"</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>IDE status bar</ns0:name>
          <ns0:description>VS Code</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Browser status bar</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Activity indicator</ns0:name>
          <ns0:description>apps</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Connection status</ns0:name>
          <ns0:description>networks</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P27" version="1.1">
      <ns0:metadata>
        <ns0:name>Toast/Notification</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$T = (message, duration, dismiss, stack, position)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>message</ns0:name>
            <ns0:type>String</ns0:type>
            <ns0:notation>message</ns0:notation>
            <ns0:description>notification text</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>duration</ns0:name>
            <ns0:type>Duration</ns0:type>
            <ns0:notation>duration</ns0:notation>
            <ns0:description>auto-dismiss time</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>dismiss</ns0:name>
            <ns0:type>() ‚Üí Effect</ns0:type>
            <ns0:notation>dismiss</ns0:notation>
            <ns0:description>manually dismisses</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>stack</ns0:name>
            <ns0:type>Sequence‚ü®Toast‚ü©</ns0:type>
            <ns0:notation>stack</ns0:notation>
            <ns0:description>manages multiple toasts</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>position</ns0:name>
            <ns0:type>Position</ns0:type>
            <ns0:notation>position</ns0:notation>
            <ns0:description>determines screen location</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Duration</ns0:name>
          <ns0:definition format="latex">‚Ñï | Infinity  // milliseconds or persistent</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Position</ns0:name>
          <ns0:definition format="latex">TopLeft | TopCenter | TopRight | BottomLeft | BottomCenter | BottomRight</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P27.1">
          <ns0:name>Time-Limited</ns0:name>
          <ns0:formal-spec format="latex">toast appears ‚Üí auto-dismiss after duration (unless duration = ‚àû)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P27.2">
          <ns0:name>Stackable</ns0:name>
          <ns0:formal-spec format="latex">Multiple toasts stack vertically
New toasts push old toasts</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P27.3">
          <ns0:name>Non-Modal</ns0:name>
          <ns0:formal-spec format="latex">User can interact with app while toast visible</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Show Toast</ns0:name>
          <ns0:signature>show(message: String, level: Level, duration: Duration) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   show(message: String, level: Level, duration: Duration) ‚Üí Effect
   = toast := Toast(message, level, duration, now())
     stack := stack ++ [toast]
     render(stack)
     if duration ‚â† ‚àû:
       schedule(dismiss(toast), duration)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Dismiss</ns0:name>
          <ns0:signature>dismiss(toast: Toast) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   dismiss(toast: Toast) ‚Üí Effect
   = stack := stack ‚àñ {toast}
     animate_out(toast)
     render(stack)
```
Info:    Neutral message (blue)
Success: Operation succeeded (green)
Warning: Caution needed (yellow)
Error:   Operation failed (red)
```
Info:    3-5 seconds
Success: 2-3 seconds
Warning: 5-7 seconds
Error:   7-10 seconds or manual dismiss</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Success messages</ns0:name>
          <ns0:description>"‚úì Saved"</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Error alerts</ns0:name>
          <ns0:description>"‚ùå Failed to save"</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Info notifications</ns0:name>
          <ns0:description>"File exported"</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Action confirmations</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P28" version="1.1">
      <ns0:metadata>
        <ns0:name>Progress Indicator</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$P = (current, total, label, eta, state)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>current</ns0:name>
            <ns0:type>‚Ñï</ns0:type>
            <ns0:notation>current</ns0:notation>
            <ns0:description>completed work</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>total</ns0:name>
            <ns0:type>‚Ñï</ns0:type>
            <ns0:notation>total</ns0:notation>
            <ns0:description>total work</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>label</ns0:name>
            <ns0:type>String</ns0:type>
            <ns0:notation>label</ns0:notation>
            <ns0:description>describes the task</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>eta</ns0:name>
            <ns0:type>Time</ns0:type>
            <ns0:notation>eta</ns0:notation>
            <ns0:description>estimated completion time</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>state</ns0:name>
            <ns0:type>\{\text{running}, \text{paused}, \text{complete}, \text{error}\}</ns0:type>
            <ns0:notation>state</ns0:notation>
            <ns0:description>status</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P28.1">
          <ns0:name>Monotonic Progress</ns0:name>
          <ns0:formal-spec format="latex">current only increases: current‚Çú‚Çä‚ÇÅ ‚â• current‚Çú</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations/>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>File upload/download</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Build progress</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Test execution</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Verification progress</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Installation progress</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P29" version="1.1">
      <ns0:metadata>
        <ns0:name>Centralized State Store</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (store, reducers, selectors, subscriptions)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>store</ns0:name>
            <ns0:type>State</ns0:type>
            <ns0:notation>store</ns0:notation>
            <ns0:description>application state (single source of truth)</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>reducers</ns0:name>
            <ns0:type>Map‚ü®Action, Reducer‚ü©</ns0:type>
            <ns0:notation>reducers</ns0:notation>
            <ns0:description>update state</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>selectors</ns0:name>
            <ns0:type>Map‚ü®String, Selector‚ü©</ns0:type>
            <ns0:notation>selectors</ns0:notation>
            <ns0:description>query state</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>subscriptions</ns0:name>
            <ns0:type>Set‚ü®Subscriber‚ü©</ns0:type>
            <ns0:notation>subscriptions</ns0:notation>
            <ns0:description>listen for changes</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>State</ns0:name>
          <ns0:definition format="latex">Map‚ü®String, Value‚ü©</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Action</ns0:name>
          <ns0:definition format="latex">(type: String, payload: Value)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Reducer</ns0:name>
          <ns0:definition format="latex">(State, Action) ‚Üí State</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Selector</ns0:name>
          <ns0:definition format="latex">State ‚Üí Value</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Subscriber</ns0:name>
          <ns0:definition format="latex">State ‚Üí Effect</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P29.1">
          <ns0:name>Single Source of Truth</ns0:name>
          <ns0:formal-spec format="latex">‚àÉ! store: all application state in store</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P29.2">
          <ns0:name>Immutable Updates</ns0:name>
          <ns0:formal-spec format="latex">reducer(state, action) returns new state, doesn't mutate old state</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P29.3">
          <ns0:name>Unidirectional Flow</ns0:name>
          <ns0:formal-spec format="latex">action ‚Üí reducer ‚Üí new_state ‚Üí notify_subscribers</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Dispatch Action</ns0:name>
          <ns0:signature>dispatch(action: Action) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   dispatch(action: Action) ‚Üí Effect
   = reducer := reducers[action.type]
     new_state := reducer(store, action)
     store := new_state
     notify_all_subscribers(store)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Subscribe</ns0:name>
          <ns0:signature>subscribe(subscriber: Subscriber) ‚Üí UnsubscribeFunc</ns0:signature>
          <ns0:formal-definition format="latex">```
   subscribe(subscriber: Subscriber) ‚Üí UnsubscribeFunc
   = subscriptions := subscriptions ‚à™ {subscriber}
     return Œª: subscriptions := subscriptions ‚àñ {subscriber}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Select</ns0:name>
          <ns0:signature>select(selector_name: String) ‚Üí Value</ns0:signature>
          <ns0:formal-definition format="latex">```
   select(selector_name: String) ‚Üí Value
   = selector := selectors[selector_name]
     return selector(store)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Redux</ns0:name>
          <ns0:description>JavaScript</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Vuex</ns0:name>
          <ns0:description>Vue.js</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Global state</ns0:name>
          <ns0:description>any framework</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Application model</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P2" version="1.1">
      <ns0:metadata>
        <ns0:name>Command Interface</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$I = (input, parser, executor, history)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>input</ns0:name>
            <ns0:type>String</ns0:type>
            <ns0:notation>input</ns0:notation>
            <ns0:description>command text</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>parser</ns0:name>
            <ns0:type>String ‚Üí Command | ParseError</ns0:type>
            <ns0:notation>parser</ns0:notation>
            <ns0:description>parses input</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>executor</ns0:name>
            <ns0:type>Command ‚Üí Result</ns0:type>
            <ns0:notation>executor</ns0:notation>
            <ns0:description>executes commands</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>history</ns0:name>
            <ns0:type>Sequence‚ü®String‚ü©</ns0:type>
            <ns0:notation>history</ns0:notation>
            <ns0:description>command history</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P2.1">
          <ns0:name>Parse-Execute Cycle</ns0:name>
          <ns0:formal-spec format="latex">input ‚Üí parse ‚Üí validate ‚Üí execute ‚Üí feedback</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P2.2">
          <ns0:name>History Navigation</ns0:name>
          <ns0:formal-spec format="latex">‚Üë key ‚Üí previous(history)
‚Üì key ‚Üí next(history)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P2.3">
          <ns0:name>Autocomplete</ns0:name>
          <ns0:formal-spec format="latex">partial_input ‚Üí suggest(completions)
where completions ‚äÜ valid_commands</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Parse Command</ns0:name>
          <ns0:signature>parse(s: String) ‚Üí Command | ParseError</ns0:signature>
          <ns0:formal-definition format="latex">```
   parse(s: String) ‚Üí Command | ParseError
   = tokenize(s) ‚Üí match_pattern ‚Üí construct_command</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Execute</ns0:name>
          <ns0:signature>execute(cmd: Command) ‚Üí Result</ns0:signature>
          <ns0:formal-definition format="latex">```
   execute(cmd: Command) ‚Üí Result
   = case cmd.type of
       Search(query) ‚Üí search_engine(query)
       Create(type) ‚Üí create_object(type)
       Delete(id) ‚Üí delete_object(id)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Suggest Completions</ns0:name>
          <ns0:signature>suggest(partial: String) ‚Üí Sequence‚ü®String‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   suggest(partial: String) ‚Üí Sequence‚ü®String‚ü©
   = filter(valid_commands, Œªc: startsWith(c, partial))
     ‚Üí sort_by_frequency
     ‚Üí take(10)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Search bar</ns0:name>
          <ns0:description>Google, Spotlight</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Command line</ns0:name>
          <ns0:description>Terminal, bash</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Command palette</ns0:name>
          <ns0:description>VS Code Ctrl+Shift+P</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Query input</ns0:name>
          <ns0:description>SQL clients</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P30" version="1.1">
      <ns0:metadata>
        <ns0:name>Command Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$C = (commands, executor, undo\_stack, redo\_stack)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>commands</ns0:name>
            <ns0:type>Sequence‚ü®Command‚ü©</ns0:type>
            <ns0:notation>commands</ns0:notation>
            <ns0:description>executed commands</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>executor</ns0:name>
            <ns0:type>Command ‚Üí Effect</ns0:type>
            <ns0:notation>executor</ns0:notation>
            <ns0:description>executes commands</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>undo\_stack</ns0:name>
            <ns0:type>Stack‚ü®Command‚ü©</ns0:type>
            <ns0:notation>undo\_stack</ns0:notation>
            <ns0:description>for undo</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>redo\_stack</ns0:name>
            <ns0:type>Stack‚ü®Command‚ü©</ns0:type>
            <ns0:notation>redo\_stack</ns0:notation>
            <ns0:description>for redo</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Command</ns0:name>
          <ns0:definition format="latex">(execute: () ‚Üí Effect, undo: () ‚Üí Effect, redo: () ‚Üí Effect)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P30.1">
          <ns0:name>Reversibility</ns0:name>
          <ns0:formal-spec format="latex">‚àÄcmd: undo(execute(cmd)) returns to pre-execution state</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P30.2">
          <ns0:name>Command History</ns0:name>
          <ns0:formal-spec format="latex">All executed commands pushed to undo_stack</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P30.3">
          <ns0:name>Redo Invalidation</ns0:name>
          <ns0:formal-spec format="latex">New command execution ‚Üí clear redo_stack</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Execute</ns0:name>
          <ns0:signature>execute(cmd: Command) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   execute(cmd: Command) ‚Üí Effect
   = cmd.execute()
     undo_stack := push(undo_stack, cmd)
     redo_stack := empty()  // Clear redo on new action</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Undo</ns0:name>
          <ns0:signature>undo() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   undo() ‚Üí Effect
   = if ¬¨empty(undo_stack):
       cmd := pop(undo_stack)
       cmd.undo()
       redo_stack := push(redo_stack, cmd)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Redo</ns0:name>
          <ns0:signature>redo() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   redo() ‚Üí Effect
   = if ¬¨empty(redo_stack):
       cmd := pop(redo_stack)
       cmd.redo()
       undo_stack := push(undo_stack, cmd)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Undo/redo system</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Macro recording</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Transaction log</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Command history</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P31" version="1.1">
      <ns0:metadata>
        <ns0:name>Observer Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$O = (subject, observers, notify)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>subject</ns0:name>
            <ns0:type>Subject</ns0:type>
            <ns0:notation>subject</ns0:notation>
            <ns0:description>observed object</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>observers</ns0:name>
            <ns0:type>Set‚ü®Observer‚ü©</ns0:type>
            <ns0:notation>observers</ns0:notation>
            <ns0:description>listeners</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>notify</ns0:name>
            <ns0:type>() ‚Üí Effect</ns0:type>
            <ns0:notation>notify</ns0:notation>
            <ns0:description>notifies all observers</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Subject</ns0:name>
          <ns0:definition format="latex">(state: State, attach: Observer ‚Üí Effect, detach: Observer ‚Üí Effect)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Observer</ns0:name>
          <ns0:definition format="latex">(update: State ‚Üí Effect)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P31.1">
          <ns0:name>Loose Coupling</ns0:name>
          <ns0:formal-spec format="latex">Subject doesn't know observer details
Observers independent of each other</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P31.2">
          <ns0:name>Automatic Updates</ns0:name>
          <ns0:formal-spec format="latex">subject.state changes ‚Üí notify_all_observers()</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Attach Observer</ns0:name>
          <ns0:signature>attach(observer: Observer) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   attach(observer: Observer) ‚Üí Effect
   = observers := observers ‚à™ {observer}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Detach Observer</ns0:name>
          <ns0:signature>detach(observer: Observer) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   detach(observer: Observer) ‚Üí Effect
   = observers := observers ‚àñ {observer}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Notify</ns0:name>
          <ns0:signature>notify() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   notify() ‚Üí Effect
   = for observer in observers:
       observer.update(subject.state)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Data binding</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Event listeners</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Reactive subscriptions</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Pub/sub systems</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P32" version="1.1">
      <ns0:metadata>
        <ns0:name>Plugin Architecture</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$P = (interface, registry, loader, lifecycle)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>interface</ns0:name>
            <ns0:type>Interface</ns0:type>
            <ns0:notation>interface</ns0:notation>
            <ns0:description>defines plugin contract</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>registry</ns0:name>
            <ns0:type>Map‚ü®ID, Plugin‚ü©</ns0:type>
            <ns0:notation>registry</ns0:notation>
            <ns0:description>stores loaded plugins</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>loader</ns0:name>
            <ns0:type>Path ‚Üí Plugin</ns0:type>
            <ns0:notation>loader</ns0:notation>
            <ns0:description>loads plugins</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>lifecycle</ns0:name>
            <ns0:type>Plugin ‚Üí Sequence‚ü®Phase‚ü©</ns0:type>
            <ns0:notation>lifecycle</ns0:notation>
            <ns0:description>manages plugin lifecycle</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Plugin</ns0:name>
          <ns0:definition format="latex">(id: ID, metadata: Metadata, hooks: Map‚ü®HookPoint, Handler‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Metadata</ns0:name>
          <ns0:definition format="latex">(name: String, version: Version, dependencies: Set‚ü®ID‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Phase</ns0:name>
          <ns0:definition format="latex">Initialize | Activate | Deactivate | Destroy</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P32.1">
          <ns0:name>Isolation</ns0:name>
          <ns0:formal-spec format="latex">Plugins isolated from each other
Plugin failure doesn't crash system</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P32.2">
          <ns0:name>Well-Defined Interface</ns0:name>
          <ns0:formal-spec format="latex">All plugins implement same interface</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P32.3">
          <ns0:name>Dynamic Loading</ns0:name>
          <ns0:formal-spec format="latex">Plugins loaded/unloaded at runtime</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Load Plugin</ns0:name>
          <ns0:signature>load(path: Path) ‚Üí Plugin</ns0:signature>
          <ns0:formal-definition format="latex">```
   load(path: Path) ‚Üí Plugin
   = plugin := loader(path)
     validate(plugin)
     resolve_dependencies(plugin)
     registry[plugin.id] := plugin
     lifecycle.initialize(plugin)
     return plugin</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Activate Plugin</ns0:name>
          <ns0:signature>activate(plugin: Plugin) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   activate(plugin: Plugin) ‚Üí Effect
   = lifecycle.activate(plugin)
     register_hooks(plugin.hooks)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Deactivate Plugin</ns0:name>
          <ns0:signature>deactivate(plugin: Plugin) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   deactivate(plugin: Plugin) ‚Üí Effect
   = unregister_hooks(plugin.hooks)
     lifecycle.deactivate(plugin)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>VS Code extensions</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>WordPress plugins</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Browser extensions</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Plugin systems</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P33" version="1.1">
      <ns0:metadata>
        <ns0:name>Hook System</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$H = (hooks, handlers, register, invoke)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>hooks</ns0:name>
            <ns0:type>Set‚ü®HookPoint‚ü©</ns0:type>
            <ns0:notation>hooks</ns0:notation>
            <ns0:description>extension points</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>handlers</ns0:name>
            <ns0:type>Map‚ü®HookPoint, Sequence‚ü®Handler‚ü©‚ü©</ns0:type>
            <ns0:notation>handlers</ns0:notation>
            <ns0:description>registered handlers</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>register</ns0:name>
            <ns0:type>(HookPoint, Handler) ‚Üí Effect</ns0:type>
            <ns0:notation>register</ns0:notation>
            <ns0:description>registers handlers</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>invoke</ns0:name>
            <ns0:type>(HookPoint, Context) ‚Üí Effect</ns0:type>
            <ns0:notation>invoke</ns0:notation>
            <ns0:description>invokes handlers</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>HookPoint</ns0:name>
          <ns0:definition format="latex">String  // e.g., "before:save", "after:render"</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Handler</ns0:name>
          <ns0:definition format="latex">Context ‚Üí Effect</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Context</ns0:name>
          <ns0:definition format="latex">Map‚ü®String, Value‚ü©  // Hook-specific data</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P33.1">
          <ns0:name>Handler Order</ns0:name>
          <ns0:formal-spec format="latex">Handlers invoked in registration order</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P33.2">
          <ns0:name>Error Handling</ns0:name>
          <ns0:formal-spec format="latex">Handler error doesn't prevent other handlers from running</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Register Handler</ns0:name>
          <ns0:signature>register(hook: HookPoint, handler: Handler, priority: ‚Ñï) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   register(hook: HookPoint, handler: Handler, priority: ‚Ñï) ‚Üí Effect
   = handlers[hook] := insert_sorted(handlers[hook], (handler, priority))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Invoke Hooks</ns0:name>
          <ns0:signature>invoke(hook: HookPoint, context: Context) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   invoke(hook: HookPoint, context: Context) ‚Üí Effect
   = for (handler, priority) in handlers[hook]:
       try:
         handler(context)
       catch error:
         log_error(error)
         // Continue with next handler
```
Application lifecycle:
  - app:init
  - app:ready
  - app:shutdown
Data operations:
  - before:save
  - after:save
  - before:delete
  - after:delete
Rendering:
  - before:render
  - after:render</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Lifecycle hooks</ns0:name>
          <ns0:description>React, Vue</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Event handlers</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Middleware</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Aspect-oriented programming</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P34" version="1.1">
      <ns0:metadata>
        <ns0:name>Strategy Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (interface, implementations, selector, current)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>interface</ns0:name>
            <ns0:type>Interface</ns0:type>
            <ns0:notation>interface</ns0:notation>
            <ns0:description>defines algorithm contract</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>implementations</ns0:name>
            <ns0:type>Map‚ü®ID, Implementation‚ü©</ns0:type>
            <ns0:notation>implementations</ns0:notation>
            <ns0:description>concrete strategies</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>selector</ns0:name>
            <ns0:type>Context ‚Üí ID</ns0:type>
            <ns0:notation>selector</ns0:notation>
            <ns0:description>chooses strategy</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>current</ns0:name>
            <ns0:type>Implementation</ns0:type>
            <ns0:notation>current</ns0:notation>
            <ns0:description>active strategy</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Interface</ns0:name>
          <ns0:definition format="latex">Set‚ü®MethodSignature‚ü©</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Implementation</ns0:name>
          <ns0:definition format="latex">(id: ID, methods: Map‚ü®String, Function‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Context</ns0:name>
          <ns0:definition format="latex">Map‚ü®String, Value‚ü©  // Decision criteria</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P34.1">
          <ns0:name>Interface Compatibility</ns0:name>
          <ns0:formal-spec format="latex">‚àÄimpl ‚àà implementations: implements(impl, interface)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P34.2">
          <ns0:name>Hot-Swappable</ns0:name>
          <ns0:formal-spec format="latex">Can change strategy at runtime without recompilation</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Select Strategy</ns0:name>
          <ns0:signature>select_strategy(context: Context) ‚Üí Implementation</ns0:signature>
          <ns0:formal-definition format="latex">```
   select_strategy(context: Context) ‚Üí Implementation
   = id := selector(context)
     return implementations[id]</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Execute</ns0:name>
          <ns0:signature>execute(method: String, args: Sequence‚ü®Value‚ü©) ‚Üí Value</ns0:signature>
          <ns0:formal-definition format="latex">```
   execute(method: String, args: Sequence‚ü®Value‚ü©) ‚Üí Value
   = return current.methods[method](args)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Register Strategy</ns0:name>
          <ns0:signature>register(impl: Implementation) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   register(impl: Implementation) ‚Üí Effect
   = validate(impl, interface)
     implementations[impl.id] := impl</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>File format handlers</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Solver algorithms</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Rendering engines</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Compression algorithms</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P35" version="1.1">
      <ns0:metadata>
        <ns0:name>Split-Pane Layout</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (P, D, R, \delta_{35}, \sigma_{35})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>R</ns0:name>
            <ns0:type>P ‚Üí [0,1]</ns0:type>
            <ns0:notation>R</ns0:notation>
            <ns0:description>maps panes to **proportional sizes**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\delta_{35}</ns0:name>
            <ns0:type>P \times P ‚Üí \{\text{splitter}, \text{null}\}</ns0:type>
            <ns0:notation>\delta_{35}</ns0:notation>
            <ns0:description>indicates splitters</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\sigma_{35}</ns0:name>
            <ns0:type>P ‚Üí \{\text{visible}, \text{collapsed}\}</ns0:type>
            <ns0:notation>\sigma_{35}</ns0:notation>
            <ns0:description>**state function**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P35.1">
          <ns0:name>Size Conservation</ns0:name>
          <ns0:formal-spec format="latex">‚àë_{p ‚àà P, œÉ‚ÇÉ‚ÇÖ(p) = visible} R(p) = 1</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P35.2">
          <ns0:name>Adjacency Constraints</ns0:name>
          <ns0:formal-spec format="latex">‚àÄp_i, p_j ‚àà P: Œ¥‚ÇÉ‚ÇÖ(p_i, p_j) = splitter ‚áî adjacent(p_i, p_j)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P35.3">
          <ns0:name>Minimum Size Constraint</ns0:name>
          <ns0:formal-spec format="latex">‚àÄp ‚àà P: R(p) ‚â• R_min(p) ‚à® œÉ‚ÇÉ‚ÇÖ(p) = collapsed</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Resize</ns0:name>
          <ns0:signature>resize(p_i: Pane, p_j: Pane, Œî: ‚Ñù) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   resize(p_i: Pane, p_j: Pane, Œî: ‚Ñù) ‚Üí Effect
   = if R_min(p_i) ‚â§ R(p_i) + Œî ‚â§ R_max(p_i):
       R(p_i) := R(p_i) + Œî
       R(p_j) := R(p_j) - Œî
2. **Toggle Collapse:
```
   toggle(p: Pane) ‚Üí Effect
   = œÉ‚ÇÉ‚ÇÖ(p) := if œÉ‚ÇÉ‚ÇÖ(p) = visible then collapsed else visible
     redistribute_space()
3. Persist Layout:**
```
   persist(S) ‚Üí Storage
   = save({pane_id: R(pane), state: œÉ‚ÇÉ‚ÇÖ(pane)} for pane in P)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>3-column CMS editor</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>VS Code panels</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Split terminal windows</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>IDE layouts</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P36" version="1.1">
      <ns0:metadata>
        <ns0:name>Selection-Driven Panel</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (selection, content, \phi_{36}, observers)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>selection</ns0:name>
            <ns0:type>Element | null</ns0:type>
            <ns0:notation>selection</ns0:notation>
            <ns0:description>currently selected object</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>content</ns0:name>
            <ns0:type>Component</ns0:type>
            <ns0:notation>content</ns0:notation>
            <ns0:description>displayed content</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\phi_{36}</ns0:name>
            <ns0:type>Element ‚Üí Component</ns0:type>
            <ns0:notation>\phi_{36}</ns0:notation>
            <ns0:description>maps selection to content</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>observers</ns0:name>
            <ns0:type>Set‚ü®Observer‚ü©</ns0:type>
            <ns0:notation>observers</ns0:notation>
            <ns0:description>watch selection changes</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Element</ns0:name>
          <ns0:definition format="latex">Any selectable entity</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Component</ns0:name>
          <ns0:definition format="latex">Rendered UI content</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>SelectionEvent</ns0:name>
          <ns0:definition format="latex">(previous: Element | null, current: Element | null)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P36.1">
          <ns0:name>Selection-Driven Content</ns0:name>
          <ns0:formal-spec format="latex">selection changes ‚Üí content := œÜ‚ÇÉ‚ÇÜ(selection)
‚àÄs ‚àà Element: content = œÜ‚ÇÉ‚ÇÜ(s) when selection = s</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P36.2">
          <ns0:name>Reactive Update</ns0:name>
          <ns0:formal-spec format="latex">selection := new_selection ‚áí notify_observers(SelectionEvent)
All observers automatically receive update</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P36.3">
          <ns0:name>Null Selection State</ns0:name>
          <ns0:formal-spec format="latex">selection = null ‚áí content = empty_state | default_content
Panel handles empty selection gracefully</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Update Selection</ns0:name>
          <ns0:signature>update_selection(element: Element | null) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   update_selection(element: Element | null) ‚Üí Effect
   = previous := selection
     selection := element
     content := œÜ‚ÇÉ‚ÇÜ(selection)
     notify_observers((previous, selection))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Render Content</ns0:name>
          <ns0:signature>render() ‚Üí Component</ns0:signature>
          <ns0:formal-definition format="latex">```
   render() ‚Üí Component
   = if selection = null:
       return render_empty_state()
     else:
       return œÜ‚ÇÉ‚ÇÜ(selection)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Subscribe to Selection</ns0:name>
          <ns0:signature>subscribe(observer: Observer) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   subscribe(observer: Observer) ‚Üí Effect
   = observers := observers ‚à™ {observer}
     observer.update(selection)  // Initial notification</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Clear Selection</ns0:name>
          <ns0:signature>clear() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   clear() ‚Üí Effect
   = update_selection(null)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
    </ns0:pattern>
    <ns0:pattern id="P37" version="1.1">
      <ns0:metadata>
        <ns0:name>Empty State Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$E = (C, \epsilon_{37}, P, A)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>\epsilon_{37}</ns0:name>
            <ns0:type>C ‚Üí \{\text{empty}, \text{populated}\}</ns0:type>
            <ns0:notation>\epsilon_{37}</ns0:notation>
            <ns0:description>**emptiness predicate**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties/>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Check Empty</ns0:name>
          <ns0:signature>check_empty(C: Container) ‚Üí ùîπ</ns0:signature>
          <ns0:formal-definition format="latex">```
   check_empty(C: Container) ‚Üí ùîπ
   = items(C) = ‚àÖ</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Render Placeholder</ns0:name>
          <ns0:signature>render(P: Placeholder) ‚Üí Component</ns0:signature>
          <ns0:formal-definition format="latex">```
   render(P: Placeholder) ‚Üí Component
   = VStack([
       Text(P.message, style: prominent),
       Image(P.illustration),
       HStack(map(A, render_button))
     ])</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>"No annotations yet"</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Empty inbox</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Empty canvas</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>No search results</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P38" version="1.1">
      <ns0:metadata>
        <ns0:name>Badge/Indicator Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$B = (H, v, \rho_{38}, \sigma_{38}, \tau_{38})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>\rho_{38}</ns0:name>
            <ns0:type>H ‚Üí \mathbb{R}^2</ns0:type>
            <ns0:notation>\rho_{38}</ns0:notation>
            <ns0:description>**position function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\sigma_{38}</ns0:name>
            <ns0:type>v ‚Üí Style</ns0:type>
            <ns0:notation>\sigma_{38}</ns0:notation>
            <ns0:description>**styling function**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties/>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Update Value</ns0:name>
          <ns0:signature>update(v_new: ‚Ñï) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   update(v_new: ‚Ñï) ‚Üí Effect
   = v := v_new
     animate(scale, œÑ‚ÇÉ‚Çà)
     apply_style(œÉ‚ÇÉ‚Çà(v))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Increment</ns0:name>
          <ns0:signature>increment(Œî: ‚Ñï) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   increment(Œî: ‚Ñï) ‚Üí Effect
   = update(v + Œî)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Unread count</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>"Recent 2" badge</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Warning count</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Online status dot</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P39" version="1.1">
      <ns0:metadata>
        <ns0:name>Contextual Action Menu</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$M = (T, C, A, \pi_{39}, \sigma_{39}, \delta_{39})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>\pi_{39}</ns0:name>
            <ns0:type>A \times C ‚Üí \{\text{visible}, \text{hidden}, \text{disabled}\}</ns0:type>
            <ns0:notation>\pi_{39}</ns0:notation>
            <ns0:description>**availability**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\sigma_{39}</ns0:name>
            <ns0:type>M ‚Üí \{\text{open}, \text{closed}\}</ns0:type>
            <ns0:notation>\sigma_{39}</ns0:notation>
            <ns0:description>**state**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\delta_{39}</ns0:name>
            <ns0:type>M ‚Üí \mathbb{R}^2</ns0:type>
            <ns0:notation>\delta_{39}</ns0:notation>
            <ns0:description>**positioning function**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P39.1">
          <ns0:name>Context Dependency</ns0:name>
          <ns0:formal-spec format="latex">‚àÄa ‚àà A: œÄ‚ÇÉ‚Çâ(a, C) determines visibility</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P39.2">
          <ns0:name>Mutual Exclusivity</ns0:name>
          <ns0:formal-spec format="latex">‚àÄm‚ÇÅ, m‚ÇÇ ‚àà Menus: m‚ÇÅ ‚â† m‚ÇÇ ‚áí ¬¨(œÉ‚ÇÉ‚Çâ(m‚ÇÅ) = open ‚àß œÉ‚ÇÉ‚Çâ(m‚ÇÇ) = open)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P39.3">
          <ns0:name>Auto-Dismiss</ns0:name>
          <ns0:formal-spec format="latex">œÉ‚ÇÉ‚Çâ(M) = open ‚àß click(outside(M)) ‚áí œÉ‚ÇÉ‚Çâ(M) := closed</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Open Menu</ns0:name>
          <ns0:signature>open(T: Element, C: Context) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   open(T: Element, C: Context) ‚Üí Effect
   = œÉ‚ÇÉ‚Çâ := open
     position := Œ¥‚ÇÉ‚Çâ(T, viewport)
     actions_visible := filter(A, Œªa: œÄ‚ÇÉ‚Çâ(a, C) ‚â† hidden)
     render(M, position, actions_visible)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Execute Action</ns0:name>
          <ns0:signature>execute(a: Action) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   execute(a: Action) ‚Üí Effect
   = if œÄ‚ÇÉ‚Çâ(a, C) ‚â† disabled:
       perform(a, C)
       œÉ‚ÇÉ‚Çâ := closed</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Three-dot menu</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Right-click context menu</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Kebab menu</ns0:name>
          <ns0:description>‚ãÆ</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>More actions dropdown</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P3" version="1.1">
      <ns0:metadata>
        <ns0:name>Hierarchical Navigator</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$N = (tree, selection, expansion, breadcrumb)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>tree</ns0:name>
            <ns0:type>Tree‚ü®Node‚ü©</ns0:type>
            <ns0:notation>tree</ns0:notation>
            <ns0:description>hierarchy</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>selection</ns0:name>
            <ns0:type>Node | null</ns0:type>
            <ns0:notation>selection</ns0:notation>
            <ns0:description>current selection</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>expansion</ns0:name>
            <ns0:type>Set‚ü®Node‚ü©</ns0:type>
            <ns0:notation>expansion</ns0:notation>
            <ns0:description>expanded nodes</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>breadcrumb</ns0:name>
            <ns0:type>Sequence‚ü®Node‚ü©</ns0:type>
            <ns0:notation>breadcrumb</ns0:notation>
            <ns0:description>path to selection</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P3.1">
          <ns0:name>Parent-Child Visibility</ns0:name>
          <ns0:formal-spec format="latex">visible(n) ‚áí visible(parent(n))
Expanding parent makes children visible.</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P3.2">
          <ns0:name>Breadcrumb Consistency</ns0:name>
          <ns0:formal-spec format="latex">breadcrumb = path_from_root(tree, selection)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P3.3">
          <ns0:name>Lazy Loading</ns0:name>
          <ns0:formal-spec format="latex">expand(n) ‚Üí load_children(n) only when n first expanded</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Expand Node</ns0:name>
          <ns0:signature>expand(n: Node) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   expand(n: Node) ‚Üí Effect
   = if n ‚àâ expansion:
       expansion := expansion ‚à™ {n}
       load_children(n) if children(n) = unloaded
       render(tree)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Select Node</ns0:name>
          <ns0:signature>select(n: Node) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   select(n: Node) ‚Üí Effect
   = selection := n
     breadcrumb := compute_path(root, n)
     notify_observers(n)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Navigate</ns0:name>
          <ns0:signature>navigate(direction: Direction) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   navigate(direction: Direction) ‚Üí Effect
   = case direction of
       Down ‚Üí select(next_visible(selection))
       Up ‚Üí select(prev_visible(selection))
       Right ‚Üí expand(selection) ; select(first_child(selection))
       Left ‚Üí collapse(selection) | select(parent(selection))</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>File explorer</ns0:name>
          <ns0:description>OS file browser</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Feature tree</ns0:name>
          <ns0:description>CAD</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Theorem library</ns0:name>
          <ns0:description>Lean</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Layer panel</ns0:name>
          <ns0:description>Photoshop</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Outline view</ns0:name>
          <ns0:description>Word</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P40" version="1.1">
      <ns0:metadata>
        <ns0:name>Mode Toggle System</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$T = (M, m_0, \delta_{40}, \phi_{40}, \iota_{40})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>\delta_{40}</ns0:name>
            <ns0:type>M \times M ‚Üí \{\text{allowed}, \text{forbidden}\}</ns0:type>
            <ns0:notation>\delta_{40}</ns0:notation>
            <ns0:description>**transition function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\phi_{40}</ns0:name>
            <ns0:type>M ‚Üí UIConfig</ns0:type>
            <ns0:notation>\phi_{40}</ns0:notation>
            <ns0:description>maps mode to **UI configuration**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\iota_{40}</ns0:name>
            <ns0:type>M ‚Üí Indicator</ns0:type>
            <ns0:notation>\iota_{40}</ns0:notation>
            <ns0:description>provides **visual indicators**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P40.1">
          <ns0:name>Mutual Exclusivity</ns0:name>
          <ns0:formal-spec format="latex">‚àÄt: ‚àÉ!m ‚àà M: active(m, t)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P40.2">
          <ns0:name>Transition Atomicity</ns0:name>
          <ns0:formal-spec format="latex">transition(m_i, m_j) succeeds ‚áî Œ¥‚ÇÑ‚ÇÄ(m_i, m_j) = allowed</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P40.3">
          <ns0:name>UI Consistency</ns0:name>
          <ns0:formal-spec format="latex">active(m) ‚áí UI = œÜ‚ÇÑ‚ÇÄ(m)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Toggle Mode</ns0:name>
          <ns0:signature>toggle(m_target: Mode) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   toggle(m_target: Mode) ‚Üí Effect
   = if Œ¥‚ÇÑ‚ÇÄ(m_current, m_target) = allowed:
       save_state(m_current)
       m_current := m_target
       apply_ui(œÜ‚ÇÑ‚ÇÄ(m_target))
       restore_state(m_target)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Cycle Modes</ns0:name>
          <ns0:signature>cycle() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   cycle() ‚Üí Effect
   = index := indexOf(M, m_current)
     toggle(M[(index + 1) mod |M|])</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Auto-scroll toggle</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Edit vs Preview</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Tool modes</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>View modes</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P41" version="1.1">
      <ns0:metadata>
        <ns0:name>Inline Status Chip</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (I, L, \theta_{41}, \sigma_{41}, \alpha_{41})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>\sigma_{41}</ns0:name>
            <ns0:type>States ‚Üí Styles</ns0:type>
            <ns0:notation>\sigma_{41}</ns0:notation>
            <ns0:description>**styling function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\alpha_{41}</ns0:name>
            <ns0:type>Chip ‚Üí Action</ns0:type>
            <ns0:notation>\alpha_{41}</ns0:notation>
            <ns0:description>optional **click action**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P41.1">
          <ns0:name>State-Style Coupling</ns0:name>
          <ns0:formal-spec format="latex">‚àÄŒ∏ ‚àà States: style(S) = œÉ‚ÇÑ‚ÇÅ(Œ∏)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P41.2">
          <ns0:name>Compactness</ns0:name>
          <ns0:formal-spec format="latex">width(S) ‚â§ 20¬∑fontSize ‚àß height(S) ‚â§ 2¬∑fontSize</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P41.3">
          <ns0:name>Color Semantics</ns0:name>
          <ns0:formal-spec format="latex">œÉ‚ÇÑ‚ÇÅ(success) = green
œÉ‚ÇÑ‚ÇÅ(warning) = yellow
œÉ‚ÇÑ‚ÇÅ(error) = red
œÉ‚ÇÑ‚ÇÅ(info) = blue</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Update State</ns0:name>
          <ns0:signature>set_state(Œ∏_new: State) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   set_state(Œ∏_new: State) ‚Üí Effect
   = Œ∏‚ÇÑ‚ÇÅ := Œ∏_new
     apply_style(œÉ‚ÇÑ‚ÇÅ(Œ∏_new))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Render</ns0:name>
          <ns0:signature>render(S: Chip) ‚Üí Component</ns0:signature>
          <ns0:formal-definition format="latex">```
   render(S: Chip) ‚Üí Component
   = HStack([
       if I ‚â† null then Icon(I),
       Text(L),
     ], style: œÉ‚ÇÑ‚ÇÅ(Œ∏‚ÇÑ‚ÇÅ))</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>"AI: Partial" warning chip</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>"‚úì Saved" success chip</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>"‚è± Syncing..." info chip</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>"‚ùå 2 errors" error chip</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P42" version="1.1">
      <ns0:metadata>
        <ns0:name>Tooltip/Hint System</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$H = (T, C, \tau_{42}, \rho_{42}, \delta_{42}, \kappa_{42})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>C</ns0:name>
            <ns0:type>T ‚Üí String</ns0:type>
            <ns0:notation>C</ns0:notation>
            <ns0:description>**content function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\rho_{42}</ns0:name>
            <ns0:type>T \times Viewport ‚Üí \mathbb{R}^2</ns0:type>
            <ns0:notation>\rho_{42}</ns0:notation>
            <ns0:description>**positioning**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties/>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Show Tooltip</ns0:name>
          <ns0:signature>show(T: Element) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   show(T: Element) ‚Üí Effect
   = schedule(display(H), œÑ‚ÇÑ‚ÇÇ^show)
     position := œÅ‚ÇÑ‚ÇÇ(T, viewport)
     content := C(T)
     render(H, position, content)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Position</ns0:name>
          <ns0:signature>œÅ‚ÇÑ‚ÇÇ(T: Element, vp: Viewport) ‚Üí Point</ns0:signature>
          <ns0:formal-definition format="latex">```
   œÅ‚ÇÑ‚ÇÇ(T: Element, vp: Viewport) ‚Üí Point
   = preferred := (T.center_x, T.bottom + gap)
     if fits(preferred, vp):
       preferred
     else:
       find_best_position([below, above, right, left], T, vp)
```
œÑ‚ÇÑ‚ÇÇ^show ‚àà [200ms, 800ms]  (typical: 500ms)
œÑ‚ÇÑ‚ÇÇ^hide ‚àà [0ms, 200ms]     (typical: 100ms)
Œ∫‚ÇÑ‚ÇÇ ‚àà [50, 100] characters</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Icon button hints</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Abbreviated text expansion</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Keyboard shortcut hints</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Help text for controls</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P43" version="1.1">
      <ns0:metadata>
        <ns0:name>Application Navigation Drawer</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$D = (S_{43}, C, O, \alpha_{43}, \omega_{43}, \pi_{43})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>O</ns0:name>
            <ns0:type>S_{43} ‚Üí \mathbb{B}</ns0:type>
            <ns0:notation>O</ns0:notation>
            <ns0:description>determines **overlay visibility**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\alpha_{43}</ns0:name>
            <ns0:type>S_{43} \times S_{43} ‚Üí Animation</ns0:type>
            <ns0:notation>\alpha_{43}</ns0:notation>
            <ns0:description>**transition animation**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\pi_{43}</ns0:name>
            <ns0:type>C ‚Üí Route</ns0:type>
            <ns0:notation>\pi_{43}</ns0:notation>
            <ns0:description>maps items to **routes**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P43.1">
          <ns0:name>State Machine</ns0:name>
          <ns0:formal-spec format="latex">Transitions:
collapsed ‚Üî expanded
expanded ‚Üî pinned
collapsed ‚Üî pinned</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P43.2">
          <ns0:name>Space Management</ns0:name>
          <ns0:formal-spec format="latex">available_width = viewport.width - (œÉ‚ÇÑ‚ÇÉ ‚àà {expanded, pinned} ? œâ‚ÇÑ‚ÇÉ : 0)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P43.3">
          <ns0:name>Overlay Behavior</ns0:name>
          <ns0:formal-spec format="latex">O(œÉ‚ÇÑ‚ÇÉ) = true ‚áî œÉ‚ÇÑ‚ÇÉ = expanded</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Toggle</ns0:name>
          <ns0:signature>toggle() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   toggle() ‚Üí Effect
   = œÉ‚ÇÑ‚ÇÉ := case œÉ‚ÇÑ‚ÇÉ of
              collapsed ‚Üí expanded
              expanded ‚Üí collapsed
              pinned ‚Üí pinned (no change)
     animate(Œ±‚ÇÑ‚ÇÉ(old_state, œÉ‚ÇÑ‚ÇÉ))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Pin</ns0:name>
          <ns0:signature>pin() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   pin() ‚Üí Effect
   = œÉ‚ÇÑ‚ÇÉ := pinned
     O := false
     persist("drawer.pinned", true)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Navigate</ns0:name>
          <ns0:signature>navigate(item: Item) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   navigate(item: Item) ‚Üí Effect
   = route := œÄ‚ÇÑ‚ÇÉ(item)
     goto(route)
     if mobile(): œÉ‚ÇÑ‚ÇÉ := collapsed</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Gmail sidebar</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>VS Code activity bar</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Mobile hamburger menus</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>CMS tool selector</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P44" version="1.1">
      <ns0:metadata>
        <ns0:name>Keyboard Shortcut System</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$K = (B, M, H, C, P)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>B</ns0:name>
            <ns0:type>KeyCombo ‚Üí Action</ns0:type>
            <ns0:notation>B</ns0:notation>
            <ns0:description>**binding map**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>H</ns0:name>
            <ns0:type>Action ‚Üí String</ns0:type>
            <ns0:notation>H</ns0:notation>
            <ns0:description>**hint display function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>C</ns0:name>
            <ns0:type>KeyCombo \times KeyCombo ‚Üí \mathbb{B}</ns0:type>
            <ns0:notation>C</ns0:notation>
            <ns0:description>**conflict detector**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>P</ns0:name>
            <ns0:type>Platform ‚Üí KeyMapping</ns0:type>
            <ns0:notation>P</ns0:notation>
            <ns0:description>**platform mapping**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P44.1">
          <ns0:name>Binding Uniqueness</ns0:name>
          <ns0:formal-spec format="latex">‚àÄk‚ÇÅ, k‚ÇÇ: k‚ÇÅ ‚â† k‚ÇÇ ‚áí B(k‚ÇÅ) ‚â† B(k‚ÇÇ) ‚à® scope(k‚ÇÅ) ‚à© scope(k‚ÇÇ) = ‚àÖ</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P44.2">
          <ns0:name>Platform Mapping</ns0:name>
          <ns0:formal-spec format="latex">P(Mac): Ctrl ‚Ü¶ Cmd, Alt ‚Ü¶ Option
P(Windows): identity
P(Linux): identity</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P44.3">
          <ns0:name>Scope Hierarchy</ns0:name>
          <ns0:formal-spec format="latex">priority(component) &gt; priority(modal) &gt; priority(global)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Register Binding</ns0:name>
          <ns0:signature>register(combo: KeyCombo, action: Action, scope: Scope) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   register(combo: KeyCombo, action: Action, scope: Scope) ‚Üí Effect
   = if ¬¨‚àÉk: C(combo, k):
       B[combo] := (action, scope)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Handle Keypress</ns0:name>
          <ns0:signature>handle(event: KeyEvent) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   handle(event: KeyEvent) ‚Üí Effect
   = combo := extract_combo(event)
     if combo ‚àà dom(B):
       preventDefault(event)
       B[combo].action()</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Display Hint</ns0:name>
          <ns0:signature>H(action: Action) ‚Üí String</ns0:signature>
          <ns0:formal-definition format="latex">```
   H(action: Action) ‚Üí String
   = format(P(current_platform), key_combo(action))</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Ctrl+S</ns0:name>
          <ns0:description>save</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Ctrl+Z/Y</ns0:name>
          <ns0:description>undo/redo</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Ctrl+F</ns0:name>
          <ns0:description>search</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Esc</ns0:name>
          <ns0:description>close dialog</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P45" version="1.1">
      <ns0:metadata>
        <ns0:name>Drag and Drop Interaction</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$D = (S, T, G, F, \phi_{45}, \psi_{45})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>G</ns0:name>
            <ns0:type>S ‚Üí Ghost</ns0:type>
            <ns0:notation>G</ns0:notation>
            <ns0:description>**ghost element function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>F</ns0:name>
            <ns0:type>S \times T ‚Üí \{\text{accept}, \text{reject}\}</ns0:type>
            <ns0:notation>F</ns0:notation>
            <ns0:description>**acceptance predicate**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\phi_{45}</ns0:name>
            <ns0:type>S \times T ‚Üí Effect</ns0:type>
            <ns0:notation>\phi_{45}</ns0:notation>
            <ns0:description>**drop handler**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties/>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Start Drag</ns0:name>
          <ns0:signature>drag_start(s: Source, event: Event) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   drag_start(s: Source, event: Event) ‚Üí Effect
   = œà‚ÇÑ‚ÇÖ := dragging
     ghost := G(s)
     create(ghost)
     data := serialize(s)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Drop</ns0:name>
          <ns0:signature>drop(s: Source, t: Target) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   drop(s: Source, t: Target) ‚Üí Effect
   = if F(s, t) = accept:
       œÜ‚ÇÑ‚ÇÖ(s, t)
       commit()
       œà‚ÇÑ‚ÇÖ := idle</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Reorder tabs</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Move files</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Drag blocks to reorder</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Kanban cards</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P46" version="1.1">
      <ns0:metadata>
        <ns0:name>Focus Management System</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$F = (O, \tau_{46}, R, I, S)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>O</ns0:name>
            <ns0:type>UI ‚Üí Sequence‚ü®Element‚ü©</ns0:type>
            <ns0:notation>O</ns0:notation>
            <ns0:description>**focus order function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\tau_{46}</ns0:name>
            <ns0:type>Element ‚Üí \{\text{tabbable}, \text{not\_tabbable}\}</ns0:type>
            <ns0:notation>\tau_{46}</ns0:notation>
            <ns0:description>**tabbability**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>R</ns0:name>
            <ns0:type>Modal ‚Üí Element</ns0:type>
            <ns0:notation>R</ns0:notation>
            <ns0:description>**focus restoration function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>I</ns0:name>
            <ns0:type>Element ‚Üí VisualIndicator</ns0:type>
            <ns0:notation>I</ns0:notation>
            <ns0:description>**indicator rendering**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties/>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Move Focus Forward</ns0:name>
          <ns0:signature>next_focus() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   next_focus() ‚Üí Effect
   = order := O(active_scope)
     index := indexOf(focused, order)
     focus(order[(index + 1) mod |order|])</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Trap Focus</ns0:name>
          <ns0:signature>trap(modal: Modal) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   trap(modal: Modal) ‚Üí Effect
   = S := descendants(modal)
     R(modal) := currently_focused
     focus(first_tabbable(S))</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Modal dialog focus trap</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Keyboard navigation</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Skip links</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Accessible widgets</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P47" version="1.1">
      <ns0:metadata>
        <ns0:name>Inline Editing Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$E = (M, \sigma_{47}, \tau_{47}, \phi_{47}, \psi_{47})$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>\tau_{47}</ns0:name>
            <ns0:type>Event ‚Üí M</ns0:type>
            <ns0:notation>\tau_{47}</ns0:notation>
            <ns0:description>**trigger function**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\phi_{47}</ns0:name>
            <ns0:type>Value \times Value ‚Üí Effect</ns0:type>
            <ns0:notation>\phi_{47}</ns0:notation>
            <ns0:description>**commit handler**</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>\psi_{47}</ns0:name>
            <ns0:type>() ‚Üí Effect</ns0:type>
            <ns0:notation>\psi_{47}</ns0:notation>
            <ns0:description>**cancel handler**</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P47.1">
          <ns0:name>Mode Exclusivity</ns0:name>
          <ns0:formal-spec format="latex">|{m : active(m)}| = 1</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P47.2">
          <ns0:name>Position Preservation</ns0:name>
          <ns0:formal-spec format="latex">bounds(view) ‚âà bounds(edit)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P47.3">
          <ns0:name>Validation Gate</ns0:name>
          <ns0:formal-spec format="latex">commit(v) succeeds ‚áî valid(v)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Enter Edit Mode</ns0:name>
          <ns0:signature>activate() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   activate() ‚Üí Effect
   = value_original := value
     œÉ‚ÇÑ‚Çá := edit
     render_input()
     focus(input)
     select_all(input)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Commit Changes</ns0:name>
          <ns0:signature>commit() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   commit() ‚Üí Effect
   = v_new := get_input_value()
     if valid(v_new):
       œÜ‚ÇÑ‚Çá(value_original, v_new)
       value := v_new
       œÉ‚ÇÑ‚Çá := view</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Cancel Edit</ns0:name>
          <ns0:signature>cancel() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   cancel() ‚Üí Effect
   = œà‚ÇÑ‚Çá()
     value := value_original
     œÉ‚ÇÑ‚Çá := view</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Click paragraph to edit</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Spreadsheet cell editing</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Filename rename</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Tag editing</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P48" version="1.1">
      <ns0:metadata>
        <ns0:name>Form Validation Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$V = (fields, rules, state, errors)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>fields</ns0:name>
            <ns0:type>Map‚ü®String, Field‚ü©</ns0:type>
            <ns0:notation>fields</ns0:notation>
            <ns0:description>form fields</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>rules</ns0:name>
            <ns0:type>Map‚ü®String, Validator‚ü©</ns0:type>
            <ns0:notation>rules</ns0:notation>
            <ns0:description>validation rules</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>state</ns0:name>
            <ns0:type>Map‚ü®String, ValidationState‚ü©</ns0:type>
            <ns0:notation>state</ns0:notation>
            <ns0:description>tracks validation status</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>errors</ns0:name>
            <ns0:type>Map‚ü®String, Sequence‚ü®String‚ü©‚ü©</ns0:type>
            <ns0:notation>errors</ns0:notation>
            <ns0:description>stores error messages</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Field</ns0:name>
          <ns0:definition format="latex">(value: Value, dirty: ùîπ, touched: ùîπ)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Validator</ns0:name>
          <ns0:definition format="latex">Value ‚Üí ValidationResult</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>ValidationResult</ns0:name>
          <ns0:definition format="latex">Valid | Invalid(errors: Sequence‚ü®String‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>ValidationState</ns0:name>
          <ns0:definition format="latex">Pristine | Valid | Invalid | Validating</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P48.1">
          <ns0:name>Eager Validation</ns0:name>
          <ns0:formal-spec format="latex">field.dirty ‚àß field.touched ‚áí validate(field) on change</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P48.2">
          <ns0:name>Form-Level Validation</ns0:name>
          <ns0:formal-spec format="latex">valid(form) ‚áî ‚àÄf ‚àà fields: state[f] ‚àà {Valid, Pristine}</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P48.3">
          <ns0:name>Async Validation</ns0:name>
          <ns0:formal-spec format="latex">validate_async(field) ‚Üí ValidationResult (eventually)
state[field] = Validating during execution</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P48.4">
          <ns0:name>Cross-Field Validation</ns0:name>
          <ns0:formal-spec format="latex">validate_group([field‚ÇÅ, field‚ÇÇ, ...]) ‚Üí ValidationResult
Example: password confirmation</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Validate Field</ns0:name>
          <ns0:signature>validate(field_name: String) ‚Üí ValidationResult</ns0:signature>
          <ns0:formal-definition format="latex">```
   validate(field_name: String) ‚Üí ValidationResult
   = value := fields[field_name].value
     validator := rules[field_name]
     result := validator(value)
     state[field_name] := case result of
       Valid ‚Üí Valid
       Invalid(errs) ‚Üí Invalid
     errors[field_name] := result.errors
     return result</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Validate Form</ns0:name>
          <ns0:signature>validate_form() ‚Üí ùîπ</ns0:signature>
          <ns0:formal-definition format="latex">```
   validate_form() ‚Üí ùîπ
   = results := map(keys(fields), validate)
     return all(results, Œªr: r = Valid)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Register Rule</ns0:name>
          <ns0:signature>register_rule(field: String, rule: Validator) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   register_rule(field: String, rule: Validator) ‚Üí Effect
   = rules[field] := compose_validators(rules[field], rule)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Built-in Validators</ns0:name>
          <ns0:signature>required(value: Value) ‚Üí ValidationResult</ns0:signature>
          <ns0:formal-definition format="latex">```
   required(value: Value) ‚Üí ValidationResult
   = if value ‚â† null ‚àß value ‚â† "":
       Valid
     else:
       Invalid(["This field is required"])
   min_length(n: ‚Ñï) ‚Üí Validator
   = Œªvalue: if length(value) ‚â• n:
               Valid
             else:
               Invalid([f"Minimum length is {n}"])
   email(value: String) ‚Üí ValidationResult
   = if matches(value, email_regex):
       Valid
     else:
       Invalid(["Invalid email address"])
   custom(predicate: Value ‚Üí ùîπ, message: String) ‚Üí Validator
   = Œªvalue: if predicate(value):
               Valid
             else:
               Invalid([message])</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>On Submit</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Validate all fields when form submitted
   Show all errors at once</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>On Blur</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Validate field when it loses focus
   Show errors immediately</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>On Change</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Validate field on every keystroke
   Show errors after field touched</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Hybrid (Recommended)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   First error: on blur
   Subsequent: on change (immediate feedback)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Registration forms</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Login forms</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Settings panels</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Data entry forms</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Survey forms</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P49" version="1.1">
      <ns0:metadata>
        <ns0:name>Multi-Step Form (Wizard) Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$W = (steps, current, data, nav, progress)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>steps</ns0:name>
            <ns0:type>Sequence‚ü®Step‚ü©</ns0:type>
            <ns0:notation>steps</ns0:notation>
            <ns0:description>form steps</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>current</ns0:name>
            <ns0:type>‚Ñï</ns0:type>
            <ns0:notation>current</ns0:notation>
            <ns0:description>active step index</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>data</ns0:name>
            <ns0:type>Map‚ü®String, Value‚ü©</ns0:type>
            <ns0:notation>data</ns0:notation>
            <ns0:description>accumulates form data</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>nav</ns0:name>
            <ns0:type>Navigation</ns0:type>
            <ns0:notation>nav</ns0:notation>
            <ns0:description>controls step transitions</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>progress</ns0:name>
            <ns0:type>‚Ñï/‚Ñï</ns0:type>
            <ns0:notation>progress</ns0:notation>
            <ns0:description>shows completion progress</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Step</ns0:name>
          <ns0:definition format="latex">(title: String, fields: Set‚ü®Field‚ü©, validate: () ‚Üí ùîπ)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Navigation</ns0:name>
          <ns0:definition format="latex">{prev: () ‚Üí Effect, next: () ‚Üí Effect, goto: ‚Ñï ‚Üí Effect}</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P49.1">
          <ns0:name>Sequential Progress</ns0:name>
          <ns0:formal-spec format="latex">can_advance(step) ‚áî valid(steps[current])</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P49.2">
          <ns0:name>Data Accumulation</ns0:name>
          <ns0:formal-spec format="latex">complete(step_i) ‚áí data := data ‚à™ extract_values(step_i)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P49.3">
          <ns0:name>State Persistence</ns0:name>
          <ns0:formal-spec format="latex">Navigate away ‚Üí persist(data, current)
Return ‚Üí restore(data, current)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P49.4">
          <ns0:name>Non-Linear Navigation</ns0:name>
          <ns0:formal-spec format="latex">‚àÄi &lt; current: can_goto(i)  // Can revisit completed steps</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Next Step</ns0:name>
          <ns0:signature>next() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   next() ‚Üí Effect
   = if validate(steps[current]):
       data := data ‚à™ extract_values(steps[current])
       if current &lt; |steps| - 1:
         current := current + 1
         render(steps[current])
       else:
         submit(data)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Previous Step</ns0:name>
          <ns0:signature>prev() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   prev() ‚Üí Effect
   = if current &gt; 0:
       current := current - 1
       render(steps[current])
3. **Go To Step:
```
   goto(index: ‚Ñï) ‚Üí Effect
   = if index ‚â§ max_completed_step:
       current := index
       render(steps[index])
4. Calculate Progress:**
```
   progress() ‚Üí (‚Ñï, ‚Ñï)
   = (current + 1, |steps|)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Linear</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   [=====&gt;      ] 50% (Step 2 of 4)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Stepped</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   1. Details ‚úì
   2. Payment ‚Üê (current)
   3. Review
   4. Confirm</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Breadcrumb</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Home &gt; Personal Info &gt; Payment &gt; Review</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Checkout flow</ns0:name>
          <ns0:description>e-commerce</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Onboarding wizard</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Setup assistant</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Multi-page survey</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Installation wizard</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P4" version="1.1">
      <ns0:metadata>
        <ns0:name>Property Inspector</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$I = (selection, fields, validators, commit)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>selection</ns0:name>
            <ns0:type>Element | null</ns0:type>
            <ns0:notation>selection</ns0:notation>
            <ns0:description>inspected object</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>fields</ns0:name>
            <ns0:type>Map‚ü®String, Field‚ü©</ns0:type>
            <ns0:notation>fields</ns0:notation>
            <ns0:description>editable properties</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>validators</ns0:name>
            <ns0:type>Map‚ü®String, Validator‚ü©</ns0:type>
            <ns0:notation>validators</ns0:notation>
            <ns0:description>validate changes</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>commit</ns0:name>
            <ns0:type>(String, Value) ‚Üí Effect</ns0:type>
            <ns0:notation>commit</ns0:notation>
            <ns0:description>applies changes</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P4.1">
          <ns0:name>Selection-Driven</ns0:name>
          <ns0:formal-spec format="latex">selection changes ‚Üí reload_fields(selection)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P4.2">
          <ns0:name>Validation Before Commit</ns0:name>
          <ns0:formal-spec format="latex">commit(field, value) succeeds ‚áî validators[field](value) = valid</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P4.3">
          <ns0:name>Immediate or Delayed Commit</ns0:name>
          <ns0:formal-spec format="latex">Mode 1 (immediate): onChange ‚Üí commit
Mode 2 (delayed): onChange ‚Üí stage, onBlur ‚Üí commit</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Load Properties</ns0:name>
          <ns0:signature>load(element: Element) ‚Üí Map‚ü®String, Value‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   load(element: Element) ‚Üí Map‚ü®String, Value‚ü©
   = {(k, v) : k ‚àà properties(element), v = element[k]}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Validate Field</ns0:name>
          <ns0:signature>validate(field: String, value: Value) ‚Üí ValidationResult</ns0:signature>
          <ns0:formal-definition format="latex">```
   validate(field: String, value: Value) ‚Üí ValidationResult
   = validators[field](value)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Commit Change</ns0:name>
          <ns0:signature>commit(field: String, value: Value) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   commit(field: String, value: Value) ‚Üí Effect
   = if validate(field, value) = valid:
       selection[field] := value
       update_dependents(field)
       notify_observers(selection)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Properties panel</ns0:name>
          <ns0:description>design tools</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Inspector</ns0:name>
          <ns0:description>browser DevTools</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Settings panel</ns0:name>
          <ns0:description>applications</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Attributes editor</ns0:name>
          <ns0:description>HTML editors</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P50" version="1.1">
      <ns0:metadata>
        <ns0:name>Form Dependency Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$D = (fields, deps, update, cascade)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>fields</ns0:name>
            <ns0:type>Map‚ü®String, Field‚ü©</ns0:type>
            <ns0:notation>fields</ns0:notation>
            <ns0:description>form fields</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>deps</ns0:name>
            <ns0:type>Map‚ü®String, Set‚ü®String‚ü©‚ü©</ns0:type>
            <ns0:notation>deps</ns0:notation>
            <ns0:description>defines dependencies</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>update</ns0:name>
            <ns0:type>String √ó Value ‚Üí Effect</ns0:type>
            <ns0:notation>update</ns0:notation>
            <ns0:description>propagates changes</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>cascade</ns0:name>
            <ns0:type>ùîπ</ns0:type>
            <ns0:notation>cascade</ns0:notation>
            <ns0:description>enables cascading updates</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Dependency</ns0:name>
          <ns0:definition format="latex">(source: String, targets: Set‚ü®String‚ü©,</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P50.1">
          <ns0:name>Dependency Graph</ns0:name>
          <ns0:formal-spec format="latex">deps forms a DAG (no circular dependencies)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P50.2">
          <ns0:name>Automatic Updates</ns0:name>
          <ns0:formal-spec format="latex">change(field_A) ‚àß field_B ‚àà deps[field_A] ‚áí update(field_B)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P50.3">
          <ns0:name>Conditional Visibility</ns0:name>
          <ns0:formal-spec format="latex">visible(field) = evaluate(visibility_condition, form_data)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P50.4">
          <ns0:name>Value Computation</ns0:name>
          <ns0:formal-spec format="latex">computed_field.value = compute(dependencies.values)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Register Dependency</ns0:name>
          <ns0:signature>add_dependency(source: String, target: String, rule: Rule) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   add_dependency(source: String, target: String, rule: Rule) ‚Üí Effect
   = deps[source] := deps[source] ‚à™ {target}
     rules[(source, target)] := rule
     validate_acyclic(deps)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Update Field</ns0:name>
          <ns0:signature>update_field(field: String, value: Value) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   update_field(field: String, value: Value) ‚Üí Effect
   = fields[field].value := value
     if cascade:
       for target in deps[field]:
         rule := rules[(field, target)]
         new_value := rule(value)
         update_field(target, new_value)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Compute Derived Value</ns0:name>
          <ns0:signature>compute_derived(field: String) ‚Üí Value</ns0:signature>
          <ns0:formal-definition format="latex">```
   compute_derived(field: String) ‚Üí Value
   = sources := {f : field ‚àà deps[f]}
     values := map(sources, Œªf: fields[f].value)
     compute_function[field](values)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Conditional Visibility</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Field "Other" visible only if "Category" = "Other"
   deps["category"] := {"other_field"}
   rules[("category", "other_field")] := 
     Œªval: {visible: val = "Other"}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Value Computation</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Total = Subtotal + Tax
   deps["subtotal"] := {"total"}
   deps["tax"] := {"total"}
   rules[("subtotal"|"tax", "total")] := 
     Œª_: subtotal + tax</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Cascading Defaults</ns0:name>
          <ns0:signature>Country ‚Üí State ‚Üí City</ns0:signature>
          <ns0:formal-definition format="latex">```
   Country ‚Üí State ‚Üí City
   Changing country resets state and city
   Changing state resets city</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Dynamic Options</ns0:name>
          <ns0:signature>Category ‚Üí Subcategory options</ns0:signature>
          <ns0:formal-definition format="latex">```
   Category ‚Üí Subcategory options
   deps["category"] := {"subcategory"}
   rules[("category", "subcategory")] := 
     Œªcat: {options: get_subcategories(cat)}</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Address forms</ns0:name>
          <ns0:description>country‚Üístate‚Üícity</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Product configurators</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Tax calculators</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Dynamic pricing forms</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Conditional survey questions</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P51" version="1.1">
      <ns0:metadata>
        <ns0:name>Responsive Layout Pattern (NEW)</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$L = (breakpoints, layouts, current)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>breakpoints</ns0:name>
            <ns0:type>Sequence‚ü®(width: ‚Ñù, name: String)‚ü©</ns0:type>
            <ns0:notation>breakpoints</ns0:notation>
            <ns0:description>define size thresholds</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>layouts</ns0:name>
            <ns0:type>Map‚ü®String, Layout‚ü©</ns0:type>
            <ns0:notation>layouts</ns0:notation>
            <ns0:description>map breakpoint names to layouts</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>current</ns0:name>
            <ns0:type>String</ns0:type>
            <ns0:notation>current</ns0:notation>
            <ns0:description>active layout name</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Breakpoint</ns0:name>
          <ns0:definition format="latex">(width: ‚Ñù, name: String)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Layout</ns0:name>
          <ns0:definition format="latex">(structure: Component, visibility: Map‚ü®Element, ùîπ‚ü©)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P51.1">
          <ns0:name>Breakpoint Selection</ns0:name>
          <ns0:formal-spec format="latex">current = max{bp.name : bp.width ‚â§ viewport.width}</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P51.2">
          <ns0:name>Layout Activation</ns0:name>
          <ns0:formal-spec format="latex">viewport changes ‚Üí update_current() ‚Üí apply(layouts[current])</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P51.3">
          <ns0:name>Mobile-First</ns0:name>
          <ns0:formal-spec format="latex">breakpoints ordered: mobile &lt; tablet &lt; desktop &lt; wide</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Select Layout</ns0:name>
          <ns0:signature>select_layout(width: ‚Ñù) ‚Üí String</ns0:signature>
          <ns0:formal-definition format="latex">```
   select_layout(width: ‚Ñù) ‚Üí String
   = find_last(breakpoints, Œªbp: bp.width ‚â§ width).name</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Apply Layout</ns0:name>
          <ns0:signature>apply(layout: Layout) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   apply(layout: Layout) ‚Üí Effect
   = structure := layout.structure
     for (element, visible) in layout.visibility:
       element.visible := visible
     reflow()</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Register Breakpoint</ns0:name>
          <ns0:signature>register(bp: Breakpoint, layout: Layout) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   register(bp: Breakpoint, layout: Layout) ‚Üí Effect
   = breakpoints := insert_sorted(breakpoints, bp)
     layouts[bp.name] := layout
```
mobile:  &lt; 640px
tablet:  640px - 1024px
desktop: 1024px - 1440px
wide:    ‚â• 1440px</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Collapsing Navigation</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   mobile: P43(collapsed)
   desktop: P43(pinned)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Column Reflow</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   mobile: 1 column
   tablet: 2 columns
   desktop: 3 columns</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Component Swap</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   mobile: Compact cards
   desktop: Expanded cards with details</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Responsive web apps</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Mobile-first design</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Adaptive interfaces</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Cross-device layouts</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P52" version="1.1">
      <ns0:metadata>
        <ns0:name>Pagination Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$P = (data, page, size, total, nav)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>data</ns0:name>
            <ns0:type>Sequence‚ü®Item‚ü©</ns0:type>
            <ns0:notation>data</ns0:notation>
            <ns0:description>full dataset</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>page</ns0:name>
            <ns0:type>‚Ñï</ns0:type>
            <ns0:notation>page</ns0:notation>
            <ns0:description>current page number (1-indexed)</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>size</ns0:name>
            <ns0:type>‚Ñï</ns0:type>
            <ns0:notation>size</ns0:notation>
            <ns0:description>items per page</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>total</ns0:name>
            <ns0:type>‚Ñï</ns0:type>
            <ns0:notation>total</ns0:notation>
            <ns0:description>total item count</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>nav</ns0:name>
            <ns0:type>Navigation</ns0:type>
            <ns0:notation>nav</ns0:notation>
            <ns0:description>provides navigation controls</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Navigation</ns0:name>
          <ns0:definition format="latex">{</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P52.1">
          <ns0:name>Page Calculation</ns0:name>
          <ns0:formal-spec format="latex">total_pages = ‚åàtotal / size‚åâ
page ‚àà [1, total_pages]</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P52.2">
          <ns0:name>Item Range</ns0:name>
          <ns0:formal-spec format="latex">current_items = data[(page-1)¬∑size : page¬∑size]</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P52.3">
          <ns0:name>Boundary Checks</ns0:name>
          <ns0:formal-spec format="latex">has_prev ‚áî page &gt; 1
has_next ‚áî page &lt; total_pages</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Get Page</ns0:name>
          <ns0:signature>get_page(page_num: ‚Ñï) ‚Üí Sequence‚ü®Item‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   get_page(page_num: ‚Ñï) ‚Üí Sequence‚ü®Item‚ü©
   = start := (page_num - 1) ¬∑ size
     end := min(start + size, total)
     return data[start:end]</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Navigate</ns0:name>
          <ns0:signature>next() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   next() ‚Üí Effect
   = if page &lt; total_pages:
       page := page + 1
       load_page(page)
   prev() ‚Üí Effect
   = if page &gt; 1:
       page := page - 1
       load_page(page)
   goto(p: ‚Ñï) ‚Üí Effect
   = if 1 ‚â§ p ‚â§ total_pages:
       page := p
       load_page(p)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Change Page Size</ns0:name>
          <ns0:signature>set_page_size(new_size: ‚Ñï) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   set_page_size(new_size: ‚Ñï) ‚Üí Effect
   = size := new_size
     page := 1  // Reset to first page
     load_page(1)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Offset-Based (Traditional)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Query: SELECT * FROM items LIMIT size OFFSET (page-1)*size
   Pros: Can jump to any page
   Cons: Performance degrades with large offsets</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Cursor-Based (API)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Query: SELECT * FROM items WHERE id &gt; cursor LIMIT size
   cursor := last_item.id
   Pros: Consistent performance
   Cons: Can't jump to arbitrary page</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Infinite Scroll</ns0:name>
          <ns0:signature>Scroll to bottom ‚Üí load_next_page() ‚Üí append to list</ns0:signature>
          <ns0:formal-definition format="latex">```
   Scroll to bottom ‚Üí load_next_page() ‚Üí append to list
   Pros: Smooth UX
   Cons: No page bookmarks, harder navigation</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Numbered</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   [&lt; Prev] [1] [2] [3] ... [10] [Next &gt;]</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Simple</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   [&lt; Previous] Page 3 of 10 [Next &gt;]</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Load More</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   [Show 25 more items]</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Search results</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Product listings</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Data tables</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Blog archives</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>API responses</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P53" version="1.1">
      <ns0:metadata>
        <ns0:name>Filtering Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$F = (data, filters, active, result, facets)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>data</ns0:name>
            <ns0:type>Set‚ü®Item‚ü©</ns0:type>
            <ns0:notation>data</ns0:notation>
            <ns0:description>full dataset</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>filters</ns0:name>
            <ns0:type>Map‚ü®String, Filter‚ü©</ns0:type>
            <ns0:notation>filters</ns0:notation>
            <ns0:description>available filters</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>active</ns0:name>
            <ns0:type>Map‚ü®String, FilterValue‚ü©</ns0:type>
            <ns0:notation>active</ns0:notation>
            <ns0:description>active filters</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>result</ns0:name>
            <ns0:type>Set‚ü®Item‚ü©</ns0:type>
            <ns0:notation>result</ns0:notation>
            <ns0:description>filtered result</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>facets</ns0:name>
            <ns0:type>Map‚ü®String, Facet‚ü©</ns0:type>
            <ns0:notation>facets</ns0:notation>
            <ns0:description>shows filter counts</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Filter</ns0:name>
          <ns0:definition format="latex">(</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>FilterType</ns0:name>
          <ns0:definition format="latex">Range | Select | MultiSelect | Search | Boolean</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>FilterValue</ns0:name>
          <ns0:definition format="latex">Value | Range(min, max) | Set‚ü®Value‚ü©</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Facet</ns0:name>
          <ns0:definition format="latex">Map‚ü®Value, ‚Ñï‚ü©  // value ‚Üí count</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P53.1">
          <ns0:name>Result Computation</ns0:name>
          <ns0:formal-spec format="latex">result = {item ‚àà data : ‚àÄ(k, v) ‚àà active: filters[k].apply(item, v)}</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P53.2">
          <ns0:name>Facet Accuracy</ns0:name>
          <ns0:formal-spec format="latex">facets[filter_k][value_v] = |{item ‚àà result : item[k] = value_v}|</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P53.3">
          <ns0:name>Filter Composition</ns0:name>
          <ns0:formal-spec format="latex">Multiple filters combined with AND (intersection)
Multi-select within filter combined with OR (union)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Apply Filter</ns0:name>
          <ns0:signature>apply_filter(filter_name: String, value: FilterValue) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   apply_filter(filter_name: String, value: FilterValue) ‚Üí Effect
   = active[filter_name] := value
     result := compute_result(data, active)
     facets := compute_facets(result, filters)
     notify_observers(result)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Compute Result</ns0:name>
          <ns0:signature>compute_result(data: Set‚ü®Item‚ü©, active: Map‚ü®String, FilterValue‚ü©) ‚Üí Set‚ü®Item‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   compute_result(data: Set‚ü®Item‚ü©, active: Map‚ü®String, FilterValue‚ü©) ‚Üí Set‚ü®Item‚ü©
   = filter(data, Œªitem:
       ‚àÄ(k, v) ‚àà active: filters[k].apply(item, v)
     )</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Compute Facets</ns0:name>
          <ns0:signature>compute_facets(result: Set‚ü®Item‚ü©, filters: Map‚ü®String, Filter‚ü©) ‚Üí Map‚ü®String, Facet‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   compute_facets(result: Set‚ü®Item‚ü©, filters: Map‚ü®String, Filter‚ü©) ‚Üí Map‚ü®String, Facet‚ü©
   = {
       (filter_name, {
         (value, count(result, Œªitem: item[filter_name] = value))
         for value in possible_values(filter_name)
       })
       for filter_name in keys(filters)
     }</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Clear Filters</ns0:name>
          <ns0:signature>clear() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   clear() ‚Üí Effect
   = active := {}
     result := data
     facets := compute_facets(result, filters)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Range Filter</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Price: $0 - $1000
   apply(item, (min, max)) = min ‚â§ item.price ‚â§ max
6. **Multi-Select Filter:
```
   Colors: [‚úì Red] [‚úì Blue] [ ] Green
   apply(item, selected) = item.color ‚àà selected
7. Search Filter:**
```
   Search: "laptop"
   apply(item, query) = contains(item.name, query, case_insensitive)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Boolean Filter</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   [‚úì] In Stock Only
   apply(item, true) = item.in_stock</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>E-commerce product filters</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Search result filters</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Data table column filters</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Email filters</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Log viewers</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P54" version="1.1">
      <ns0:metadata>
        <ns0:name>Sorting Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (data, columns, order, comparator)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>data</ns0:name>
            <ns0:type>Sequence‚ü®Item‚ü©</ns0:type>
            <ns0:notation>data</ns0:notation>
            <ns0:description>dataset</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>columns</ns0:name>
            <ns0:type>Sequence‚ü®Column‚ü©</ns0:type>
            <ns0:notation>columns</ns0:notation>
            <ns0:description>sortable columns</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>order</ns0:name>
            <ns0:type>Sequence‚ü®(Column, Direction)‚ü©</ns0:type>
            <ns0:notation>order</ns0:notation>
            <ns0:description>sort specification</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>comparator</ns0:name>
            <ns0:type>Item √ó Item ‚Üí \{-1, 0, 1\}</ns0:type>
            <ns0:notation>comparator</ns0:notation>
            <ns0:description>comparison function</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Column</ns0:name>
          <ns0:definition format="latex">(name: String, type: Type, extract: Item ‚Üí Value)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Direction</ns0:name>
          <ns0:definition format="latex">Asc | Desc</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Order</ns0:name>
          <ns0:definition format="latex">Sequence‚ü®(Column, Direction)‚ü©  // Multi-column sort</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P54.1">
          <ns0:name>Stable Sort</ns0:name>
          <ns0:formal-spec format="latex">Items with equal sort keys maintain their original relative order</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P54.2">
          <ns0:name>Multi-Column Sort</ns0:name>
          <ns0:formal-spec format="latex">Sort by order[0], then order[1] for ties, then order[2], ...</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P54.3">
          <ns0:name>Type-Aware Comparison</ns0:name>
          <ns0:formal-spec format="latex">comparator respects type semantics:
Numeric: 2 &lt; 10
String: "a" &lt; "b" (lexicographic)
Date: older &lt; newer</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Sort Data</ns0:name>
          <ns0:signature>sort(data: Sequence‚ü®Item‚ü©, order: Order) ‚Üí Sequence‚ü®Item‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   sort(data: Sequence‚ü®Item‚ü©, order: Order) ‚Üí Sequence‚ü®Item‚ü©
   = stable_sort(data, composite_comparator(order))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Composite Comparator</ns0:name>
          <ns0:signature>composite_comparator(order: Order) ‚Üí Comparator</ns0:signature>
          <ns0:formal-definition format="latex">```
   composite_comparator(order: Order) ‚Üí Comparator
   = Œª(item1, item2):
       for (column, direction) in order:
         val1 := column.extract(item1)
         val2 := column.extract(item2)
         cmp := compare(val1, val2, column.type)
         if cmp ‚â† 0:
           return cmp ¬∑ (direction = Asc ? 1 : -1)
       return 0  // All keys equal</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Toggle Sort</ns0:name>
          <ns0:signature>toggle_sort(column: Column) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   toggle_sort(column: Column) ‚Üí Effect
   = if order[0].column = column:
       order[0].direction := flip(order[0].direction)
     else:
       order := [(column, Asc)] ++ order
     data := sort(data, order)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Clear Sort</ns0:name>
          <ns0:signature>clear_sort() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   clear_sort() ‚Üí Effect
   = order := []
     data := original_data</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Single Column</ns0:name>
          <ns0:signature>Click column header ‚Üí sort by that column</ns0:signature>
          <ns0:formal-definition format="latex">```
   Click column header ‚Üí sort by that column
   Click again ‚Üí reverse direction</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Multi-Column (Shift-Click)</ns0:name>
          <ns0:signature>Click column ‚Üí primary sort</ns0:signature>
          <ns0:formal-definition format="latex">```
   Click column ‚Üí primary sort
   Shift+Click another ‚Üí secondary sort
   Shift+Click third ‚Üí tertiary sort</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Drag to Reorder</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Drag column headers to specify sort priority
```
Name ‚ñ≤     (sorted ascending)
Price ‚ñº    (sorted descending)
Date       (not sorted)
Name ‚ñ≤(1) Price ‚ñº(2)  (multi-column with priority)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Data tables</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>File explorers</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Email clients</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Spreadsheets</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Admin panels</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P55" version="1.1">
      <ns0:metadata>
        <ns0:name>Virtualization Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$V = (data, viewport, item\_height, buffer, visible)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>data</ns0:name>
            <ns0:type>Sequence‚ü®Item‚ü©</ns0:type>
            <ns0:notation>data</ns0:notation>
            <ns0:description>full dataset</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>viewport</ns0:name>
            <ns0:type>Rectangle</ns0:type>
            <ns0:notation>viewport</ns0:notation>
            <ns0:description>visible area</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>item\_height</ns0:name>
            <ns0:type>Item ‚Üí ‚Ñù</ns0:type>
            <ns0:notation>item\_height</ns0:notation>
            <ns0:description>calculates item height</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>buffer</ns0:name>
            <ns0:type>‚Ñï</ns0:type>
            <ns0:notation>buffer</ns0:notation>
            <ns0:description>number of items to pre-render beyond viewport</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>visible</ns0:name>
            <ns0:type>Sequence‚ü®Item‚ü©</ns0:type>
            <ns0:notation>visible</ns0:notation>
            <ns0:description>currently rendered items</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P55.1">
          <ns0:name>Minimal Rendering</ns0:name>
          <ns0:formal-spec format="latex">|visible| ‚â™ |data|
Only render items in viewport ¬± buffer</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P55.2">
          <ns0:name>Scroll Performance</ns0:name>
          <ns0:formal-spec format="latex">scroll_event ‚Üí update_visible() completes in &lt; 16ms</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P55.3">
          <ns0:name>Memory Efficiency</ns0:name>
          <ns0:formal-spec format="latex">memory_usage = O(|visible|), not O(|data|)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P55.4">
          <ns0:name>Content Height</ns0:name>
          <ns0:formal-spec format="latex">total_height = ‚àë_{item ‚àà data} item_height(item)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Calculate Visible Items</ns0:name>
          <ns0:signature>calculate_visible(scroll_top: ‚Ñù) ‚Üí (start: ‚Ñï, end: ‚Ñï)</ns0:signature>
          <ns0:formal-definition format="latex">```
   calculate_visible(scroll_top: ‚Ñù) ‚Üí (start: ‚Ñï, end: ‚Ñï)
   = start_idx := binary_search(data, Œªi:
       cumulative_height(data[0:i]) ‚â• scroll_top - buffer_height
     )
     end_idx := binary_search(data, Œªi:
       cumulative_height(data[0:i]) ‚â• scroll_top + viewport.height + buffer_height
     )
     return (start_idx, end_idx)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Update On Scroll</ns0:name>
          <ns0:signature>on_scroll(scroll_top: ‚Ñù) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   on_scroll(scroll_top: ‚Ñù) ‚Üí Effect
   = (start, end) := calculate_visible(scroll_top)
     visible := data[start:end]
     offset := cumulative_height(data[0:start])
     render(visible, offset)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Handle Variable Heights</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   For variable item heights:
     - Maintain height cache: Map‚ü®‚Ñï, ‚Ñù‚ü©
     - Estimate unknown heights
     - Measure rendered items
     - Update cache and reflow if necessary
4. Fixed Height:**
```
   All items same height
   Simplest and most performant</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Variable Height (Estimated)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Estimate heights before rendering
   Adjust on actual measurement</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Dynamic Height</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Measure items as they render
   Maintain running height cache
   Update scroll container size
```
1. Overscan buffer:
   Render N items beyond viewport
   Reduces blank areas during fast scroll
2. Debounced updates:
   Wait œÑ ms after scroll stops
   Reduces re-renders during scroll
3. Recycled DOM:
   Reuse DOM nodes for different items
   Reduces GC pressure
4. Intersection Observer:
   Use native API for visibility detection
   Better performance than scroll events</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Large lists</ns0:name>
          <ns0:description>1000+ items</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Data grids</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Feed viewers</ns0:name>
          <ns0:description>social media</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Log viewers</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>File explorers</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P56" version="1.1">
      <ns0:metadata>
        <ns0:name>Cache Strategy Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$C = (storage, policy, ttl, evict)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>storage</ns0:name>
            <ns0:type>Map‚ü®Key, (Value, Metadata)‚ü©</ns0:type>
            <ns0:notation>storage</ns0:notation>
            <ns0:description>cache store</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>policy</ns0:name>
            <ns0:type>EvictionPolicy</ns0:type>
            <ns0:notation>policy</ns0:notation>
            <ns0:description>determines what to evict</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>ttl</ns0:name>
            <ns0:type>Key ‚Üí Duration</ns0:type>
            <ns0:notation>ttl</ns0:notation>
            <ns0:description>defines time-to-live</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>evict</ns0:name>
            <ns0:type>() ‚Üí Effect</ns0:type>
            <ns0:notation>evict</ns0:notation>
            <ns0:description>removes stale entries</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>EvictionPolicy</ns0:name>
          <ns0:definition format="latex">LRU | LFU | FIFO | TTL | Custom</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Metadata</ns0:name>
          <ns0:definition format="latex">(last_accessed: Time, access_count: ‚Ñï, inserted: Time)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Duration</ns0:name>
          <ns0:definition format="latex">‚Ñï  // milliseconds</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P56.1">
          <ns0:name>Bounded Size</ns0:name>
          <ns0:formal-spec format="latex">|storage| ‚â§ max_size</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P56.2">
          <ns0:name>Cache Hit</ns0:name>
          <ns0:formal-spec format="latex">get(key) ‚Üí O(1) if key ‚àà storage</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P56.3">
          <ns0:name>Automatic Eviction</ns0:name>
          <ns0:formal-spec format="latex">|storage| = max_size ‚àß insert(new_key) ‚Üí evict() ‚Üí insert(new_key)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Get (with Cache-Through)</ns0:name>
          <ns0:signature>get(key: Key, load: () ‚Üí Value) ‚Üí Value</ns0:signature>
          <ns0:formal-definition format="latex">```
   get(key: Key, load: () ‚Üí Value) ‚Üí Value
   = if key ‚àà storage ‚àß ¬¨expired(key):
       update_metadata(key)
       return storage[key].value
     else:
       value := load()
       set(key, value)
       return value</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Set</ns0:name>
          <ns0:signature>set(key: Key, value: Value) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   set(key: Key, value: Value) ‚Üí Effect
   = if |storage| = max_size:
       evict()
     storage[key] := (value, Metadata(now(), 0, now()))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Evict</ns0:name>
          <ns0:signature>evict() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   evict() ‚Üí Effect
   = victim := select_victim(policy)
     delete storage[victim]
   select_victim(LRU) = key with oldest last_accessed
   select_victim(LFU) = key with lowest access_count
   select_victim(TTL) = oldest expired key</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Cache-Aside</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Application checks cache
   On miss: load from DB, populate cache
   On hit: return cached value</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Read-Through</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Cache automatically loads on miss
   Application only talks to cache</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Write-Through</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Writes go to cache and DB simultaneously
   Ensures consistency</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Write-Behind</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Writes go to cache immediately
   Async writeback to DB
   Better write performance</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Browser cache</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>CDN caching</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Database query cache</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Computed value cache</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Image thumbnails</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P57" version="1.1">
      <ns0:metadata>
        <ns0:name>Data Migration Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$M = (versions, migrations, current, rollback)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>versions</ns0:name>
            <ns0:type>Sequence‚ü®Version‚ü©</ns0:type>
            <ns0:notation>versions</ns0:notation>
            <ns0:description>schema versions</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>migrations</ns0:name>
            <ns0:type>Map‚ü®(Version, Version), Migration‚ü©</ns0:type>
            <ns0:notation>migrations</ns0:notation>
            <ns0:description>define transitions</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>current</ns0:name>
            <ns0:type>Version</ns0:type>
            <ns0:notation>current</ns0:notation>
            <ns0:description>active version</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>rollback</ns0:name>
            <ns0:type>Migration ‚Üí Migration</ns0:type>
            <ns0:notation>rollback</ns0:notation>
            <ns0:description>reverses migrations</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Version</ns0:name>
          <ns0:definition format="latex">(number: ‚Ñï, schema: Schema)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Migration</ns0:name>
          <ns0:definition format="latex">(up: Data ‚Üí Data, down: Data ‚Üí Data)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Schema</ns0:name>
          <ns0:definition format="latex">description of data structure</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P57.1">
          <ns0:name>Bidirectionality</ns0:name>
          <ns0:formal-spec format="latex">‚àÄm ‚àà migrations: ‚àÉm‚Åª¬π: m‚Åª¬π(m(data)) = data</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P57.2">
          <ns0:name>Transactional</ns0:name>
          <ns0:formal-spec format="latex">Migration completes fully or rolls back</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P57.3">
          <ns0:name>Version Ordering</ns0:name>
          <ns0:formal-spec format="latex">versions totally ordered: v‚ÇÅ &lt; v‚ÇÇ &lt; v‚ÇÉ &lt; ...</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Migrate Up</ns0:name>
          <ns0:signature>migrate_up(target: Version) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   migrate_up(target: Version) ‚Üí Effect
   = while current &lt; target:
       migration := migrations[(current, next(current))]
       data := migration.up(data)
       current := next(current)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Migrate Down</ns0:name>
          <ns0:signature>migrate_down(target: Version) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   migrate_down(target: Version) ‚Üí Effect
   = while current &gt; target:
       migration := migrations[(prev(current), current)]
       data := migration.down(data)
       current := prev(current)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Create Migration</ns0:name>
          <ns0:signature>create_migration(from: Version, to: Version, up: Transform, down: Transform) ‚Üí Migration</ns0:signature>
          <ns0:formal-definition format="latex">```
   create_migration(from: Version, to: Version, up: Transform, down: Transform) ‚Üí Migration
   = Migration(up, down)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Additive (Safe)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Add new fields with defaults
   No data loss
   Can roll back easily</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Transformative</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Change field types or structure
   Requires data transformation
   Test rollback carefully</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Destructive (Dangerous)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Remove fields or tables
   Potential data loss
   Ensure backups</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Database schema migrations</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>API version upgrades</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>File format conversions</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Configuration updates</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P58" version="1.1">
      <ns0:metadata>
        <ns0:name>Authentication Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$A = (users, credentials, sessions, verify, tokens)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>users</ns0:name>
            <ns0:type>Map‚ü®UserID, User‚ü©</ns0:type>
            <ns0:notation>users</ns0:notation>
            <ns0:description>registered users</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>credentials</ns0:name>
            <ns0:type>Map‚ü®UserID, HashedPassword‚ü©</ns0:type>
            <ns0:notation>credentials</ns0:notation>
            <ns0:description>store credentials</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>sessions</ns0:name>
            <ns0:type>Map‚ü®SessionID, Session‚ü©</ns0:type>
            <ns0:notation>sessions</ns0:notation>
            <ns0:description>track active sessions</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>verify</ns0:name>
            <ns0:type>(UserID, Password) ‚Üí ùîπ</ns0:type>
            <ns0:notation>verify</ns0:notation>
            <ns0:description>validates credentials</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>tokens</ns0:name>
            <ns0:type>Map‚ü®Token, UserID‚ü©</ns0:type>
            <ns0:notation>tokens</ns0:notation>
            <ns0:description>map tokens to users</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>User</ns0:name>
          <ns0:definition format="latex">(id: UserID, username: String, email: String, roles: Set‚ü®Role‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>HashedPassword</ns0:name>
          <ns0:definition format="latex">String  // bcrypt, argon2, etc.</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Session</ns0:name>
          <ns0:definition format="latex">(id: SessionID, user: UserID, created: Time, expires: Time, data: Map‚ü®String,Value‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Token</ns0:name>
          <ns0:definition format="latex">String  // JWT, opaque token, etc.</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P58.1">
          <ns0:name>Secure Storage</ns0:name>
          <ns0:formal-spec format="latex">Passwords stored as secure hashes, never plaintext</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P58.2">
          <ns0:name>Session Expiration</ns0:name>
          <ns0:formal-spec format="latex">‚àÄsession ‚àà sessions: now() &gt; session.expires ‚áí invalid(session)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P58.3">
          <ns0:name>Token Security</ns0:name>
          <ns0:formal-spec format="latex">Tokens cryptographically signed and time-limited</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Register User</ns0:name>
          <ns0:signature>register(username: String, password: String, email: String) ‚Üí UserID</ns0:signature>
          <ns0:formal-definition format="latex">```
   register(username: String, password: String, email: String) ‚Üí UserID
   = user_id := generate_id()
     hashed := hash_password(password)
     users[user_id] := User(user_id, username, email, {})
     credentials[user_id] := hashed
     return user_id</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Authenticate</ns0:name>
          <ns0:signature>authenticate(username: String, password: String) ‚Üí Session | null</ns0:signature>
          <ns0:formal-definition format="latex">```
   authenticate(username: String, password: String) ‚Üí Session | null
   = user := find_user_by_username(username)
     if user = null:
       return null
     if verify_password(password, credentials[user.id]):
       session := create_session(user.id)
       sessions[session.id] := session
       return session
     else:
       return null</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Verify Password</ns0:name>
          <ns0:signature>verify_password(plain: String, hashed: HashedPassword) ‚Üí ùîπ</ns0:signature>
          <ns0:formal-definition format="latex">```
   verify_password(plain: String, hashed: HashedPassword) ‚Üí ùîπ
   = return hash_function(plain) = hashed</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Create Session</ns0:name>
          <ns0:signature>create_session(user_id: UserID) ‚Üí Session</ns0:signature>
          <ns0:formal-definition format="latex">```
   create_session(user_id: UserID) ‚Üí Session
   = session_id := generate_session_id()
     expires := now() + session_duration
     return Session(session_id, user_id, now(), expires, {})</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Validate Session</ns0:name>
          <ns0:signature>validate_session(session_id: SessionID) ‚Üí ùîπ</ns0:signature>
          <ns0:formal-definition format="latex">```
   validate_session(session_id: SessionID) ‚Üí ùîπ
   = if session_id ‚àâ sessions:
       return false
     session := sessions[session_id]
     if now() &gt; session.expires:
       delete sessions[session_id]
       return false
     return true</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Generate Token (JWT)</ns0:name>
          <ns0:signature>generate_token(user_id: UserID) ‚Üí Token</ns0:signature>
          <ns0:formal-definition format="latex">```
   generate_token(user_id: UserID) ‚Üí Token
   = payload := {
       user_id: user_id,
       issued_at: now(),
       expires_at: now() + token_ttl
     }
     token := sign(payload, secret_key)
     tokens[token] := user_id
     return token</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Session-Based</ns0:name>
          <ns0:signature>Login ‚Üí Create session ‚Üí Store session ID in cookie</ns0:signature>
          <ns0:formal-definition format="latex">```
   Login ‚Üí Create session ‚Üí Store session ID in cookie
   Subsequent requests send session ID
   Server validates session</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Token-Based (JWT)</ns0:name>
          <ns0:signature>Login ‚Üí Generate JWT ‚Üí Send to client</ns0:signature>
          <ns0:formal-definition format="latex">```
   Login ‚Üí Generate JWT ‚Üí Send to client
   Client includes JWT in Authorization header
   Server validates JWT signature</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>OAuth 2.0</ns0:name>
          <ns0:signature>Redirect to OAuth provider ‚Üí User authorizes</ns0:signature>
          <ns0:formal-definition format="latex">```
   Redirect to OAuth provider ‚Üí User authorizes
   Provider returns authorization code
   Exchange code for access token
   Use token for API requests</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Multi-Factor (MFA)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Password (something you know)
   + TOTP/SMS code (something you have)
   + Biometric (something you are)
```
- Use bcrypt/argon2 for password hashing
- Implement rate limiting on login attempts
- Use HTTPS for all authentication traffic
- Rotate tokens/sessions regularly
- Implement CSRF protection
- Use secure cookie flags (HttpOnly, Secure, SameSite)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>User login systems</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>API authentication</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>SSO</ns0:name>
          <ns0:description>Single Sign-On</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Multi-factor authentication</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P59" version="1.1">
      <ns0:metadata>
        <ns0:name>Authorization Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$Z = (subjects, objects, permissions, policies, check)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>subjects</ns0:name>
            <ns0:type>Set‚ü®Subject‚ü©</ns0:type>
            <ns0:notation>subjects</ns0:notation>
            <ns0:description>actors (users, services)</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>objects</ns0:name>
            <ns0:type>Set‚ü®Object‚ü©</ns0:type>
            <ns0:notation>objects</ns0:notation>
            <ns0:description>resources</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>permissions</ns0:name>
            <ns0:type>Set‚ü®Permission‚ü©</ns0:type>
            <ns0:notation>permissions</ns0:notation>
            <ns0:description>allowed actions</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>policies</ns0:name>
            <ns0:type>Subject \times Object \times Action ‚Üí \mathbb{B}</ns0:type>
            <ns0:notation>policies</ns0:notation>
            <ns0:description>define rules</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>check</ns0:name>
            <ns0:type>(Subject, Object, Action) ‚Üí \mathbb{B}</ns0:type>
            <ns0:notation>check</ns0:notation>
            <ns0:description>evaluates access</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Subject</ns0:name>
          <ns0:definition format="latex">User | Service | Group</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Object</ns0:name>
          <ns0:definition format="latex">Resource(id: ID, type: Type, owner: Subject)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Permission</ns0:name>
          <ns0:definition format="latex">(subject: Subject, object: Object, actions: Set‚ü®Action‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Action</ns0:name>
          <ns0:definition format="latex">Read | Write | Execute | Delete | Share | Admin</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Policy</ns0:name>
          <ns0:definition format="latex">(condition: Predicate, effect: Allow | Deny)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P59.1">
          <ns0:name>Least Privilege</ns0:name>
          <ns0:formal-spec format="latex">Default deny: access denied unless explicitly allowed</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P59.2">
          <ns0:name>Policy Evaluation</ns0:name>
          <ns0:formal-spec format="latex">Explicit deny overrides allow
Multiple policies combined with AND</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P59.3">
          <ns0:name>Inheritance</ns0:name>
          <ns0:formal-spec format="latex">Group permissions inherited by members
Parent resource permissions inherited by children</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Check Permission</ns0:name>
          <ns0:signature>check(subject: Subject, object: Object, action: Action) ‚Üí ùîπ</ns0:signature>
          <ns0:formal-definition format="latex">```
   check(subject: Subject, object: Object, action: Action) ‚Üí ùîπ
   = policies_applicable := filter(policies, Œªp: p.applies(subject, object, action))
     // Check for explicit deny
     if ‚àÉp ‚àà policies_applicable: p.effect = Deny:
       return false
     // Check for explicit allow
     if ‚àÉp ‚àà policies_applicable: p.effect = Allow:
       return true
     // Default deny
     return false</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Grant Permission</ns0:name>
          <ns0:signature>grant(subject: Subject, object: Object, actions: Set‚ü®Action‚ü©) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   grant(subject: Subject, object: Object, actions: Set‚ü®Action‚ü©) ‚Üí Effect
   = permission := Permission(subject, object, actions)
     permissions := permissions ‚à™ {permission}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Revoke Permission</ns0:name>
          <ns0:signature>revoke(subject: Subject, object: Object) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   revoke(subject: Subject, object: Object) ‚Üí Effect
   = permissions := permissions ‚àñ {p : p.subject = subject ‚àß p.object = object}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Evaluate Policy</ns0:name>
          <ns0:signature>evaluate_policy(policy: Policy, context: Context) ‚Üí Allow | Deny</ns0:signature>
          <ns0:formal-definition format="latex">```
   evaluate_policy(policy: Policy, context: Context) ‚Üí Allow | Deny
   = if policy.condition(context):
       return policy.effect
     else:
       return NotApplicable</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Role-Based Access Control (RBAC)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Users assigned to roles
   Roles have permissions
   user ‚Üí roles ‚Üí permissions ‚Üí resources
   Example:
     Admin role: can do everything
     Editor role: can read, write
     Viewer role: can read only</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Attribute-Based Access Control (ABAC)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Policies based on attributes of subject, object, environment
   Example:
     Allow if user.department = resource.department
     Allow if time_of_day between 9am and 5pm</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Access Control Lists (ACL)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Each resource has list of allowed subjects and actions
   Example:
     document123.acl = [
       (alice, Read|Write),
       (bob, Read),
       (admin_group, *)
     ]</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Ownership</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Resource owner has full control
   Owner can grant permissions to others
```
Policy 1: Owner full access
  condition: subject = object.owner
  effect: Allow all actions
Policy 2: Department access
  condition: subject.department = object.department
  effect: Allow Read
Policy 3: Admin access
  condition: subject.role = Admin
  effect: Allow all actions
Policy 4: Deny deleted users
  condition: subject.status = Deleted
  effect: Deny all actions</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>File permission systems</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>API authorization</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Database row-level security</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Cloud resource access</ns0:name>
          <ns0:description>AWS IAM</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P5" version="1.1">
      <ns0:metadata>
        <ns0:name>Tabbed Workspace</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$W = (tabs, active, buffers, state)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>tabs</ns0:name>
            <ns0:type>Sequence‚ü®Tab‚ü©</ns0:type>
            <ns0:notation>tabs</ns0:notation>
            <ns0:description>open tabs</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>active</ns0:name>
            <ns0:type>‚Ñï</ns0:type>
            <ns0:notation>active</ns0:notation>
            <ns0:description>active tab index</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>buffers</ns0:name>
            <ns0:type>Map‚ü®Tab, Content‚ü©</ns0:type>
            <ns0:notation>buffers</ns0:notation>
            <ns0:description>stores tab contents</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>state</ns0:name>
            <ns0:type>Map‚ü®Tab, State‚ü©</ns0:type>
            <ns0:notation>state</ns0:notation>
            <ns0:description>stores tab states (dirty, saved)</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P5.1">
          <ns0:name>Single Active Tab</ns0:name>
          <ns0:formal-spec format="latex">‚àÄt: active(t) = (t = tabs[active])</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P5.2">
          <ns0:name>Unsaved Warning</ns0:name>
          <ns0:formal-spec format="latex">close(tab) ‚àß dirty(tab) ‚Üí confirm("Unsaved changes. Close anyway?")</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P5.3">
          <ns0:name>Tab Persistence</ns0:name>
          <ns0:formal-spec format="latex">Application restart ‚Üí restore(tabs, active)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Open Tab</ns0:name>
          <ns0:signature>open(item: Item) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   open(item: Item) ‚Üí Effect
   = if ‚àÉtab: tab.item = item:
       activate(tab)
     else:
       tabs := tabs ++ [Tab(item)]
       buffers[tab] := load(item)
       activate(tab)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Switch Tab</ns0:name>
          <ns0:signature>switch(index: ‚Ñï) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   switch(index: ‚Ñï) ‚Üí Effect
   = save_state(tabs[active])
     active := index
     restore_state(tabs[index])
     focus(tabs[index])</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Close Tab</ns0:name>
          <ns0:signature>close(index: ‚Ñï) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   close(index: ‚Ñï) ‚Üí Effect
   = if dirty(tabs[index]):
       if confirm_close():
         remove(tabs, index)
         activate(max(0, index - 1))
     else:
       remove(tabs, index)
       activate(max(0, index - 1))</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Editor tabs</ns0:name>
          <ns0:description>VS Code</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Document tabs</ns0:name>
          <ns0:description>browsers</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Multi-file editing</ns0:name>
          <ns0:description>IDEs</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Chat tabs</ns0:name>
          <ns0:description>messaging apps</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P60" version="1.1">
      <ns0:metadata>
        <ns0:name>Input Sanitization Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (validators, sanitizers, encoders, rules)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>validators</ns0:name>
            <ns0:type>Map‚ü®InputType, Validator‚ü©</ns0:type>
            <ns0:notation>validators</ns0:notation>
            <ns0:description>check input validity</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>sanitizers</ns0:name>
            <ns0:type>Map‚ü®InputType, Sanitizer‚ü©</ns0:type>
            <ns0:notation>sanitizers</ns0:notation>
            <ns0:description>clean input</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>encoders</ns0:name>
            <ns0:type>Map‚ü®Context, Encoder‚ü©</ns0:type>
            <ns0:notation>encoders</ns0:notation>
            <ns0:description>encode for safe output</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>rules</ns0:name>
            <ns0:type>Set‚ü®SecurityRule‚ü©</ns0:type>
            <ns0:notation>rules</ns0:notation>
            <ns0:description>define security constraints</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>InputType</ns0:name>
          <ns0:definition format="latex">Text | HTML | SQL | URL | Email | ...</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Validator</ns0:name>
          <ns0:definition format="latex">Input ‚Üí ValidationResult</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Sanitizer</ns0:name>
          <ns0:definition format="latex">Input ‚Üí SanitizedInput</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Encoder</ns0:name>
          <ns0:definition format="latex">Input ‚Üí EncodedOutput</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>SecurityRule</ns0:name>
          <ns0:definition format="latex">(pattern: Regex, action: Block | Sanitize | Warn)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P60.1">
          <ns0:name>Defense in Depth</ns0:name>
          <ns0:formal-spec format="latex">Multiple layers: validate ‚Üí sanitize ‚Üí encode</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P60.2">
          <ns0:name>Whitelist Over Blacklist</ns0:name>
          <ns0:formal-spec format="latex">Allow known-good patterns rather than blocking known-bad</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P60.3">
          <ns0:name>Context-Appropriate Encoding</ns0:name>
          <ns0:formal-spec format="latex">HTML context ‚Üí HTML encode
SQL context ‚Üí Parameterized queries
URL context ‚Üí URL encode</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Validate Input</ns0:name>
          <ns0:signature>validate(input: Input, type: InputType) ‚Üí ValidationResult</ns0:signature>
          <ns0:formal-definition format="latex">```
   validate(input: Input, type: InputType) ‚Üí ValidationResult
   = validator := validators[type]
     result := validator(input)
     if result = Invalid:
       log_security_event("Invalid input", input, type)
     return result</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Sanitize Input</ns0:name>
          <ns0:signature>sanitize(input: Input, type: InputType) ‚Üí Input</ns0:signature>
          <ns0:formal-definition format="latex">```
   sanitize(input: Input, type: InputType) ‚Üí Input
   = sanitizer := sanitizers[type]
     return sanitizer(input)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Encode Output</ns0:name>
          <ns0:signature>encode(input: Input, context: Context) ‚Üí String</ns0:signature>
          <ns0:formal-definition format="latex">```
   encode(input: Input, context: Context) ‚Üí String
   = encoder := encoders[context]
     return encoder(input)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>XSS (Cross-Site Scripting)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Vulnerability: &lt;script&gt;alert('xss')&lt;/script&gt;
   Defense:
     - Validate: Allow only expected characters
     - Sanitize: Remove script tags
     - Encode: &amp;lt;script&amp;gt; in HTML context
   encode_html(text: String) ‚Üí String
   = replace(text, [
       ("&lt;", "&amp;lt;"),
       ("&gt;", "&amp;gt;"),
       ("&amp;", "&amp;amp;"),
       ("\"", "&amp;quot;"),
       ("'", "&amp;#x27;")
     ])</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>SQL Injection</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Vulnerability: '; DROP TABLE users; --
   Defense:
     - Use parameterized queries (prepared statements)
     - Never concatenate user input into SQL
     - Validate input type
   Safe:
     query = "SELECT * FROM users WHERE id = ?"
     execute(query, [user_input])
   Unsafe:
     query = "SELECT * FROM users WHERE id = " + user_input</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Path Traversal</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Vulnerability: ../../etc/passwd
   Defense:
     - Validate: Only allow alphanumeric + safe chars
     - Sanitize: Remove .. and /
     - Use whitelist of allowed paths
   sanitize_path(path: String) ‚Üí String
   = normalized := normalize(path)
     if contains(normalized, "..") ‚à® starts_with(normalized, "/"):
       throw SecurityException("Invalid path")
     return join(base_dir, normalized)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Command Injection</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Vulnerability: ; rm -rf /
   Defense:
     - Never pass user input to shell
     - Use language APIs instead of shell commands
     - Validate against whitelist
   Safe:
     delete_file(filename)  // Use API
   Unsafe:
     exec("rm " + filename)  // Shell command</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>LDAP Injection</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Vulnerability: *)(uid=*))(|(uid=*
   Defense:
     - Escape special characters: * ( ) \ / NUL
     - Use parameterized LDAP queries
   escape_ldap(input: String) ‚Üí String
   = replace(input, [
       ("*", "\\2a"),
       ("(", "\\28"),
       (")", "\\29"),
       ("\\", "\\5c"),
       ("/", "\\2f")
     ])
```
Email:
  pattern: ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
URL:
  pattern: ^https?://[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(/.*)?$
  validate_protocol: must be http or https
Username:
  pattern: ^[a-zA-Z0-9_-]{3,20}$
  length: 3-20 characters
  chars: alphanumeric, underscore, hyphen
Phone:
  pattern: ^\+?[1-9]\d{1,14}$
  format: E.164 international format</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Form input validation</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>API input sanitization</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Template rendering</ns0:name>
          <ns0:description>auto-escaping</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Database query builders</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P61" version="1.1">
      <ns0:metadata>
        <ns0:name>Unit Test Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$U = (sut, arrange, act, assert, cleanup)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>sut</ns0:name>
            <ns0:type>System</ns0:type>
            <ns0:notation>sut</ns0:notation>
            <ns0:description>**system under test** (unit being tested)</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>arrange</ns0:name>
            <ns0:type>() ‚Üí Context</ns0:type>
            <ns0:notation>arrange</ns0:notation>
            <ns0:description>sets up test preconditions</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>act</ns0:name>
            <ns0:type>Context ‚Üí Result</ns0:type>
            <ns0:notation>act</ns0:notation>
            <ns0:description>exercises the unit</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>assert</ns0:name>
            <ns0:type>Result ‚Üí \mathbb{B}</ns0:type>
            <ns0:notation>assert</ns0:notation>
            <ns0:description>verifies expectations</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>cleanup</ns0:name>
            <ns0:type>Context ‚Üí Effect</ns0:type>
            <ns0:notation>cleanup</ns0:notation>
            <ns0:description>tears down test state</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>System</ns0:name>
          <ns0:definition format="latex">Function | Class | Module</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Context</ns0:name>
          <ns0:definition format="latex">(mocks: Set‚ü®Mock‚ü©, fixtures: Set‚ü®Fixture‚ü©, state: State)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Mock</ns0:name>
          <ns0:definition format="latex">(target: Dependency, behavior: Specification)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Fixture</ns0:name>
          <ns0:definition format="latex">(data: Data, setup: () ‚Üí Effect, teardown: () ‚Üí Effect)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P61.1">
          <ns0:name>Isolation</ns0:name>
          <ns0:formal-spec format="latex">Unit tests run independently
No shared state between tests</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P61.2">
          <ns0:name>Fast Execution</ns0:name>
          <ns0:formal-spec format="latex">Unit tests complete in milliseconds
No I/O, network, or database</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P61.3">
          <ns0:name>Repeatability</ns0:name>
          <ns0:formal-spec format="latex">Same input ‚Üí same output (deterministic)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P61.4">
          <ns0:name>Single Assertion Focus</ns0:name>
          <ns0:formal-spec format="latex">Each test verifies one behavior
Clear failure messages</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Execute Test</ns0:name>
          <ns0:signature>execute_test(test: Test) ‚Üí TestResult</ns0:signature>
          <ns0:formal-definition format="latex">```
   execute_test(test: Test) ‚Üí TestResult
   = context := test.arrange()
     result := test.act(context)
     passed := test.assert(result)
     test.cleanup(context)
     return TestResult(passed, result, context)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Run Test Suite</ns0:name>
          <ns0:signature>run_suite(tests: Set‚ü®Test‚ü©) ‚Üí SuiteResult</ns0:signature>
          <ns0:formal-definition format="latex">```
   run_suite(tests: Set‚ü®Test‚ü©) ‚Üí SuiteResult
   = results := []
     for test in tests:
       result := execute_test(test)
       results := results ‚à™ {result}
     return SuiteResult(results, summary(results))</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Mock Dependency</ns0:name>
          <ns0:signature>mock(dependency: Dependency, behavior: Specification) ‚Üí Mock</ns0:signature>
          <ns0:formal-definition format="latex">```
   mock(dependency: Dependency, behavior: Specification) ‚Üí Mock
   = mock := Mock(dependency)
     configure(mock, behavior)
     return mock
```
test_addition() ‚Üí ùîπ
  // Arrange: Set up test data
  = calculator := Calculator()
    a := 2
    b := 3
    expected := 5
    // Act: Exercise the unit
    result := calculator.add(a, b)
    // Assert: Verify expectations
    assert(result = expected, "2 + 3 should equal 5")
    // Cleanup (if needed)
    cleanup()
```
Mock dependency behavior:
  mock_database := Mock(Database)
  mock_database.when(get_user(1)).then_return(User(1, "Alice"))
  service := UserService(mock_database)
  user := service.get_user(1)
  assert(user.name = "Alice")
  verify(mock_database.get_user).called_once_with(1)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Given-When-Then (BDD style)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   test_user_login()
     Given: user exists with username "alice" and password "secret"
     When: user logs in with correct credentials
     Then: login succeeds and session is created</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Table-Driven Tests</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   test_cases := [
     (input: 2, expected: 4),
     (input: 3, expected: 9),
     (input: 4, expected: 16)
   ]
   for (input, expected) in test_cases:
     result := square(input)
     assert(result = expected)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Parameterized Tests</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   @parameterized([
     (2, 3, 5),
     (10, 5, 15),
     (-1, 1, 0)
   ])
   test_addition(a, b, expected)
     result := add(a, b)
     assert(result = expected)
```
assert_equal(actual, expected)
assert_not_equal(actual, not_expected)
assert_true(condition)
assert_false(condition)
assert_null(value)
assert_not_null(value)
assert_contains(collection, item)
assert_raises(exception_type, callable)
assert_almost_equal(actual, expected, tolerance)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Unit tests</ns0:name>
          <ns0:description>pytest, Jest, JUnit</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>TDD</ns0:name>
          <ns0:description>Test-Driven Development</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Component tests</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Function tests</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P62" version="1.1">
      <ns0:metadata>
        <ns0:name>Integration Test Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$I = (components, interactions, environment, verify)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>components</ns0:name>
            <ns0:type>Set‚ü®Component‚ü©</ns0:type>
            <ns0:notation>components</ns0:notation>
            <ns0:description>integrated components</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>interactions</ns0:name>
            <ns0:type>Sequence‚ü®Interaction‚ü©</ns0:type>
            <ns0:notation>interactions</ns0:notation>
            <ns0:description>component communications</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>environment</ns0:name>
            <ns0:type>Environment</ns0:type>
            <ns0:notation>environment</ns0:notation>
            <ns0:description>test environment (DB, API, etc.)</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>verify</ns0:name>
            <ns0:type>() ‚Üí \mathbb{B}</ns0:type>
            <ns0:notation>verify</ns0:notation>
            <ns0:description>checks end-to-end behavior</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>Component</ns0:name>
          <ns0:definition format="latex">Service | Module | System</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Interaction</ns0:name>
          <ns0:definition format="latex">(from: Component, to: Component, message: Message)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Environment</ns0:name>
          <ns0:definition format="latex">(database: DB, services: Set‚ü®Service‚ü©, config: Config)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P62.1">
          <ns0:name>Multiple Components</ns0:name>
          <ns0:formal-spec format="latex">Tests interaction between ‚â•2 real components</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P62.2">
          <ns0:name>External Dependencies</ns0:name>
          <ns0:formal-spec format="latex">May use real databases, APIs, file systems
Or test doubles (test DB, mock APIs)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P62.3">
          <ns0:name>Slower Than Unit Tests</ns0:name>
          <ns0:formal-spec format="latex">Execution time: seconds (vs milliseconds for unit tests)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Setup Environment</ns0:name>
          <ns0:signature>setup_environment() ‚Üí Environment</ns0:signature>
          <ns0:formal-definition format="latex">```
   setup_environment() ‚Üí Environment
   = db := create_test_database()
     services := start_test_services()
     config := load_test_config()
     return Environment(db, services, config)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Execute Integration Test</ns0:name>
          <ns0:signature>execute_integration(test: IntegrationTest, env: Environment) ‚Üí TestResult</ns0:signature>
          <ns0:formal-definition format="latex">```
   execute_integration(test: IntegrationTest, env: Environment) ‚Üí TestResult
   = setup_data(env.database)
     result := test.run(env)
     verify_state(env)
     return result</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Teardown Environment</ns0:name>
          <ns0:signature>teardown(env: Environment) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   teardown(env: Environment) ‚Üí Effect
   = env.database.drop()
     env.services.stop()
     cleanup_test_data()
```
integration_test_user_registration()
  // Setup environment
  = test_db := create_test_database()
    api_client := create_api_client()
    email_service := create_mock_email_service()
    // Execute integration flow
    response := api_client.post("/register", {
      username: "newuser",
      email: "new@example.com",
      password: "secure123"
    })
    // Verify database state
    user := test_db.query("SELECT * FROM users WHERE username = ?", ["newuser"])
    assert(user ‚â† null)
    assert(user.email = "new@example.com")
    // Verify email sent
    assert(email_service.sent_count = 1)
    assert(email_service.last_email.to = "new@example.com")
    // Cleanup
    test_db.drop()</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Top-Down</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Test from UI/API downward
   Mock lower-level dependencies
   Gradually replace mocks with real implementations</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Bottom-Up</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Test lower-level components first
   Combine into higher-level tests
   Build up to full system</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Big Bang</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Integrate all components at once
   Test entire system
   Risky but fast</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Sandwich (Hybrid)</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Test top and bottom layers separately
   Integrate middle layer
   Combine all</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Stub</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Provides canned responses
   No verification
   email_stub := Stub(EmailService)
   email_stub.send() ‚Üí Success  // Always succeeds</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Mock</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Verifies interactions
   Records calls
   email_mock := Mock(EmailService)
   email_mock.send(to, subject, body)
   verify(email_mock.send).called_with("test@example.com", *, *)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Fake</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Working implementation with shortcuts
   Example: In-memory database
   fake_db := InMemoryDatabase()  // Real behavior, no persistence</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Spy</ns0:name>
          <ns0:signature/>
          <ns0:formal-definition format="latex">```
   Real object with recording
   Tracks method calls
   email_spy := Spy(RealEmailService)
   email_spy.send(...)  // Actually sends, but records call
   verify(email_spy.send).called()
```
1. In-Memory Database:
   test_db := SQLite(":memory:")
   Fast but limited features
2. Docker Container:
   test_db := Docker.run("postgres:13")
   Real DB, isolated, clean slate
3. Transaction Rollback:
   begin_transaction()
   run_test()
   rollback()  // Undo all changes
4. Fixtures:
   load_fixtures("test_data.sql")
   run_test()
   truncate_tables()</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>API integration tests</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Database integration tests</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Service-to-service tests</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>End-to-end user flows</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P63" version="1.1">
      <ns0:metadata>
        <ns0:name>End-to-End Test Pattern</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$E = (scenario, browser, pages, assertions, data)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>scenario</ns0:name>
            <ns0:type>UserStory</ns0:type>
            <ns0:notation>scenario</ns0:notation>
            <ns0:description>user scenario being tested</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>browser</ns0:name>
            <ns0:type>Browser</ns0:type>
            <ns0:notation>browser</ns0:notation>
            <ns0:description>automated browser</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>pages</ns0:name>
            <ns0:type>Map‚ü®String, PageObject‚ü©</ns0:type>
            <ns0:notation>pages</ns0:notation>
            <ns0:description>represent UI pages</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>assertions</ns0:name>
            <ns0:type>Sequence‚ü®Assertion‚ü©</ns0:type>
            <ns0:notation>assertions</ns0:notation>
            <ns0:description>verify expected outcomes</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>data</ns0:name>
            <ns0:type>TestData</ns0:type>
            <ns0:notation>data</ns0:notation>
            <ns0:description>test data for the scenario</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:type-definitions>
        <ns0:type-def>
          <ns0:name>UserStory</ns0:name>
          <ns0:definition format="latex">(actor: Actor, action: Action, outcome: Outcome)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Browser</ns0:name>
          <ns0:definition format="latex">(driver: WebDriver, capabilities: Set‚ü®Capability‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>PageObject</ns0:name>
          <ns0:definition format="latex">(locators: Map‚ü®String, Locator‚ü©, actions: Map‚ü®String, Action‚ü©)</ns0:definition>
        </ns0:type-def>
        <ns0:type-def>
          <ns0:name>Locator</ns0:name>
          <ns0:definition format="latex">CSS(selector: String) | XPath(expression: String) | ID(id: String)</ns0:definition>
        </ns0:type-def>
      </ns0:type-definitions>
      <ns0:properties>
        <ns0:property id="P.P63.1">
          <ns0:name>Full System</ns0:name>
          <ns0:formal-spec format="latex">Tests complete system from user perspective
Real browser, real UI, real backend</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P63.2">
          <ns0:name>User Scenarios</ns0:name>
          <ns0:formal-spec format="latex">Tests realistic user workflows
Example: Register ‚Üí Login ‚Üí Purchase ‚Üí Logout</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P63.3">
          <ns0:name>Slowest Tests</ns0:name>
          <ns0:formal-spec format="latex">Execution time: seconds to minutes
Run less frequently than unit/integration tests</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Launch Browser</ns0:name>
          <ns0:signature>launch_browser(config: BrowserConfig) ‚Üí Browser</ns0:signature>
          <ns0:formal-definition format="latex">```
   launch_browser(config: BrowserConfig) ‚Üí Browser
   = driver := create_webdriver(config.type, config.capabilities)
     browser := Browser(driver, config)
     return browser</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Execute Scenario</ns0:name>
          <ns0:signature>execute_scenario(scenario: UserStory, browser: Browser) ‚Üí TestResult</ns0:signature>
          <ns0:formal-definition format="latex">```
   execute_scenario(scenario: UserStory, browser: Browser) ‚Üí TestResult
   = pages := load_page_objects(browser)
     for step in scenario.steps:
       execute_step(step, pages, browser)
     results := verify_assertions(scenario.assertions)
     return TestResult(results)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Cleanup Session</ns0:name>
          <ns0:signature>cleanup(browser: Browser) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   cleanup(browser: Browser) ‚Üí Effect
   = browser.delete_cookies()
     browser.clear_local_storage()
     browser.quit()
```
Page objects encapsulate UI structure:
class LoginPage:
  locators = {
    username_input: CSS("#username"),
    password_input: CSS("#password"),
    login_button: CSS("button[type=submit]"),
    error_message: CSS(".error")
  }
  def login(username: String, password: String) ‚Üí Effect:
    this.find(username_input).type(username)
    this.find(password_input).type(password)
    this.find(login_button).click()
  def get_error() ‚Üí String:
    return this.find(error_message).text()
class DashboardPage:
  locators = {
    welcome_message: CSS(".welcome"),
    logout_button: CSS("#logout")
  }
  def is_displayed() ‚Üí ùîπ:
    return this.find(welcome_message).is_visible()
  def logout() ‚Üí Effect:
    this.find(logout_button).click()
```
e2e_test_user_login_flow()
  // Setup
  = browser := launch_browser(Chrome)
    test_user := create_test_user("testuser", "password123")
    // Navigate to login page
    login_page := LoginPage(browser)
    browser.navigate("https://app.example.com/login")
    // Execute login
    login_page.login("testuser", "password123")
    // Verify redirect to dashboard
    dashboard := DashboardPage(browser)
    assert(dashboard.is_displayed())
    assert(contains(dashboard.welcome_message, "Welcome, testuser"))
    // Execute logout
    dashboard.logout()
    // Verify redirect to login
    assert(login_page.is_displayed())
    // Cleanup
    delete_test_user(test_user)
    browser.quit()
```
Browser actions:
  - navigate(url)
  - refresh()
  - back()
  - forward()
  - take_screenshot()
  - execute_script(js)
Element actions:
  - find(locator) ‚Üí Element
  - click()
  - type(text)
  - clear()
  - submit()
  - select(option)
  - hover()
  - drag_and_drop(source, target)
Waits:
  - wait_for_element(locator, timeout)
  - wait_for_visibility(element, timeout)
  - wait_for_text(element, text, timeout)
  - wait_for_url(url, timeout)
Assertions:
  - assert_visible(element)
  - assert_text(element, expected)
  - assert_url(expected)
  - assert_title(expected)
  - assert_element_count(locator, count)
```
1. Use Page Objects:
   Encapsulate page structure
   Reusable across tests
   Easier maintenance
2. Explicit Waits:
   Wait for specific conditions
   Don't use sleep()
   Handle async behavior
3. Independent Tests:
   Each test starts from clean state
   No dependencies between tests
   Can run in any order
4. Minimize Test Data:
   Use minimum data needed
   Clean up after test
   Avoid shared test data
5. Stable Locators:
   Use IDs or data attributes
   Avoid brittle CSS selectors
   Don't rely on text content
Test Environments:**
```
Headless mode:
  browser := Chrome(headless=true)
  Faster, no GUI
  Good for CI/CD
Grid/Cloud:
  Run tests on multiple browsers in parallel
  Selenium Grid, BrowserStack, Sauce Labs
Docker:
  Consistent environment
  Isolated tests
  Easy CI/CD integration</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>UI automation</ns0:name>
          <ns0:description>Selenium, Playwright, Cypress</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Acceptance tests</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Smoke tests</ns0:name>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Regression tests</ns0:name>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P6" version="1.1">
      <ns0:metadata>
        <ns0:name>Palette/Toolbar</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$P = (tools, active, mode, layout)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>tools</ns0:name>
            <ns0:type>Set‚ü®Tool‚ü©</ns0:type>
            <ns0:notation>tools</ns0:notation>
            <ns0:description>available tools</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>active</ns0:name>
            <ns0:type>Tool | null</ns0:type>
            <ns0:notation>active</ns0:notation>
            <ns0:description>active tool</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>mode</ns0:name>
            <ns0:type>\{\text{exclusive}, \text{multi}\}</ns0:type>
            <ns0:notation>mode</ns0:notation>
            <ns0:description>determines selection mode</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>layout</ns0:name>
            <ns0:type>\{\text{horizontal}, \text{vertical}, \text{grid}\}</ns0:type>
            <ns0:notation>layout</ns0:notation>
            <ns0:description>visual layout</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P6.1">
          <ns0:name>Modal Exclusivity</ns0:name>
          <ns0:formal-spec format="latex">mode = exclusive ‚áí |{t ‚àà tools : active(t)}| ‚â§ 1</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P6.2">
          <ns0:name>Tool Application</ns0:name>
          <ns0:formal-spec format="latex">active(tool) ‚àß interact(canvas) ‚Üí apply(tool, interaction)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P6.3">
          <ns0:name>Keyboard Shortcuts</ns0:name>
          <ns0:formal-spec format="latex">‚àÄt ‚àà tools: ‚àÉshortcut: key(shortcut) ‚Üí activate(t)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Select Tool</ns0:name>
          <ns0:signature>select(tool: Tool) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   select(tool: Tool) ‚Üí Effect
   = if mode = exclusive:
       active := {tool}
     else:
       active := active ‚à™ {tool}
     cursor := tool.cursor</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Apply Tool</ns0:name>
          <ns0:signature>apply(tool: Tool, event: Event) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   apply(tool: Tool, event: Event) ‚Üí Effect
   = tool.handler(event)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Deselect</ns0:name>
          <ns0:signature>deselect() ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   deselect() ‚Üí Effect
   = active := null
     cursor := default</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Drawing tools</ns0:name>
          <ns0:description>Figma</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Code actions</ns0:name>
          <ns0:description>VS Code</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Sketch tools</ns0:name>
          <ns0:description>CAD</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Formatting toolbar</ns0:name>
          <ns0:description>Word</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P7" version="1.1">
      <ns0:metadata>
        <ns0:name>Breadcrumb Trail</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$B = (path, separators, actions)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>path</ns0:name>
            <ns0:type>Sequence‚ü®Node‚ü©</ns0:type>
            <ns0:notation>path</ns0:notation>
            <ns0:description>current location path</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>separators</ns0:name>
            <ns0:type>String</ns0:type>
            <ns0:notation>separators</ns0:notation>
            <ns0:description>visual separators (e.g., " / ")</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>actions</ns0:name>
            <ns0:type>Node ‚Üí Effect</ns0:type>
            <ns0:notation>actions</ns0:notation>
            <ns0:description>defines click behavior</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P7.1">
          <ns0:name>Hierarchical Path</ns0:name>
          <ns0:formal-spec format="latex">path = [root, child‚ÇÅ, child‚ÇÇ, ..., current]
where child·µ¢ ‚àà children(child·µ¢‚Çã‚ÇÅ)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P7.2">
          <ns0:name>Clickable Ancestors</ns0:name>
          <ns0:formal-spec format="latex">‚àÄn ‚àà path: click(n) ‚Üí navigate_to(n)</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P7.3">
          <ns0:name>Auto-Update</ns0:name>
          <ns0:formal-spec format="latex">navigate(new_location) ‚Üí path := compute_path(root, new_location)</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Compute Path</ns0:name>
          <ns0:signature>compute_path(root: Node, target: Node) ‚Üí Sequence‚ü®Node‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   compute_path(root: Node, target: Node) ‚Üí Sequence‚ü®Node‚ü©
   = if target = root:
       [root]
     else:
       compute_path(root, parent(target)) ++ [target]</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Navigate</ns0:name>
          <ns0:signature>navigate(node: Node) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   navigate(node: Node) ‚Üí Effect
   = set_location(node)
     path := compute_path(root, node)
     render(breadcrumb)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>File path</ns0:name>
          <ns0:description>OS, web</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Navigation chain</ns0:name>
          <ns0:description>multi-step processes</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Context path</ns0:name>
          <ns0:description>hierarchical views</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P8" version="1.1">
      <ns0:metadata>
        <ns0:name>Search-Based Navigation</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$S = (query, index, results, ranker)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>query</ns0:name>
            <ns0:type>String</ns0:type>
            <ns0:notation>query</ns0:notation>
            <ns0:description>search query</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>index</ns0:name>
            <ns0:type>Index‚ü®Item‚ü©</ns0:type>
            <ns0:notation>index</ns0:notation>
            <ns0:description>searchable index</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>results</ns0:name>
            <ns0:type>Sequence‚ü®Item‚ü©</ns0:type>
            <ns0:notation>results</ns0:notation>
            <ns0:description>ranked results</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>ranker</ns0:name>
            <ns0:type>(Item, String) ‚Üí ‚Ñù</ns0:type>
            <ns0:notation>ranker</ns0:notation>
            <ns0:description>scores relevance</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P8.1">
          <ns0:name>Real-Time Results</ns0:name>
          <ns0:formal-spec format="latex">type(query[0..n]) ‚Üí results updated within 100ms</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P8.2">
          <ns0:name>Fuzzy Matching</ns0:name>
          <ns0:formal-spec format="latex">query = "fle" matches "file", "filter", "flexible"</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P8.3">
          <ns0:name>Ranking</ns0:name>
          <ns0:formal-spec format="latex">results sorted by ranker(item, query) descending</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Search</ns0:name>
          <ns0:signature>search(q: String) ‚Üí Sequence‚ü®Item‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   search(q: String) ‚Üí Sequence‚ü®Item‚ü©
   = candidates := fuzzy_match(index, q)
     scores := map(candidates, Œªitem: ranker(item, q))
     sort(zip(candidates, scores), by: score, desc)
     ‚Üí take(20)</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Update Index</ns0:name>
          <ns0:signature>index(items: Set‚ü®Item‚ü©) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   index(items: Set‚ü®Item‚ü©) ‚Üí Effect
   = for item in items:
       tokens := tokenize(item)
       for token in tokens:
         inverted_index[token] := inverted_index[token] ‚à™ {item}</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Rank</ns0:name>
          <ns0:signature>ranker(item: Item, query: String) ‚Üí ‚Ñù</ns0:signature>
          <ns0:formal-definition format="latex">```
   ranker(item: Item, query: String) ‚Üí ‚Ñù
   = w‚ÇÅ¬∑string_similarity(item.name, query)
     + w‚ÇÇ¬∑recency_score(item.timestamp)
     + w‚ÇÉ¬∑frequency_score(item.access_count)</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>File search</ns0:name>
          <ns0:description>Spotlight, Everything</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Theorem search</ns0:name>
          <ns0:description>Lean libraries</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Command palette</ns0:name>
          <ns0:description>editors</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Symbol search</ns0:name>
          <ns0:description>code navigation</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
    <ns0:pattern id="P9" version="1.1">
      <ns0:metadata>
        <ns0:name>Backlinks/References</ns0:name>
        <ns0:category>pattern</ns0:category>
        <ns0:status>stable</ns0:status>
        <ns0:complexity>medium</ns0:complexity>
      </ns0:metadata>
      <ns0:definition>
        <ns0:tuple-notation format="latex">$L = (forward_links, reverse_index, display)$</ns0:tuple-notation>
        <ns0:components>
          <ns0:component>
            <ns0:name>forward_links</ns0:name>
            <ns0:type>Map‚ü®Item, Set‚ü®Item‚ü©‚ü©</ns0:type>
            <ns0:notation>forward_links</ns0:notation>
            <ns0:description>explicit links</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>reverse_index</ns0:name>
            <ns0:type>Map‚ü®Item, Set‚ü®Item‚ü©‚ü©</ns0:type>
            <ns0:notation>reverse_index</ns0:notation>
            <ns0:description>backlinks</ns0:description>
          </ns0:component>
          <ns0:component>
            <ns0:name>display</ns0:name>
            <ns0:type>Item ‚Üí Component</ns0:type>
            <ns0:notation>display</ns0:notation>
            <ns0:description>renders link panel</ns0:description>
          </ns0:component>
        </ns0:components>
      </ns0:definition>
      <ns0:properties>
        <ns0:property id="P.P9.1">
          <ns0:name>Symmetry</ns0:name>
          <ns0:formal-spec format="latex">item‚ÇÅ ‚àà forward_links[item‚ÇÇ] ‚áî item‚ÇÇ ‚àà reverse_index[item‚ÇÅ]</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P9.2">
          <ns0:name>Bidirectional Navigation</ns0:name>
          <ns0:formal-spec format="latex">view(item) ‚Üí display backlinks and forward links</ns0:formal-spec>
        </ns0:property>
        <ns0:property id="P.P9.3">
          <ns0:name>Auto-Update</ns0:name>
          <ns0:formal-spec format="latex">add_link(A, B) ‚Üí reverse_index[B] := reverse_index[B] ‚à™ {A}</ns0:formal-spec>
        </ns0:property>
      </ns0:properties>
      <ns0:operations>
        <ns0:operation>
          <ns0:name>Get Backlinks</ns0:name>
          <ns0:signature>backlinks(item: Item) ‚Üí Set‚ü®Item‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   backlinks(item: Item) ‚Üí Set‚ü®Item‚ü©
   = reverse_index[item] | ‚àÖ</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Get Forward Links</ns0:name>
          <ns0:signature>forward_links(item: Item) ‚Üí Set‚ü®Item‚ü©</ns0:signature>
          <ns0:formal-definition format="latex">```
   forward_links(item: Item) ‚Üí Set‚ü®Item‚ü©
   = forward_links[item] | ‚àÖ</ns0:formal-definition>
        </ns0:operation>
        <ns0:operation>
          <ns0:name>Update Index</ns0:name>
          <ns0:signature>update_index(item: Item, links: Set‚ü®Item‚ü©) ‚Üí Effect</ns0:signature>
          <ns0:formal-definition format="latex">```
   update_index(item: Item, links: Set‚ü®Item‚ü©) ‚Üí Effect
   = old_links := forward_links[item]
     removed := old_links ‚àñ links
     added := links ‚àñ old_links
     for r in removed:
       reverse_index[r] := reverse_index[r] ‚àñ {item}
     for a in added:
       reverse_index[a] := reverse_index[a] ‚à™ {item}
     forward_links[item] := links</ns0:formal-definition>
        </ns0:operation>
      </ns0:operations>
      <ns0:manifestations>
        <ns0:manifestation>
          <ns0:name>Backlinks panel</ns0:name>
          <ns0:description>Roam Research, Obsidian</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>References</ns0:name>
          <ns0:description>IDEs</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Usages</ns0:name>
          <ns0:description>code analysis</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Dependencies</ns0:name>
          <ns0:description>package managers</ns0:description>
        </ns0:manifestation>
        <ns0:manifestation>
          <ns0:name>Citations</ns0:name>
          <ns0:description>academic papers</ns0:description>
        </ns0:manifestation>
      </ns0:manifestations>
    </ns0:pattern>
  </patterns>
</universal-corpus>