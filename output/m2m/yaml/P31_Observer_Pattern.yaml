id: P31
version: '1.1'
schema_version: '1.0'
metadata:
  name: Observer Pattern
  category: pattern
  status: stable
  complexity: medium
  domains: []
definition:
  tuple_notation: $O = (subject, observers, notify)$
  description: ''
  components:
  - name: subject
    type: Subject
    notation: subject
    description: observed object
  - name: observers
    type: Set⟨Observer⟩
    notation: observers
    description: listeners
  - name: notify
    type: () → Effect
    notation: notify
    description: notifies all observers
type_definitions:
- name: Subject
  definition: '(state: State, attach: Observer → Effect, detach: Observer → Effect)'
  notation: 'Subject := (state: State, attach: Observer → Effect, detach: Observer → Effect)'
- name: Observer
  definition: '(update: State → Effect)'
  notation: 'Observer := (update: State → Effect)'
properties:
- id: P.P31.1
  name: Loose Coupling
  formal_spec: 'Subject doesn''t know observer details

    Observers independent of each other'
  description: ''
  invariants: []
- id: P.P31.2
  name: Automatic Updates
  formal_spec: subject.state changes → notify_all_observers()
  description: ''
  invariants: []
operations:
- name: Attach Observer
  signature: 'attach(observer: Observer) → Effect'
  formal_definition: "```\n   attach(observer: Observer) → Effect\n   = observers := observers ∪ {observer}"
  preconditions: []
  postconditions: []
  effects: []
- name: Detach Observer
  signature: 'detach(observer: Observer) → Effect'
  formal_definition: "```\n   detach(observer: Observer) → Effect\n   = observers := observers ∖ {observer}"
  preconditions: []
  postconditions: []
  effects: []
- name: Notify
  signature: notify() → Effect
  formal_definition: "```\n   notify() → Effect\n   = for observer in observers:\n       observer.update(subject.state)"
  preconditions: []
  postconditions: []
  effects: []
manifestations:
- name: Data binding
  description: ''
- name: Event listeners
  description: ''
- name: Reactive subscriptions
  description: ''
- name: Pub/sub systems
  description: ''
