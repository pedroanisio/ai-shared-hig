id: P1
version: '1.1'
schema_version: '1.0'
metadata:
  name: Direct Manipulation Canvas
  category: pattern
  status: stable
  complexity: medium
  domains: []
definition:
  tuple_notation: $C = (viewport, objects, cursor, tools, state)$
  description: ''
  components:
  - name: viewport
    type: Rectangle
    notation: viewport
    description: visible area
  - name: objects
    type: Set⟨Element⟩
    notation: objects
    description: manipulable objects
  - name: cursor
    type: Point
    notation: cursor
    description: current cursor position
  - name: tools
    type: Set⟨Tool⟩
    notation: tools
    description: available interaction tools
  - name: state
    type: σ_1 ∈ \{\text{idle}, \text{dragging},
    notation: state
    description: \text{selecting}\}$
type_definitions: []
properties:
- id: P.P1.1
  name: WYSIWYG
  formal_spec: '∀o ∈ objects: visual(o) = semantic(o)

    Changes to visual representation directly modify semantic content.'
  description: ''
  invariants: []
- id: P.P1.2
  name: Direct Feedback
  formal_spec: gesture(t) → update_visual(t + ε) where ε < 16ms (60fps)
  description: ''
  invariants: []
- id: P.P1.3
  name: Object Selection
  formal_spec: 'click(p) → select({o ∈ objects : p ∈ bounds(o)})'
  description: ''
  invariants: []
operations:
- name: Interpret Gesture
  signature: 'interpret(gesture: Gesture) → Action'
  formal_definition: "```\n   interpret(gesture: Gesture) → Action\n   = case gesture of\n       Click(p)\
    \ → Select(objectAt(p))\n       Drag(p₁, p₂) → Move(selected, p₂ - p₁)\n       Scroll(Δ) → Pan(viewport,\
    \ Δ)\n2. **Update Visual:\n```\n   update(objects: Set⟨Element⟩) → Effect\n   = render(objects) ;\
    \ invalidate(viewport)\n3. Persist Changes:**\n```\n   persist(objects: Set⟨Element⟩) → Effect\n \
    \  = save_to_storage(objects) ; notify_observers(objects)"
  preconditions: []
  postconditions: []
  effects: []
manifestations:
- name: Graph editor
  description: knowledge graphs
- name: 3D viewport
  description: CAD
- name: Drawing canvas
  description: vector graphics
- name: Visual editor
  description: page builders
- name: Diagram editors
  description: ''
