id: C2
version: '1.1'
schema_version: '1.0'
metadata:
  name: Document/Artifact
  category: concept
  status: stable
  complexity: medium
  domains: []
definition:
  tuple_notation: $D = (id, content, metadata, version)$
  description: ''
  components:
  - name: id
    type: ID
    notation: id
    description: unique identifier
  - name: content
    type: Content
    notation: content
    description: document body
  - name: metadata
    type: Metadata
    notation: metadata
    description: key-value properties
  - name: version
    type: Version
    notation: version
    description: version information
type_definitions: []
properties:
- id: P.C2.1
  name: Editability
  formal_spec: 'edit(D, Δ) → D''

    where Δ : Delta and D''.version.number = D.version.number + 1'
  description: ''
  invariants: []
- id: P.C2.2
  name: Versionability
  formal_spec: '∀t: ∃D'': checkout(D, t) = D''

    where D''.version.timestamp = t'
  description: ''
  invariants: []
- id: P.C2.3
  name: Serializability
  formal_spec: deserialize(serialize(D)) = D
  description: ''
  invariants: []
operations:
- name: Edit
  signature: 'edit(D: Document, Δ: Delta) → Document'
  formal_definition: "```\n   edit(D: Document, Δ: Delta) → Document\n   = D' where D'.content = apply(D.content,\
    \ Δ)\n            ∧ D'.version = next_version(D.version, Δ)"
  preconditions: []
  postconditions: []
  effects: []
- name: Checkout Version
  signature: 'checkout(D: Document, v: Version) → Document'
  formal_definition: "```\n   checkout(D: Document, v: Version) → Document\n   = D' where D'.content =\
    \ reconstruct(D.history, v)"
  preconditions: []
  postconditions: []
  effects: []
- name: Merge
  signature: 'merge(D₁: Document, D₂: Document) → Document | Conflict'
  formal_definition: "```\n   merge(D₁: Document, D₂: Document) → Document | Conflict\n   = three-way\
    \ merge with common ancestor"
  preconditions: []
  postconditions: []
  effects: []
manifestations:
- name: Text documents
  description: Markdown, Word
- name: Source code files
  description: ''
- name: Proofs
  description: Lean, Coq
- name: CAD models
  description: parametric designs
- name: Content blocks
  description: CMS
