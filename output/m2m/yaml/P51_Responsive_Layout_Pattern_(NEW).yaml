id: P51
version: '1.1'
schema_version: '1.0'
metadata:
  name: Responsive Layout Pattern (NEW)
  category: pattern
  status: stable
  complexity: medium
  domains: []
definition:
  tuple_notation: $L = (breakpoints, layouts, current)$
  description: ''
  components:
  - name: breakpoints
    type: 'Sequence‚ü®(width: ‚Ñù, name: String)‚ü©'
    notation: breakpoints
    description: define size thresholds
  - name: layouts
    type: Map‚ü®String, Layout‚ü©
    notation: layouts
    description: map breakpoint names to layouts
  - name: current
    type: String
    notation: current
    description: active layout name
type_definitions:
- name: Breakpoint
  definition: '(width: ‚Ñù, name: String)'
  notation: 'Breakpoint := (width: ‚Ñù, name: String)'
- name: Layout
  definition: '(structure: Component, visibility: Map‚ü®Element, ùîπ‚ü©)'
  notation: 'Layout := (structure: Component, visibility: Map‚ü®Element, ùîπ‚ü©)'
properties:
- id: P.P51.1
  name: Breakpoint Selection
  formal_spec: 'current = max{bp.name : bp.width ‚â§ viewport.width}'
  description: ''
  invariants: []
- id: P.P51.2
  name: Layout Activation
  formal_spec: viewport changes ‚Üí update_current() ‚Üí apply(layouts[current])
  description: ''
  invariants: []
- id: P.P51.3
  name: Mobile-First
  formal_spec: 'breakpoints ordered: mobile < tablet < desktop < wide'
  description: ''
  invariants: []
operations:
- name: Select Layout
  signature: 'select_layout(width: ‚Ñù) ‚Üí String'
  formal_definition: "```\n   select_layout(width: ‚Ñù) ‚Üí String\n   = find_last(breakpoints, Œªbp: bp.width\
    \ ‚â§ width).name"
  preconditions: []
  postconditions: []
  effects: []
- name: Apply Layout
  signature: 'apply(layout: Layout) ‚Üí Effect'
  formal_definition: "```\n   apply(layout: Layout) ‚Üí Effect\n   = structure := layout.structure\n   \
    \  for (element, visible) in layout.visibility:\n       element.visible := visible\n     reflow()"
  preconditions: []
  postconditions: []
  effects: []
- name: Register Breakpoint
  signature: 'register(bp: Breakpoint, layout: Layout) ‚Üí Effect'
  formal_definition: "```\n   register(bp: Breakpoint, layout: Layout) ‚Üí Effect\n   = breakpoints := insert_sorted(breakpoints,\
    \ bp)\n     layouts[bp.name] := layout\n```\nmobile:  < 640px\ntablet:  640px - 1024px\ndesktop: 1024px\
    \ - 1440px\nwide:    ‚â• 1440px"
  preconditions: []
  postconditions: []
  effects: []
- name: Collapsing Navigation
  signature: ''
  formal_definition: "```\n   mobile: P43(collapsed)\n   desktop: P43(pinned)"
  preconditions: []
  postconditions: []
  effects: []
- name: Column Reflow
  signature: ''
  formal_definition: "```\n   mobile: 1 column\n   tablet: 2 columns\n   desktop: 3 columns"
  preconditions: []
  postconditions: []
  effects: []
- name: Component Swap
  signature: ''
  formal_definition: "```\n   mobile: Compact cards\n   desktop: Expanded cards with details"
  preconditions: []
  postconditions: []
  effects: []
manifestations:
- name: Responsive web apps
  description: ''
- name: Mobile-first design
  description: ''
- name: Adaptive interfaces
  description: ''
- name: Cross-device layouts
  description: ''
