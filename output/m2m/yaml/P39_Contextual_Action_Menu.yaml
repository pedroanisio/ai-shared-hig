id: P39
version: '1.1'
schema_version: '1.0'
metadata:
  name: Contextual Action Menu
  category: pattern
  status: stable
  complexity: medium
  domains: []
definition:
  tuple_notation: $M = (T, C, A, \pi_{39}, \sigma_{39}, \delta_{39})$
  description: ''
  components:
  - name: \pi_{39}
    type: A \times C → \{\text{visible}, \text{hidden}, \text{disabled}\}
    notation: \pi_{39}
    description: '**availability**'
  - name: \sigma_{39}
    type: M → \{\text{open}, \text{closed}\}
    notation: \sigma_{39}
    description: '**state**'
  - name: \delta_{39}
    type: M → \mathbb{R}^2
    notation: \delta_{39}
    description: '**positioning function**'
type_definitions: []
properties:
- id: P.P39.1
  name: Context Dependency
  formal_spec: '∀a ∈ A: π₃₉(a, C) determines visibility'
  description: ''
  invariants: []
- id: P.P39.2
  name: Mutual Exclusivity
  formal_spec: '∀m₁, m₂ ∈ Menus: m₁ ≠ m₂ ⇒ ¬(σ₃₉(m₁) = open ∧ σ₃₉(m₂) = open)'
  description: ''
  invariants: []
- id: P.P39.3
  name: Auto-Dismiss
  formal_spec: σ₃₉(M) = open ∧ click(outside(M)) ⇒ σ₃₉(M) := closed
  description: ''
  invariants: []
operations:
- name: Open Menu
  signature: 'open(T: Element, C: Context) → Effect'
  formal_definition: "```\n   open(T: Element, C: Context) → Effect\n   = σ₃₉ := open\n     position :=\
    \ δ₃₉(T, viewport)\n     actions_visible := filter(A, λa: π₃₉(a, C) ≠ hidden)\n     render(M, position,\
    \ actions_visible)"
  preconditions: []
  postconditions: []
  effects: []
- name: Execute Action
  signature: 'execute(a: Action) → Effect'
  formal_definition: "```\n   execute(a: Action) → Effect\n   = if π₃₉(a, C) ≠ disabled:\n       perform(a,\
    \ C)\n       σ₃₉ := closed"
  preconditions: []
  postconditions: []
  effects: []
manifestations:
- name: Three-dot menu
  description: ''
- name: Right-click context menu
  description: ''
- name: Kebab menu
  description: ⋮
- name: More actions dropdown
  description: ''
