id: P49
version: '1.1'
schema_version: '1.0'
metadata:
  name: Multi-Step Form (Wizard) Pattern
  category: pattern
  status: stable
  complexity: medium
  domains: []
definition:
  tuple_notation: $W = (steps, current, data, nav, progress)$
  description: ''
  components:
  - name: steps
    type: Sequence‚ü®Step‚ü©
    notation: steps
    description: form steps
  - name: current
    type: ‚Ñï
    notation: current
    description: active step index
  - name: data
    type: Map‚ü®String, Value‚ü©
    notation: data
    description: accumulates form data
  - name: nav
    type: Navigation
    notation: nav
    description: controls step transitions
  - name: progress
    type: ‚Ñï/‚Ñï
    notation: progress
    description: shows completion progress
type_definitions:
- name: Step
  definition: '(title: String, fields: Set‚ü®Field‚ü©, validate: () ‚Üí ùîπ)'
  notation: 'Step := (title: String, fields: Set‚ü®Field‚ü©, validate: () ‚Üí ùîπ)'
- name: Navigation
  definition: '{prev: () ‚Üí Effect, next: () ‚Üí Effect, goto: ‚Ñï ‚Üí Effect}'
  notation: 'Navigation := {prev: () ‚Üí Effect, next: () ‚Üí Effect, goto: ‚Ñï ‚Üí Effect}'
properties:
- id: P.P49.1
  name: Sequential Progress
  formal_spec: can_advance(step) ‚áî valid(steps[current])
  description: ''
  invariants: []
- id: P.P49.2
  name: Data Accumulation
  formal_spec: complete(step_i) ‚áí data := data ‚à™ extract_values(step_i)
  description: ''
  invariants: []
- id: P.P49.3
  name: State Persistence
  formal_spec: 'Navigate away ‚Üí persist(data, current)

    Return ‚Üí restore(data, current)'
  description: ''
  invariants: []
- id: P.P49.4
  name: Non-Linear Navigation
  formal_spec: '‚àÄi < current: can_goto(i)  // Can revisit completed steps'
  description: ''
  invariants: []
operations:
- name: Next Step
  signature: next() ‚Üí Effect
  formal_definition: "```\n   next() ‚Üí Effect\n   = if validate(steps[current]):\n       data := data\
    \ ‚à™ extract_values(steps[current])\n       if current < |steps| - 1:\n         current := current\
    \ + 1\n         render(steps[current])\n       else:\n         submit(data)"
  preconditions: []
  postconditions: []
  effects: []
- name: Previous Step
  signature: prev() ‚Üí Effect
  formal_definition: "```\n   prev() ‚Üí Effect\n   = if current > 0:\n       current := current - 1\n \
    \      render(steps[current])\n3. **Go To Step:\n```\n   goto(index: ‚Ñï) ‚Üí Effect\n   = if index ‚â§\
    \ max_completed_step:\n       current := index\n       render(steps[index])\n4. Calculate Progress:**\n\
    ```\n   progress() ‚Üí (‚Ñï, ‚Ñï)\n   = (current + 1, |steps|)"
  preconditions: []
  postconditions: []
  effects: []
- name: Linear
  signature: ''
  formal_definition: "```\n   [=====>      ] 50% (Step 2 of 4)"
  preconditions: []
  postconditions: []
  effects: []
- name: Stepped
  signature: ''
  formal_definition: "```\n   1. Details ‚úì\n   2. Payment ‚Üê (current)\n   3. Review\n   4. Confirm"
  preconditions: []
  postconditions: []
  effects: []
- name: Breadcrumb
  signature: ''
  formal_definition: "```\n   Home > Personal Info > Payment > Review"
  preconditions: []
  postconditions: []
  effects: []
manifestations:
- name: Checkout flow
  description: e-commerce
- name: Onboarding wizard
  description: ''
- name: Setup assistant
  description: ''
- name: Multi-page survey
  description: ''
- name: Installation wizard
  description: ''
