id: P6
version: '1.1'
schema_version: '1.0'
metadata:
  name: Palette/Toolbar
  category: pattern
  status: stable
  complexity: medium
  domains: []
definition:
  tuple_notation: $P = (tools, active, mode, layout)$
  description: ''
  components:
  - name: tools
    type: Set⟨Tool⟩
    notation: tools
    description: available tools
  - name: active
    type: Tool | null
    notation: active
    description: active tool
  - name: mode
    type: \{\text{exclusive}, \text{multi}\}
    notation: mode
    description: determines selection mode
  - name: layout
    type: \{\text{horizontal}, \text{vertical}, \text{grid}\}
    notation: layout
    description: visual layout
type_definitions: []
properties:
- id: P.P6.1
  name: Modal Exclusivity
  formal_spec: 'mode = exclusive ⇒ |{t ∈ tools : active(t)}| ≤ 1'
  description: ''
  invariants: []
- id: P.P6.2
  name: Tool Application
  formal_spec: active(tool) ∧ interact(canvas) → apply(tool, interaction)
  description: ''
  invariants: []
- id: P.P6.3
  name: Keyboard Shortcuts
  formal_spec: '∀t ∈ tools: ∃shortcut: key(shortcut) → activate(t)'
  description: ''
  invariants: []
operations:
- name: Select Tool
  signature: 'select(tool: Tool) → Effect'
  formal_definition: "```\n   select(tool: Tool) → Effect\n   = if mode = exclusive:\n       active :=\
    \ {tool}\n     else:\n       active := active ∪ {tool}\n     cursor := tool.cursor"
  preconditions: []
  postconditions: []
  effects: []
- name: Apply Tool
  signature: 'apply(tool: Tool, event: Event) → Effect'
  formal_definition: "```\n   apply(tool: Tool, event: Event) → Effect\n   = tool.handler(event)"
  preconditions: []
  postconditions: []
  effects: []
- name: Deselect
  signature: deselect() → Effect
  formal_definition: "```\n   deselect() → Effect\n   = active := null\n     cursor := default"
  preconditions: []
  postconditions: []
  effects: []
manifestations:
- name: Drawing tools
  description: Figma
- name: Code actions
  description: VS Code
- name: Sketch tools
  description: CAD
- name: Formatting toolbar
  description: Word
