id: P9
version: '1.1'
schema_version: '1.0'
metadata:
  name: Backlinks/References
  category: pattern
  status: stable
  complexity: medium
  domains: []
definition:
  tuple_notation: $L = (forward_links, reverse_index, display)$
  description: ''
  components:
  - name: forward_links
    type: Map⟨Item, Set⟨Item⟩⟩
    notation: forward_links
    description: explicit links
  - name: reverse_index
    type: Map⟨Item, Set⟨Item⟩⟩
    notation: reverse_index
    description: backlinks
  - name: display
    type: Item → Component
    notation: display
    description: renders link panel
type_definitions: []
properties:
- id: P.P9.1
  name: Symmetry
  formal_spec: item₁ ∈ forward_links[item₂] ⇔ item₂ ∈ reverse_index[item₁]
  description: ''
  invariants: []
- id: P.P9.2
  name: Bidirectional Navigation
  formal_spec: view(item) → display backlinks and forward links
  description: ''
  invariants: []
- id: P.P9.3
  name: Auto-Update
  formal_spec: add_link(A, B) → reverse_index[B] := reverse_index[B] ∪ {A}
  description: ''
  invariants: []
operations:
- name: Get Backlinks
  signature: 'backlinks(item: Item) → Set⟨Item⟩'
  formal_definition: "```\n   backlinks(item: Item) → Set⟨Item⟩\n   = reverse_index[item] | ∅"
  preconditions: []
  postconditions: []
  effects: []
- name: Get Forward Links
  signature: 'forward_links(item: Item) → Set⟨Item⟩'
  formal_definition: "```\n   forward_links(item: Item) → Set⟨Item⟩\n   = forward_links[item] | ∅"
  preconditions: []
  postconditions: []
  effects: []
- name: Update Index
  signature: 'update_index(item: Item, links: Set⟨Item⟩) → Effect'
  formal_definition: "```\n   update_index(item: Item, links: Set⟨Item⟩) → Effect\n   = old_links := forward_links[item]\n\
    \     removed := old_links ∖ links\n     added := links ∖ old_links\n     \n     for r in removed:\n\
    \       reverse_index[r] := reverse_index[r] ∖ {item}\n     \n     for a in added:\n       reverse_index[a]\
    \ := reverse_index[a] ∪ {item}\n     \n     forward_links[item] := links"
  preconditions: []
  postconditions: []
  effects: []
manifestations:
- name: Backlinks panel
  description: Roam Research, Obsidian
- name: References
  description: IDEs
- name: Usages
  description: code analysis
- name: Dependencies
  description: package managers
- name: Citations
  description: academic papers
