<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="P66" version="1.1">
  <metadata>
    <name>Context-Adaptive Interface</name>
    <category>pattern</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$A = (U_{state}, T_{ctx}, T_{ui}, R_{adapt}) : \text{Context} \to \text{UI}_{morphed}$</tuple-notation>
    <components>
      <component>
        <name>U_{state}</name>
        <type>ApplicationState</type>
        <notation>U_{state}</notation>
        <description>current application state</description>
      </component>
      <component>
        <name>T_{ctx}</name>
        <type>Context → ContextVector</type>
        <notation>T_{ctx}</notation>
        <description>context extraction and encoding function</description>
      </component>
      <component>
        <name>T_{ui}</name>
        <type>Set⟨UIVariant⟩</type>
        <notation>T_{ui}</notation>
        <description>set of UI variants for different contexts</description>
      </component>
      <component>
        <name>R_{adapt}</name>
        <type>ContextVector → UIVariant</type>
        <notation>R_{adapt}</notation>
        <description>adaptation function mapping context to UI</description>
      </component>
    </components>
  </definition>
  <type-definitions>
    <type-def>
      <name>Context</name>
      <definition>$\text{Context} = (\text{user}, \text{task}, \text{environment}, \text{history})$</definition>
    </type-def>
    <type-def>
      <name>ContextVector</name>
      <definition>$\text{ContextVector} = \mathbb{R}^d$ (embedded representation)</definition>
    </type-def>
    <type-def>
      <name>UIVariant</name>
      <definition>$\text{UIVariant} = (\text{layout}, \text{components}, \text{interactions}, \text{metadata})$</definition>
    </type-def>
    <type-def>
      <name>ApplicationState</name>
      <definition>$\text{ApplicationState} = \text{Map}(\text{Key}, \text{Value})$</definition>
    </type-def>
  </type-definitions>
  <properties>
    <property id="P.P66.1">
      <name>Context Sensitivity</name>
      <formal-spec format="latex">$\forall c_1, c_2 \in \text{Context} : c_1 \neq c_2 \implies R_{adapt}(T_{ctx}(c_1)) \neq R_{adapt}(T_{ctx}(c_2))$ (distinct contexts → distinct UIs)</formal-spec>
    </property>
    <property id="P.P66.2">
      <name>Smooth Transitions</name>
      <formal-spec format="latex">$\forall t : \Delta t_{transition} = t_{UI_{new}} - t_{context_{change}} &lt; 200ms$ (perceptually instant)</formal-spec>
    </property>
    <property id="P.P66.3">
      <name>State Preservation</name>
      <formal-spec format="latex">$\forall s \in U_{state} : \text{adapt}(c) \implies U_{state}' \supseteq s$ (state persists across adaptations)</formal-spec>
    </property>
    <property id="P.P66.4">
      <name>Variant Coverage</name>
      <formal-spec format="latex">$\forall c \in \text{Context} : \exists v \in T_{ui} : R_{adapt}(T_{ctx}(c)) = v$ (complete coverage)</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Extract Context</name>
      <signature>extract: ApplicationState → Context</signature>
      <formal-definition format="latex">$\text{extract}(state) = ctx$ where
  $ctx.user = state[\text{user\_profile}]$
  $ctx.task = \text{infer\_task}(state[\text{recent\_actions}])$
  $ctx.environment = \text{detect\_env}()$
  $ctx.history = state[\text{interaction\_history}]$</formal-definition>
    </operation>
    <operation>
      <name>Select Variant</name>
      <signature>select: Context → UIVariant</signature>
      <formal-definition format="latex">$\text{select}(ctx) = v$ where
  $v = R_{adapt}(T_{ctx}(ctx))$
  $v = \arg\max_{v' \in T_{ui}} \text{score}(v', ctx)$ (best match)</formal-definition>
    </operation>
    <operation>
      <name>Morph Interface</name>
      <signature>morph: UIVariant × UIVariant → Transition</signature>
      <formal-definition format="latex">$\text{morph}(v_{old}, v_{new}) = trans$ where
  $trans = \text{compute\_diff}(v_{old}, v_{new})$
  $\text{animate}(trans, \text{duration})$</formal-definition>
    </operation>
  </operations>
  <dependencies>
    <uses>
      <pattern-ref>P64</pattern-ref>
      <pattern-ref>P67</pattern-ref>
      <pattern-ref>P136</pattern-ref>
      <pattern-ref>P137</pattern-ref>
    </uses>
  </dependencies>
  <manifestations>
    <manifestation>
      <name>Notion adaptive workspace</name>
      <description>UI adapts to document type and user role</description>
    </manifestation>
    <manifestation>
      <name>Figma context-aware panels</name>
      <description>tools change based on selected object</description>
    </manifestation>
    <manifestation>
      <name>VS Code adaptive UI</name>
      <description>panels adjust to programming language and task</description>
    </manifestation>
    <manifestation>
      <name>Gmail smart compose</name>
      <description>suggestions adapt to email context and recipient</description>
    </manifestation>
  </manifestations>
</pattern>
