<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="P108" version="1.1">
  <metadata>
    <name>Cross-Document Linking</name>
    <category>pattern</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$L_{cross} = (Docs, Relationships, Auto_{link}, Display) : \text{Set}\langle \text{Document} \rangle \to \text{Links}$</tuple-notation>
    <components>
      <component>
        <name>Docs</name>
        <type>Set⟨Document⟩</type>
        <notation>Docs</notation>
        <description>collection of interrelated documents</description>
      </component>
      <component>
        <name>Relationships</name>
        <type>Set⟨Link⟩</type>
        <notation>Relationships</notation>
        <description>semantic relationships between documents</description>
      </component>
      <component>
        <name>Auto_{link}</name>
        <type>(Document × Document) → [0,1]</type>
        <notation>Auto_{link}</notation>
        <description>AI-computed relevance score for linking</description>
      </component>
      <component>
        <name>Display</name>
        <type>Link → Visualization</type>
        <notation>Display</notation>
        <description>how links are rendered in UI</description>
      </component>
    </components>
  </definition>
  <type-definitions>
      <type-def>
        <name>Link</name>
        <definition>$\text{Link} = (\text{source}, \text{target}, \text{relation\_type}, \text{bidirectional})$</definition>
      </type-def>
      <type-def>
        <name>RelationType</name>
        <definition>$\text{RelationType} = \{\text{references}, \text{extends}, \text{contradicts}, \text{supports}, \text{related}\}$</definition>
      </type-def>
      <type-def>
        <name>Document</name>
        <definition>$\text{Document} = (\text{id}, \text{content}, \text{metadata}, \text{embedding})$</definition>
      </type-def>
    </type-definitions>
  <properties>
    <property id="P.P108.1">
      <name>Automatic Discovery</name>
      <formal-spec format="latex">$\forall d_1, d_2 \in Docs : Auto_{link}(d_1, d_2) > \theta \implies \exists l \in Relationships : l.source = d_1 \land l.target = d_2$</formal-spec>
    </property>
    <property id="P.P108.2">
      <name>Bidirectional Navigation</name>
      <formal-spec format="latex">$\forall l \in Relationships : l.bidirectional = \text{true} \implies \exists l' : l'.source = l.target \land l'.target = l.source$</formal-spec>
    </property>
    <property id="P.P108.3">
      <name>Transitive Suggestions</name>
      <formal-spec format="latex">$(d_1, d_2) \in Relationships \land (d_2, d_3) \in Relationships \implies \text{suggest}(d_1, d_3)$ (transitive)</formal-spec>
    </property>
    <property id="P.P108.4">
      <name>Semantic Consistency</name>
      <formal-spec format="latex">$\forall l : \text{similarity}(l.source.embedding, l.target.embedding) \geq \epsilon > 0$</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Discover Links</name>
      <signature>discoverLinks: Set⟨Document⟩ → Set⟨Link⟩</signature>
      <formal-definition format="latex">$\text{discoverLinks}(D) = \{(d_1, d_2, t, b) \mid$
  $d_1, d_2 \in D \land d_1 \neq d_2 \land$
  $Auto_{link}(d_1, d_2) > \theta \land$
  $t = \text{classifyRelation}(d_1, d_2)\}$</formal-definition>
    </operation>
    <operation>
      <name>Add Manual Link</name>
      <signature>addLink: Document × Document × RelationType → Link</signature>
      <formal-definition format="latex">$\text{addLink}(d_1, d_2, t) = l$ where
  $l = (d_1, d_2, t, \text{true})$
  $Relationships' = Relationships \cup \{l\}$</formal-definition>
    </operation>
    <operation>
      <name>Get Related Documents</name>
      <signature>getRelated: Document × ℕ → Seq⟨Document⟩</signature>
      <formal-definition format="latex">$\text{getRelated}(d, k) = \text{top-k}(\{d' \mid (d, d', t, b) \in Relationships\}, Auto_{link}(d, \cdot))$</formal-definition>
    </operation>
  </operations>
  <dependencies>
    <requires>
      <pattern-ref>P9</pattern-ref>
    </requires>
    <uses>
      <pattern-ref>P99</pattern-ref>
      <pattern-ref>P103</pattern-ref>
      <pattern-ref>P105</pattern-ref>
    </uses>
  </dependencies>
  <manifestations>
    <manifestation>
      <name>Roam Research backlinks</name>
      <description>bidirectional linking between notes</description>
    </manifestation>
    <manifestation>
      <name>Notion relation databases</name>
      <description>structured cross-document relationships</description>
    </manifestation>
    <manifestation>
      <name>Wikipedia "See also" sections</name>
      <description>related article suggestions</description>
    </manifestation>
    <manifestation>
      <name>Obsidian graph view</name>
      <description>visual network of linked documents</description>
    </manifestation>
  </manifestations>
</pattern>
