<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="P52" version="1.1">
  <metadata>
    <name>Pagination Pattern</name>
    <category>pattern</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$P = (data, page, size, total, nav)$</tuple-notation>
    <components>
      <component>
        <name>data</name>
        <type>Sequence⟨Item⟩</type>
        <notation>data</notation>
        <description>full dataset</description>
      </component>
      <component>
        <name>page</name>
        <type>ℕ</type>
        <notation>page</notation>
        <description>current page number (1-indexed)</description>
      </component>
      <component>
        <name>size</name>
        <type>ℕ</type>
        <notation>size</notation>
        <description>items per page</description>
      </component>
      <component>
        <name>total</name>
        <type>ℕ</type>
        <notation>total</notation>
        <description>total item count</description>
      </component>
      <component>
        <name>nav</name>
        <type>Navigation</type>
        <notation>nav</notation>
        <description>provides navigation controls</description>
      </component>
    </components>
  </definition>
  <type-definitions>
    <type-def>
      <name>Navigation</name>
      <definition format="latex">{</definition>
    </type-def>
  </type-definitions>
  <properties>
    <property id="P.P52.1">
      <name>Page Calculation</name>
      <formal-spec format="latex">total_pages = ⌈total / size⌉
page ∈ [1, total_pages]</formal-spec>
    </property>
    <property id="P.P52.2">
      <name>Item Range</name>
      <formal-spec format="latex">current_items = data[(page-1)·size : page·size]</formal-spec>
    </property>
    <property id="P.P52.3">
      <name>Boundary Checks</name>
      <formal-spec format="latex">has_prev ⇔ page &gt; 1
has_next ⇔ page &lt; total_pages</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Get Page</name>
      <signature>get_page(page_num: ℕ) → Sequence⟨Item⟩</signature>
      <formal-definition format="latex">```
   get_page(page_num: ℕ) → Sequence⟨Item⟩
   = start := (page_num - 1) · size
     end := min(start + size, total)
     return data[start:end]</formal-definition>
    </operation>
    <operation>
      <name>Navigate</name>
      <signature>next() → Effect</signature>
      <formal-definition format="latex">```
   next() → Effect
   = if page &lt; total_pages:
       page := page + 1
       load_page(page)
   
   prev() → Effect
   = if page &gt; 1:
       page := page - 1
       load_page(page)
   
   goto(p: ℕ) → Effect
   = if 1 ≤ p ≤ total_pages:
       page := p
       load_page(p)</formal-definition>
    </operation>
    <operation>
      <name>Change Page Size</name>
      <signature>set_page_size(new_size: ℕ) → Effect</signature>
      <formal-definition format="latex">```
   set_page_size(new_size: ℕ) → Effect
   = size := new_size
     page := 1  // Reset to first page
     load_page(1)</formal-definition>
    </operation>
    <operation>
      <name>Offset-Based (Traditional)</name>
      <signature/>
      <formal-definition format="latex">```
   Query: SELECT * FROM items LIMIT size OFFSET (page-1)*size
   Pros: Can jump to any page
   Cons: Performance degrades with large offsets</formal-definition>
    </operation>
    <operation>
      <name>Cursor-Based (API)</name>
      <signature/>
      <formal-definition format="latex">```
   Query: SELECT * FROM items WHERE id &gt; cursor LIMIT size
   cursor := last_item.id
   Pros: Consistent performance
   Cons: Can't jump to arbitrary page</formal-definition>
    </operation>
    <operation>
      <name>Infinite Scroll</name>
      <signature>Scroll to bottom → load_next_page() → append to list</signature>
      <formal-definition format="latex">```
   Scroll to bottom → load_next_page() → append to list
   Pros: Smooth UX
   Cons: No page bookmarks, harder navigation</formal-definition>
    </operation>
    <operation>
      <name>Numbered</name>
      <signature/>
      <formal-definition format="latex">```
   [&lt; Prev] [1] [2] [3] ... [10] [Next &gt;]</formal-definition>
    </operation>
    <operation>
      <name>Simple</name>
      <signature/>
      <formal-definition format="latex">```
   [&lt; Previous] Page 3 of 10 [Next &gt;]</formal-definition>
    </operation>
    <operation>
      <name>Load More</name>
      <signature/>
      <formal-definition format="latex">```
   [Show 25 more items]</formal-definition>
    </operation>
  </operations>
  <manifestations>
    <manifestation>
      <name>Search results</name>
    </manifestation>
    <manifestation>
      <name>Product listings</name>
    </manifestation>
    <manifestation>
      <name>Data tables</name>
    </manifestation>
    <manifestation>
      <name>Blog archives</name>
    </manifestation>
    <manifestation>
      <name>API responses</name>
    </manifestation>
  </manifestations>
</pattern>
