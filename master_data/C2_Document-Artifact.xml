<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="C2" version="1.1">
  <metadata>
    <name>Document/Artifact</name>
    <category>concept</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$D = (id, content, metadata, version)$</tuple-notation>
    <components>
      <component>
        <name>id</name>
        <type>ID</type>
        <notation>id</notation>
        <description>unique identifier</description>
      </component>
      <component>
        <name>content</name>
        <type>Content</type>
        <notation>content</notation>
        <description>document body</description>
      </component>
      <component>
        <name>metadata</name>
        <type>Metadata</type>
        <notation>metadata</notation>
        <description>key-value properties</description>
      </component>
      <component>
        <name>version</name>
        <type>Version</type>
        <notation>version</notation>
        <description>version information</description>
      </component>
    </components>
  </definition>
  <properties>
    <property id="P.C2.1">
      <name>Editability</name>
      <formal-spec format="latex">edit(D, Δ) → D'
where Δ : Delta and D'.version.number = D.version.number + 1</formal-spec>
    </property>
    <property id="P.C2.2">
      <name>Versionability</name>
      <formal-spec format="latex">∀t: ∃D': checkout(D, t) = D'
where D'.version.timestamp = t</formal-spec>
    </property>
    <property id="P.C2.3">
      <name>Serializability</name>
      <formal-spec format="latex">deserialize(serialize(D)) = D</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Edit</name>
      <signature>edit(D: Document, Δ: Delta) → Document</signature>
      <formal-definition format="latex">```
   edit(D: Document, Δ: Delta) → Document
   = D' where D'.content = apply(D.content, Δ)
            ∧ D'.version = next_version(D.version, Δ)</formal-definition>
    </operation>
    <operation>
      <name>Checkout Version</name>
      <signature>checkout(D: Document, v: Version) → Document</signature>
      <formal-definition format="latex">```
   checkout(D: Document, v: Version) → Document
   = D' where D'.content = reconstruct(D.history, v)</formal-definition>
    </operation>
    <operation>
      <name>Merge</name>
      <signature>merge(D₁: Document, D₂: Document) → Document | Conflict</signature>
      <formal-definition format="latex">```
   merge(D₁: Document, D₂: Document) → Document | Conflict
   = three-way merge with common ancestor</formal-definition>
    </operation>
  </operations>
  <manifestations>
    <manifestation>
      <name>Text documents</name>
      <description>Markdown, Word</description>
    </manifestation>
    <manifestation>
      <name>Source code files</name>
    </manifestation>
    <manifestation>
      <name>Proofs</name>
      <description>Lean, Coq</description>
    </manifestation>
    <manifestation>
      <name>CAD models</name>
      <description>parametric designs</description>
    </manifestation>
    <manifestation>
      <name>Content blocks</name>
      <description>CMS</description>
    </manifestation>
  </manifestations>
</pattern>
