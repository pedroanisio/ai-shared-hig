<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="P111" version="1.1">
  <metadata>
    <name>Document Evolution Timeline</name>
    <category>pattern</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$T_{evol} = (Versions, Changes, Contributors, Timestamps) : \text{Document}_{history} \to \text{Timeline}$</tuple-notation>
    <components>
      <component>
        <name>Versions</name>
        <type>Seq⟨Version⟩</type>
        <notation>Versions</notation>
        <description>chronologically ordered document versions</description>
      </component>
      <component>
        <name>Changes</name>
        <type>Version × Version → Delta</type>
        <notation>Changes</notation>
        <description>computed diff between consecutive versions</description>
      </component>
      <component>
        <name>Contributors</name>
        <type>Version → Set⟨Actor⟩</type>
        <notation>Contributors</notation>
        <description>humans and AI agents that modified each version</description>
      </component>
      <component>
        <name>Timestamps</name>
        <type>Version → Time</type>
        <notation>Timestamps</notation>
        <description>temporal mapping of versions</description>
      </component>
    </components>
  </definition>
  <type-definitions>
      <type-def>
        <name>Version</name>
        <definition>$\text{Version} = (\text{id}, \text{content}, \text{metadata}, \text{parent})$</definition>
      </type-def>
      <type-def>
        <name>Delta</name>
        <definition>$\text{Delta} = \text{Set}\langle \text{Edit} \rangle$ (set of atomic edits)</definition>
      </type-def>
      <type-def>
        <name>Actor</name>
        <definition>$\text{Actor} = \text{Human} \mid \text{Agent}$ (union type)</definition>
      </type-def>
    </type-definitions>
  <properties>
    <property id="P.P111.1">
      <name>Chronological Ordering</name>
      <formal-spec format="latex">$\forall v_i, v_{i+1} \in Versions : Timestamps(v_i) &lt; Timestamps(v_{i+1})$ (monotonic time)</formal-spec>
    </property>
    <property id="P.P111.2">
      <name>Version Continuity</name>
      <formal-spec format="latex">$\forall v_{i+1} \in Versions : \exists v_i : v_{i+1}.parent = v_i.id$ (except root version)</formal-spec>
    </property>
    <property id="P.P111.3">
      <name>Complete Attribution</name>
      <formal-spec format="latex">$\forall v \in Versions : Contributors(v) \neq \emptyset$ (every change has author)</formal-spec>
    </property>
    <property id="P.P111.4">
      <name>Reconstructability</name>
      <formal-spec format="latex">$\forall v_i \in Versions : v_i = \text{apply}(v_0, \bigoplus_{j=1}^{i} Changes(v_{j-1}, v_j))$ (replay history)</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Compute Delta</name>
      <signature>computeDelta: Version × Version → Delta</signature>
      <formal-definition format="latex">$\text{computeDelta}(v_1, v_2) = \{e \mid e = \text{diff}(v_1.content, v_2.content)\}$
using Myers' diff algorithm or similar</formal-definition>
    </operation>
    <operation>
      <name>Visualize Timeline</name>
      <signature>visualize: Seq⟨Version⟩ → Rendering</signature>
      <formal-definition format="latex">$\text{visualize}(V) = \text{render}$ where
  $\text{render}.timeline = \{(Timestamps(v), v.id, |Changes(v_{i-1}, v)|) \mid v \in V\}$
  $\text{render}.contributors = \text{aggregate}(Contributors, V)$</formal-definition>
    </operation>
    <operation>
      <name>Time Travel</name>
      <signature>timeTravel: Version × Time → Version</signature>
      <formal-definition format="latex">$\text{timeTravel}(v_{current}, t) = v_t$ where
  $v_t = \arg\max_{v \in Versions} \{v \mid Timestamps(v) \leq t\}$</formal-definition>
    </operation>
  </operations>
  <dependencies>
    <requires>
      <pattern-ref>C5</pattern-ref>
    </requires>
    <uses>
      <pattern-ref>P109</pattern-ref>
      <pattern-ref>P112</pattern-ref>
      <pattern-ref>P113</pattern-ref>
    </uses>
  </dependencies>
  <manifestations>
    <manifestation>
      <name>Git history visualization</name>
      <description>commit timeline with contributors and diffs</description>
    </manifestation>
    <manifestation>
      <name>Google Docs version history</name>
      <description>temporal document evolution with named versions</description>
    </manifestation>
    <manifestation>
      <name>Wikipedia revision history</name>
      <description>chronological edits with diff viewing</description>
    </manifestation>
    <manifestation>
      <name>Notion page history</name>
      <description>version timeline with restore capability</description>
    </manifestation>
  </manifestations>
</pattern>
