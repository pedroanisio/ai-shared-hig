<?xml version='1.0' encoding='utf-8'?>
<ns0:pattern xmlns:ns0="http://universal-corpus.org/schema/v1" id="F3.4" version="1.1">
  <ns0:metadata>
    <ns0:name />
    <ns0:category>pattern</ns0:category>
    <ns0:status>stable</ns0:status>
    <ns0:complexity>medium</ns0:complexity>
  </ns0:metadata>
  <ns0:definition>
    <ns0:tuple-notation format="latex">$U = (track, infer, personalize, apply)$</ns0:tuple-notation>
    <ns0:components>
      <ns0:component>
        <ns0:name>track</ns0:name>
        <ns0:type>UserAction → Event</ns0:type>
        <ns0:notation>track</ns0:notation>
        <ns0:description>records user behavior</ns0:description>
      </ns0:component>
      <ns0:component>
        <ns0:name>infer</ns0:name>
        <ns0:type>Sequence⟨Event⟩ → Preferences</ns0:type>
        <ns0:notation>infer</ns0:notation>
        <ns0:description>learns preferences</ns0:description>
      </ns0:component>
      <ns0:component>
        <ns0:name>personalize</ns0:name>
        <ns0:type>Preferences → Configuration</ns0:type>
        <ns0:notation>personalize</ns0:notation>
        <ns0:description>customizes experience</ns0:description>
      </ns0:component>
      <ns0:component>
        <ns0:name>apply</ns0:name>
        <ns0:type>Configuration → Effect</ns0:type>
        <ns0:notation>apply</ns0:notation>
        <ns0:description>applies personalization</ns0:description>
      </ns0:component>
    </ns0:components>
  </ns0:definition>
  <ns0:type-definitions>
    <ns0:type-def>
      <ns0:name>UserAction</ns0:name>
      <ns0:definition format="latex">Click | View | Purchase | Search | Rate | Configure</ns0:definition>
    </ns0:type-def>
    <ns0:type-def>
      <ns0:name>Event</ns0:name>
      <ns0:definition format="latex">(user: UserId, action: UserAction, context: Context, timestamp: Time)</ns0:definition>
    </ns0:type-def>
    <ns0:type-def>
      <ns0:name>Preferences</ns0:name>
      <ns0:definition format="latex">Map⟨Feature, Score⟩</ns0:definition>
    </ns0:type-def>
    <ns0:type-def>
      <ns0:name>Configuration</ns0:name>
      <ns0:definition format="latex">Personalized settings and content</ns0:definition>
    </ns0:type-def>
  </ns0:type-definitions>
  <ns0:properties>
    <ns0:property id="P.F3.4.1">
      <ns0:name>Privacy Preservation</ns0:name>
      <ns0:formal-spec format="latex">∀u ∈ Users: preferences(u) stored with user consent ∧ anonymizable</ns0:formal-spec>
    </ns0:property>
    <ns0:property id="P.F3.4.2">
      <ns0:name>Preference Decay</ns0:name>
      <ns0:formal-spec format="latex">∀p ∈ Preferences: score(p, t) = score(p, 0) · decay_function(t)
Old preferences have less weight</ns0:formal-spec>
    </ns0:property>
    <ns0:property id="P.F3.4.3">
      <ns0:name>Override Capability</ns0:name>
      <ns0:formal-spec format="latex">∀u ∈ Users: explicit_preference(u) overrides inferred_preference(u)</ns0:formal-spec>
    </ns0:property>
  </ns0:properties>
  <ns0:operations>
    <ns0:operation>
      <ns0:name>Personalize</ns0:name>
      <ns0:signature>personalize(user: UserId) → Effect</ns0:signature>
      <ns0:formal-definition format="latex">```
   personalize(user: UserId) → Effect
   = events := track(user)
     preferences := infer(events)
     config := personalize(preferences, user.explicit_settings)
     apply(config, user.session)</ns0:formal-definition>
    </ns0:operation>
    <ns0:operation>
      <ns0:name>Infer Preferences</ns0:name>
      <ns0:signature>infer(events: Sequence⟨Event⟩) → Preferences</ns0:signature>
      <ns0:formal-definition format="latex">```
   infer(events: Sequence⟨Event⟩) → Preferences
   = features := extract_features(events)
     patterns := find_patterns(features)
     preferences := {}
     for (feature, pattern) in patterns:
       score := calculate_affinity(pattern)
       preferences[feature] := score
     return preferences</ns0:formal-definition>
    </ns0:operation>
    <ns0:operation>
      <ns0:name>Apply Configuration</ns0:name>
      <ns0:signature>apply(config: Configuration, session: Session) → Effect</ns0:signature>
      <ns0:formal-definition format="latex">```
   apply(config: Configuration, session: Session) → Effect
   = for (setting, value) in config:
       session.set(setting, value)
     
     content := filter_by_preferences(available_content, config)
     session.recommendations := rank(content, config)</ns0:formal-definition>
    </ns0:operation>
  </ns0:operations>
  <ns0:manifestations>
    <ns0:manifestation>
      <ns0:name>Recommendation engines</ns0:name>
    </ns0:manifestation>
    <ns0:manifestation>
      <ns0:name>Adaptive interfaces</ns0:name>
    </ns0:manifestation>
    <ns0:manifestation>
      <ns0:name>Content personalization</ns0:name>
    </ns0:manifestation>
    <ns0:manifestation>
      <ns0:name>Search result ranking</ns0:name>
    </ns0:manifestation>
    <ns0:manifestation>
      <ns0:name>Notification preferences</ns0:name>
    </ns0:manifestation>
  </ns0:manifestations>
</ns0:pattern>