<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="P27" version="1.1">
  <metadata>
    <name>Toast/Notification</name>
    <category>pattern</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$T = (message, duration, dismiss, stack, position)$</tuple-notation>
    <components>
      <component>
        <name>message</name>
        <type>String</type>
        <notation>message</notation>
        <description>notification text</description>
      </component>
      <component>
        <name>duration</name>
        <type>Duration</type>
        <notation>duration</notation>
        <description>auto-dismiss time</description>
      </component>
      <component>
        <name>dismiss</name>
        <type>() → Effect</type>
        <notation>dismiss</notation>
        <description>manually dismisses</description>
      </component>
      <component>
        <name>stack</name>
        <type>Sequence⟨Toast⟩</type>
        <notation>stack</notation>
        <description>manages multiple toasts</description>
      </component>
      <component>
        <name>position</name>
        <type>Position</type>
        <notation>position</notation>
        <description>determines screen location</description>
      </component>
    </components>
  </definition>
  <type-definitions>
    <type-def>
      <name>Duration</name>
      <definition format="latex">ℕ | Infinity  // milliseconds or persistent</definition>
    </type-def>
    <type-def>
      <name>Position</name>
      <definition format="latex">TopLeft | TopCenter | TopRight | BottomLeft | BottomCenter | BottomRight</definition>
    </type-def>
  </type-definitions>
  <properties>
    <property id="P.P27.1">
      <name>Time-Limited</name>
      <formal-spec format="latex">toast appears → auto-dismiss after duration (unless duration = ∞)</formal-spec>
    </property>
    <property id="P.P27.2">
      <name>Stackable</name>
      <formal-spec format="latex">Multiple toasts stack vertically
New toasts push old toasts</formal-spec>
    </property>
    <property id="P.P27.3">
      <name>Non-Modal</name>
      <formal-spec format="latex">User can interact with app while toast visible</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Show Toast</name>
      <signature>show(message: String, level: Level, duration: Duration) → Effect</signature>
      <formal-definition format="latex">```
   show(message: String, level: Level, duration: Duration) → Effect
   = toast := Toast(message, level, duration, now())
     stack := stack ++ [toast]
     render(stack)
     if duration ≠ ∞:
       schedule(dismiss(toast), duration)</formal-definition>
    </operation>
    <operation>
      <name>Dismiss</name>
      <signature>dismiss(toast: Toast) → Effect</signature>
      <formal-definition format="latex">```
   dismiss(toast: Toast) → Effect
   = stack := stack ∖ {toast}
     animate_out(toast)
     render(stack)
```
Info:    Neutral message (blue)
Success: Operation succeeded (green)
Warning: Caution needed (yellow)
Error:   Operation failed (red)
```
Info:    3-5 seconds
Success: 2-3 seconds
Warning: 5-7 seconds
Error:   7-10 seconds or manual dismiss</formal-definition>
    </operation>
  </operations>
  <manifestations>
    <manifestation>
      <name>Success messages</name>
      <description>"✓ Saved"</description>
    </manifestation>
    <manifestation>
      <name>Error alerts</name>
      <description>"❌ Failed to save"</description>
    </manifestation>
    <manifestation>
      <name>Info notifications</name>
      <description>"File exported"</description>
    </manifestation>
    <manifestation>
      <name>Action confirmations</name>
    </manifestation>
  </manifestations>
</pattern>
