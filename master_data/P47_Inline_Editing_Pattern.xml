<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="P47" version="1.1">
  <metadata>
    <name>Inline Editing Pattern</name>
    <category>pattern</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$E = (M, \sigma_{47}, \tau_{47}, \phi_{47}, \psi_{47})$</tuple-notation>
    <components>
      <component>
        <name>\tau_{47}</name>
        <type>Event → M</type>
        <notation>\tau_{47}</notation>
        <description>**trigger function**</description>
      </component>
      <component>
        <name>\phi_{47}</name>
        <type>Value \times Value → Effect</type>
        <notation>\phi_{47}</notation>
        <description>**commit handler**</description>
      </component>
      <component>
        <name>\psi_{47}</name>
        <type>() → Effect</type>
        <notation>\psi_{47}</notation>
        <description>**cancel handler**</description>
      </component>
    </components>
  </definition>
  <properties>
    <property id="P.P47.1">
      <name>Mode Exclusivity</name>
      <formal-spec format="latex">|{m : active(m)}| = 1</formal-spec>
    </property>
    <property id="P.P47.2">
      <name>Position Preservation</name>
      <formal-spec format="latex">bounds(view) ≈ bounds(edit)</formal-spec>
    </property>
    <property id="P.P47.3">
      <name>Validation Gate</name>
      <formal-spec format="latex">commit(v) succeeds ⇔ valid(v)</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Enter Edit Mode</name>
      <signature>activate() → Effect</signature>
      <formal-definition format="latex">```
   activate() → Effect
   = value_original := value
     σ₄₇ := edit
     render_input()
     focus(input)
     select_all(input)</formal-definition>
    </operation>
    <operation>
      <name>Commit Changes</name>
      <signature>commit() → Effect</signature>
      <formal-definition format="latex">```
   commit() → Effect
   = v_new := get_input_value()
     if valid(v_new):
       φ₄₇(value_original, v_new)
       value := v_new
       σ₄₇ := view</formal-definition>
    </operation>
    <operation>
      <name>Cancel Edit</name>
      <signature>cancel() → Effect</signature>
      <formal-definition format="latex">```
   cancel() → Effect
   = ψ₄₇()
     value := value_original
     σ₄₇ := view</formal-definition>
    </operation>
  </operations>
  <manifestations>
    <manifestation>
      <name>Click paragraph to edit</name>
    </manifestation>
    <manifestation>
      <name>Spreadsheet cell editing</name>
    </manifestation>
    <manifestation>
      <name>Filename rename</name>
    </manifestation>
    <manifestation>
      <name>Tag editing</name>
    </manifestation>
  </manifestations>
</pattern>
