<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="P18" version="1.1">
  <metadata>
    <name>Relational Database</name>
    <category>pattern</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$R = (tables, schemas, constraints, indices)$</tuple-notation>
    <components>
      <component>
        <name>tables</name>
        <type>Map⟨String, Table⟩</type>
        <notation>tables</notation>
        <description>data tables</description>
      </component>
      <component>
        <name>schemas</name>
        <type>Map⟨String, Schema⟩</type>
        <notation>schemas</notation>
        <description>define table structures</description>
      </component>
      <component>
        <name>constraints</name>
        <type>Set⟨Constraint⟩</type>
        <notation>constraints</notation>
        <description>enforce integrity</description>
      </component>
      <component>
        <name>indices</name>
        <type>Map⟨(Table, Column), Index⟩</type>
        <notation>indices</notation>
        <description>speed queries</description>
      </component>
    </components>
  </definition>
  <type-definitions>
    <type-def>
      <name>Table</name>
      <definition format="latex">Set⟨Row⟩</definition>
    </type-def>
    <type-def>
      <name>Row</name>
      <definition format="latex">Map⟨String, Value⟩  // column → value</definition>
    </type-def>
    <type-def>
      <name>Schema</name>
      <definition format="latex">Sequence⟨(name: String, type: Type, constraints: Set⟨Constraint⟩)⟩</definition>
    </type-def>
    <type-def>
      <name>Constraint</name>
      <definition format="latex">PrimaryKey | ForeignKey | Unique | NotNull | Check(predicate)</definition>
    </type-def>
  </type-definitions>
  <properties>
    <property id="P.P18.1">
      <name>ACID</name>
      <formal-spec format="latex">Atomicity: Transactions complete fully or not at all
Consistency: Constraints always satisfied
Isolation: Concurrent transactions don't interfere
Durability: Committed changes persist</formal-spec>
    </property>
    <property id="P.P18.2">
      <name>Relational Algebra</name>
      <formal-spec format="latex">Queries expressed as: SELECT, PROJECT, JOIN, UNION, DIFFERENCE</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Insert</name>
      <signature/>
      <formal-definition format="latex">```
   INSERT INTO table VALUES (...)</formal-definition>
    </operation>
    <operation>
      <name>Select</name>
      <signature/>
      <formal-definition format="latex">```
   SELECT columns FROM table WHERE predicate ORDER BY columns</formal-definition>
    </operation>
    <operation>
      <name>Join</name>
      <signature/>
      <formal-definition format="latex">```
   SELECT * FROM table1 JOIN table2 ON table1.key = table2.foreign_key</formal-definition>
    </operation>
  </operations>
  <manifestations>
    <manifestation>
      <name>Content database</name>
    </manifestation>
    <manifestation>
      <name>File metadata</name>
    </manifestation>
    <manifestation>
      <name>User data</name>
    </manifestation>
    <manifestation>
      <name>Application state</name>
    </manifestation>
  </manifestations>
</pattern>
