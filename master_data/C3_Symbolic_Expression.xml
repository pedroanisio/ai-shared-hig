<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="C3" version="1.1">
  <metadata>
    <name>Symbolic Expression</name>
    <category>concept</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$T = (root, children)$</tuple-notation>
    <components>
      <component>
        <name>root</name>
        <type>Symbol</type>
        <notation>root</notation>
        <description>root node (operator or value)</description>
      </component>
      <component>
        <name>children</name>
        <type>Sequence⟨Tree⟩</type>
        <notation>children</notation>
        <description>child expressions</description>
      </component>
    </components>
  </definition>
  <properties>
    <property id="P.C3.1">
      <name>Parseability</name>
      <formal-spec format="latex">parse(serialize(T)) = T</formal-spec>
    </property>
    <property id="P.C3.2">
      <name>Evaluability</name>
      <formal-spec format="latex">∀T, context: eval(T, context) → Value | Error</formal-spec>
    </property>
    <property id="P.C3.3">
      <name>Transformability</name>
      <formal-spec format="latex">∃transform: simplify(T) = T' where semantics(T) = semantics(T')
∧ complexity(T') ≤ complexity(T)</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Parse</name>
      <signature>parse(s: String) → Tree | ParseError</signature>
      <formal-definition format="latex">```
   parse(s: String) → Tree | ParseError
   = construct AST from string representation</formal-definition>
    </operation>
    <operation>
      <name>Evaluate</name>
      <signature>eval(T: Tree, context: Map⟨String,Value⟩) → Value</signature>
      <formal-definition format="latex">```
   eval(T: Tree, context: Map⟨String,Value⟩) → Value
   = case T.root of
       Literal(v) → v
       Variable(x) → context[x]
       Operator(op) → op(map(eval, T.children))</formal-definition>
    </operation>
    <operation>
      <name>Simplify</name>
      <signature>simplify(T: Tree) → Tree</signature>
      <formal-definition format="latex">```
   simplify(T: Tree) → Tree
   = apply rewrite rules until fixpoint</formal-definition>
    </operation>
  </operations>
  <manifestations>
    <manifestation>
      <name>Mathematical formulas</name>
      <description>LaTeX, MathML</description>
    </manifestation>
    <manifestation>
      <name>Code AST</name>
      <description>Python, JavaScript</description>
    </manifestation>
    <manifestation>
      <name>Constraints</name>
      <description>SMT-LIB</description>
    </manifestation>
    <manifestation>
      <name>Queries</name>
      <description>SQL, GraphQL</description>
    </manifestation>
    <manifestation>
      <name>Tags/taxonomies</name>
    </manifestation>
  </manifestations>
</pattern>
