<?xml version="1.0" ?>
<pattern xmlns="http://universal-corpus.org/schema/v1" id="P14" version="1.1">
  <metadata>
    <name>Agent Swarm</name>
    <category>pattern</category>
    <status>stable</status>
    <complexity>medium</complexity>
  </metadata>
  <definition>
    <tuple-notation format="latex">$A = (agents, tasks, coord, results)$</tuple-notation>
    <components>
      <component>
        <name>agents</name>
        <type>Set⟨Agent⟩</type>
        <notation>agents</notation>
        <description>autonomous workers</description>
      </component>
      <component>
        <name>tasks</name>
        <type>Queue⟨Task⟩</type>
        <notation>tasks</notation>
        <description>pending tasks</description>
      </component>
      <component>
        <name>coord</name>
        <type>Coordinator</type>
        <notation>coord</notation>
        <description>manages task distribution</description>
      </component>
      <component>
        <name>results</name>
        <type>Map⟨Task, Result⟩</type>
        <notation>results</notation>
        <description>stores completed results</description>
      </component>
    </components>
  </definition>
  <type-definitions>
    <type-def>
      <name>Agent</name>
      <definition format="latex">(id: ID, status: Status, execute: Task → Result)</definition>
    </type-def>
    <type-def>
      <name>Status</name>
      <definition format="latex">Idle | Busy(task: Task) | Failed(error: Error)</definition>
    </type-def>
    <type-def>
      <name>Task</name>
      <definition format="latex">(id: ID, work: Work, priority: ℕ)</definition>
    </type-def>
    <type-def>
      <name>Coordinator</name>
      <definition format="latex">(assign: Agent × Task → Effect, aggregate: () → Result)</definition>
    </type-def>
  </type-definitions>
  <properties>
    <property id="P.P14.1">
      <name>Agent Independence</name>
      <formal-spec format="latex">Agents execute tasks independently without coordination</formal-spec>
    </property>
    <property id="P.P14.2">
      <name>Eventual Completion</name>
      <formal-spec format="latex">∀task ∈ tasks: ∃agent, time: agent executes task at time</formal-spec>
    </property>
    <property id="P.P14.3">
      <name>Load Balancing</name>
      <formal-spec format="latex">tasks distributed evenly across idle agents</formal-spec>
    </property>
  </properties>
  <operations>
    <operation>
      <name>Dispatch Task</name>
      <signature>dispatch(task: Task) → Effect</signature>
      <formal-definition format="latex">```
   dispatch(task: Task) → Effect
   = tasks := enqueue(tasks, task, task.priority)
     if ∃agent: agent.status = Idle:
       assign(agent, task)</formal-definition>
    </operation>
    <operation>
      <name>Assign to Agent</name>
      <signature>assign(agent: Agent, task: Task) → Effect</signature>
      <formal-definition format="latex">```
   assign(agent: Agent, task: Task) → Effect
   = agent.status := Busy(task)
     result := agent.execute(task)
     results[task] := result
     agent.status := Idle
     try_assign_next(agent)</formal-definition>
    </operation>
    <operation>
      <name>Aggregate Results</name>
      <signature>aggregate() → Result</signature>
      <formal-definition format="latex">```
   aggregate() → Result
   = if ∀task ∈ tasks: task ∈ keys(results):
       coord.aggregate(results)</formal-definition>
    </operation>
    <operation>
      <name>Work Stealing</name>
      <signature/>
      <formal-definition format="latex">```
   Idle agents take tasks from busy agents' queues
   Good load balancing</formal-definition>
    </operation>
    <operation>
      <name>Task Queue</name>
      <signature/>
      <formal-definition format="latex">```
   Central queue, agents pull tasks when idle
   Simple, fair</formal-definition>
    </operation>
    <operation>
      <name>Priority Queue</name>
      <signature/>
      <formal-definition format="latex">```
   High-priority tasks executed first
   Supports urgency</formal-definition>
    </operation>
  </operations>
  <manifestations>
    <manifestation>
      <name>Multi-agent reasoning</name>
      <description>AI</description>
    </manifestation>
    <manifestation>
      <name>Parallel analysis</name>
    </manifestation>
    <manifestation>
      <name>Distributed builds</name>
    </manifestation>
    <manifestation>
      <name>Map-reduce</name>
    </manifestation>
  </manifestations>
</pattern>
